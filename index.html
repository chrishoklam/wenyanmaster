&lt;!--
   * WenyanMaster - &#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5; &#x00a9; 2025
   * All rights reserved. Unauthorized copying or reproduction is prohibited.
   --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="zh-TW"&gt;
   &lt;head&gt;
      &lt;meta charset="UTF-8"&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
      &lt;title&gt;&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;&lt;/title&gt;
      &lt;link rel="manifest" href="manifest.json"&gt;
      &lt;!-- iOS &#x989d;&#x5916;&#x914d;&#x7f6e; --&gt;
      &lt;link rel="apple-touch-icon" href="https://i.imgur.com/tuMkTTR.png"&gt;
      &lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;
      &lt;meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"&gt;
      &lt;meta name="apple-mobile-web-app-title" content="&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;"&gt;
      &lt;meta name="theme-color" content="#ffffff"&gt;
      &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;
      &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"&gt;
      &lt;!-- &#x6dfb;&#x52a0;html2canvas&#x5e93; - &#x7528;&#x4e8e;&#x622a;&#x56fe;&#x529f;&#x80fd; --&gt;
      &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"&gt;&lt;/script&gt;
      &lt;script&gt;
         tailwind.config = {
             darkMode: 'class',
             theme: {
                 extend: {
                     colors: {
                         primary: '#5D5CDE',
                         /* &#x904a;&#x6232;&#x754c;&#x9762;&#x984f;&#x8272; */
                         paper: {
                             light: '#f9f9ec',
                             dark: '#2a2a2a'
                         }
                     },
                     fontFamily: {
                         'sans': ['Noto Sans TC', 'sans-serif'],
                         'serif': ['"Noto Serif TC"', 'serif'],
                     }
                 }
             }
         }
      &lt;/script&gt;
      &lt;style&gt;
         @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;family=Noto+Serif+TC:wght@400;500;700&amp;display=swap');
         body {
         overflow-x: hidden;
         }
         /* &#x6ed1;&#x584a;&#x6a23;&#x5f0f; */
         input:checked + .slider:before {
           transform: translateX(21px);
         }
         .game-mode-switch-container {
           min-width: 120px;
           justify-content: center;
         }
         /* 8-bit &#x50cf;&#x7d20;&#x98a8;&#x683c;&#x982d;&#x50cf;&#x6a23;&#x5f0f; */
         .pixel-avatar {
         image-rendering: pixelated;
         image-rendering: -moz-crisp-edges;
         image-rendering: crisp-edges;
         width: 100%;
         height: 100%;
         display: flex;
         align-items: center;
         justify-content: center;
         }
         .avatar-option {
         width: 60px;
         height: 60px;
         border-radius: 8px;
         cursor: pointer;
         transition: all 0.2s ease;
         overflow: hidden;
         position: relative;
         border: 2px solid transparent;
         background-color: #f0f0f0;
         }
         .dark .avatar-option {
         background-color: #333;
         }
         .avatar-option:hover {
         transform: scale(1.05);
         box-shadow: 0 3px 8px rgba(0,0,0,0.2);
         }
         .avatar-option.selected {
         border-color: #5D5CDE;
         box-shadow: 0 0 0 2px rgba(93, 92, 222, 0.3);
         }
         .book {
         perspective: 1200px;
         }
         .page {
         transform-origin: center left;
         transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1.000);
         transform-style: preserve-3d;
         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
         }
         .page.turned {
         transform: rotateY(-180deg);
         }
         .page-content {
         backface-visibility: hidden;
         }
         .page-back {
         backface-visibility: hidden;
         transform: rotateY(180deg);
         }
         .character {
         animation: fadeIn 0.5s ease-in-out;
         text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
         }
         .dark .character {
         text-shadow: 0 2px 5px rgba(255, 255, 255, 0.2);
         }
         .option-btn {
         transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
         box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
         animation: flyIn 0.6s cubic-bezier(0.19, 1, 0.22, 1) backwards;
         transform-style: preserve-3d;
         perspective: 1000px;
         position: relative;
         overflow: hidden;
         will-change: transform;
         }
         .option-btn:nth-child(1) { animation-delay: 0s; }
         .option-btn:nth-child(2) { animation-delay: 0.1s; }
         .option-btn:nth-child(3) { animation-delay: 0.2s; }
         .option-btn:before {
         content: '';
         position: absolute;
         top: -50%;
         left: -50%;
         width: 200%;
         height: 200%;
         background: linear-gradient(
         to bottom right,
         rgba(255, 255, 255, 0.3) 0%,
         rgba(255, 255, 255, 0) 50%,
         rgba(255, 255, 255, 0) 100%
         );
         transform: rotate(30deg);
         transition: transform 0.7s;
         }
         .option-btn:hover:before {
         transform: rotate(30deg) translate(10%, 10%);
         }
         .option-btn:hover {
         transform: translateY(-3px) translateZ(20px) rotateX(10deg);
         box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);
         }
         @keyframes flyIn {
         0% {
         opacity: 0;
         transform: translateZ(-300px) scale(0.5) rotateX(20deg);
         }
         70% {
         opacity: 1;
         transform: translateZ(50px) scale(1.05) rotateX(-5deg);
         }
         100% {
         transform: translateZ(0) scale(1) rotateX(0);
         }
         }
         .option-btn.correct {
         background-color: rgba(34, 197, 94, 0.8);
         color: white;
         animation: correct-pulse 0.5s ease-in-out;
         }
         @keyframes correct-pulse {
         0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
         50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
         100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
         }
         .option-btn.incorrect {
         background-color: rgba(239, 68, 68, 0.8);
         color: white;
         animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
         }
         @keyframes shake {
         10%, 90% { transform: translate3d(-1px, 0, 0); }
         20%, 80% { transform: translate3d(2px, 0, 0); }
         30%, 50%, 70% { transform: translate3d(-3px, 0, 0); }
         40%, 60% { transform: translate3d(3px, 0, 0); }
         }
         .dark .option-btn {
         box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
         }
         .dark .page {
         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
         }
         /* &#x7d71;&#x4e00;&#x52d5;&#x756b;&#x5b9a;&#x7fa9; */
         /* &#x6de1;&#x5165;&#x6de1;&#x51fa;&#x52d5;&#x756b; */
         @keyframes fadeIn {
         from { opacity: 0; transform: translateY(10px); }
         to { opacity: 1; transform: translateY(0); }
         }
         @keyframes fadeOut {
         from { opacity: 1; }
         to { opacity: 0; }
         }
         @keyframes fadeInOut {
         0% { opacity: 0; transform: translate(-50%, -20px); }
         15% { opacity: 1; transform: translate(-50%, 0); }
         85% { opacity: 1; transform: translate(-50%, 0); }
         100% { opacity: 0; transform: translate(-50%, -20px); }
         }
         /* &#x9707;&#x52d5;&#x6548;&#x679c; */
         @keyframes screen-shake {
         0%, 100% { transform: translateX(0); }
         10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
         20%, 40%, 60%, 80% { transform: translateX(5px); }
         }
         @keyframes game-over-shake {
         0%, 100% { transform: translateX(0); }
         10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
         20%, 40%, 60%, 80% { transform: translateX(10px); }
         }
         /* &#x8108;&#x52d5;&#x6548;&#x679c; */
         @keyframes heart-pulse {
         0% { transform: scale(1); }
         50% { transform: scale(1.2); }
         100% { transform: scale(1); }
         }
         @keyframes countdownPulse {
         0% { transform: scale(1.2); opacity: 0.5; }
         50% { transform: scale(1.5); opacity: 1; }
         100% { transform: scale(1); opacity: 0.7; }
         }
         @keyframes correct-pulse {
         0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
         50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
         100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
         }
         /* &#x7279;&#x6548;&#x52d5;&#x756b; */
         @keyframes bounce {
         0%, 100% { transform: translateY(0); }
         50% { transform: translateY(-10px); }
         }
         @keyframes inkSplash {
         0% { transform: scale(0); opacity: 0.8; }
         70% { opacity: 0.3; }
         100% { transform: scale(15); opacity: 0; }
         }
         @keyframes flyIn {
         0% {
         opacity: 0;
         transform: translateZ(-300px) scale(0.5) rotateX(20deg);
         }
         70% {
         opacity: 1;
         transform: translateZ(50px) scale(1.05) rotateX(-5deg);
         }
         100% {
         transform: translateZ(0) scale(1) rotateX(0);
         }
         }
         @keyframes pauseMenuAppear {
         from { opacity: 0; transform: scale(0.9); }
         to { opacity: 1; transform: scale(1); }
         }
         /* &#x52d5;&#x756b;&#x985e; */
         .fade-out {
         animation: fadeOut 0.5s ease forwards;
         }
         .screen-shake {
         animation: screen-shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
         }
         .game-over-shake {
         animation: game-over-shake 0.8s ease-in-out;
         }
         .animate-pulse {
         animation: heart-pulse 1.5s ease-in-out infinite;
         }
         .animate-bounce {
         animation: bounce 1s ease infinite;
         }
         .pause-countdown-number {
         animation: countdownPulse 1s ease-out;
         }
         /* &#x58a8;&#x6ef4;&#x6548;&#x679c; - &#x4f7f;&#x7528;CSS&#x8b8a;&#x91cf; */
         :root {
         --ink-drop-color: rgba(0, 0, 0, 0.7);
         --ink-drop-color-dark: rgba(255, 255, 255, 0.5);
         --ink-animation-duration: 2s;
         --ink-animation-timing: cubic-bezier(0.165, 0.84, 0.44, 1);
         }
         .ink-drop {
         position: absolute;
         top: 0;
         left: 0;
         width: 10px;
         height: 10px;
         border-radius: 50%;
         background-color: var(--ink-drop-color);
         opacity: 0;
         transform: scale(0);
         animation: inkSplash var(--ink-animation-duration) var(--ink-animation-timing) forwards;
         }
         .dark .ink-drop {
         background-color: var(--ink-drop-color-dark);
         }
         /* 3D&#x4e66;&#x672c; */
         .book {
         transform-style: preserve-3d;
         }
         .book:after {
         content: '';
         position: absolute;
         top: 0;
         right: 0;
         bottom: 0;
         width: 30px;
         background: linear-gradient(to right, rgba(0,0,0,0.1), rgba(0,0,0,0.4));
         transform: translateX(100%) rotateY(90deg);
         transform-origin: left;
         }
         /* &#x6210;&#x5c31;&#x5fbd;&#x7ae0;&#x6a23;&#x5f0f; */
         .achievement-seal {
         width: 80px;
         height: 80px;
         position: relative;
         display: inline-flex;
         justify-content: center;
         align-items: center;
         margin: 0 0px 0px;
         transform: rotate(-5deg);
         }
         .achievement-seal svg {
         position: absolute;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         }
         .seal-text {
         position: relative;
         z-index: 5;
         font-family: 'Noto Serif TC', serif;
         font-weight: bold;
         text-align: center;
         display: flex;
         flex-direction: column;
         color: #fff;
         line-height: 1.2;
         }
         .seal-title {
         font-size: 14px;
         margin-bottom: 2px;
         }
         .seal-desc {
         font-size: 10px;
         opacity: 0.9;
         }
         .achievements-container {
         display: flex;
         flex-wrap: wrap;
         justify-content: center;
         margin-bottom: 10px;
         }
         /* &#x66ab;&#x505c;&#x83dc;&#x55ae;&#x52d5;&#x756b; */
         @keyframes pauseMenuAppear {
         from { opacity: 0; transform: scale(0.9); }
         to { opacity: 1; transform: scale(1); }
         }
         #pause-overlay &gt; div {
         animation: pauseMenuAppear 0.3s ease-out;
         }
         /* &#x5012;&#x8a08;&#x6642;&#x6578;&#x5b57;&#x52d5;&#x756b; */
         .pause-countdown-number {
         animation: countdownPulse 1s ease-out;
         }
         @keyframes countdownPulse {
         0% { transform: scale(1.2); opacity: 0.5; }
         50% { transform: scale(1.5); opacity: 1; }
         100% { transform: scale(1); opacity: 0.7; }
         }
         /* &#x512a;&#x5316;&#x7bc7;&#x7ae0;&#x5217;&#x8868;&#x548c;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x7684;&#x6efe;&#x52d5;&#x689d;&#x6a23;&#x5f0f; */
         #passage-list, #paragraph-list, .paragraph-options {
         scrollbar-width: thin;
         scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
         }
         #passage-list::-webkit-scrollbar, #paragraph-list::-webkit-scrollbar, .paragraph-options::-webkit-scrollbar {
         width: 6px;
         }
         #passage-list::-webkit-scrollbar-track, #paragraph-list::-webkit-scrollbar-track, .paragraph-options::-webkit-scrollbar-track {
         background: transparent;
         }
         #passage-list::-webkit-scrollbar-thumb, #paragraph-list::-webkit-scrollbar-thumb, .paragraph-options::-webkit-scrollbar-thumb {
         background-color: rgba(156, 163, 175, 0.5);
         border-radius: 6px;
         }
         /* &#x78ba;&#x4fdd;&#x7bc7;&#x7ae0;&#x548c;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x6709;&#x5408;&#x9069;&#x7684;&#x5167;&#x8ddd; */
         .passage-item, #paragraph-list &gt; div {
         padding: 0.5rem;
         margin-bottom: 0.25rem;
         }
         /* &#x78ba;&#x4fdd;&#x53ef;&#x898b;&#x6027;&#x6307;&#x793a;&#x5668; */
         .passage-item.hidden, #paragraph-selector.hidden {
         display: none;
         }
         /* &#x512a;&#x5316;&#x6bb5;&#x843d;&#x9078;&#x9805;&#x5bb9;&#x5668; */
         .paragraph-options {
         max-height: 300px;
         overflow-y: auto;
         margin-bottom: 10px;
         padding-right: 10px;
         }
         /* &#x6539;&#x9032;&#x78ba;&#x5b9a;&#x6309;&#x9215;&#x6a23;&#x5f0f;&#x548c;&#x4f4d;&#x7f6e; */
         #confirm-paragraphs {
         position: sticky;
         bottom: 0;
         margin-top: 10px;
         width: 100%;
         padding: 8px;
         font-weight: 500;
         box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
         }
      &lt;/style&gt;
      &lt;!-- &#x6176;&#x795d;&#x52d5;&#x756b;&#x548c;&#x8f09;&#x5165;&#x52d5;&#x756b;&#x6a23;&#x5f0f; --&gt;
      &lt;style&gt;
         #confetti-canvas {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         pointer-events: none;
         z-index: 100;
         }
         /* &#x58a8;&#x6c34;&#x64f4;&#x6563;&#x52d5;&#x756b;&#x6a23;&#x5f0f; - &#x7c21;&#x5316;&#x7248; */
         #loading-container {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(245, 242, 234, 1); /* &#x5b8c;&#x5168;&#x4e0d;&#x900f;&#x660e;&#x80cc;&#x666f; */
         display: flex;
         justify-content: center;
         align-items: center;
         z-index: 9999; /* &#x66f4;&#x9ad8;&#x7684; z-index &#x78ba;&#x4fdd;&#x8986;&#x84cb;&#x6240;&#x6709;&#x5143;&#x7d20; */
         opacity: 0;
         animation: fadeIn 0.15s ease forwards;
         overflow: hidden;
         }
         #main-splash {
         position: absolute;
         width: 220px;
         height: 220px;
         top: 50%;
         left: 50%;
         background-color: rgba(0, 0, 0, 0.85);
         border-radius: 50%;
         transform-origin: center;
         transform: translate(-50%, -50%) scale(0);
         opacity: 0;
         animation: mainSplash 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards;
         }
         @keyframes mainSplash {
         0% { 
         transform: translate(-50%, -50%) scale(0); 
         opacity: 0.9;
         border-radius: 50%;
         }
         20% { 
         opacity: 0.8;
         }
         100% { 
         transform: translate(-50%, -50%) scale(4.5); 
         opacity: 0;
         border-radius: 48%;
         }
         }
         @keyframes fadeIn {
         from { opacity: 0; }
         to { opacity: 1; }
         }
         @keyframes fadeOut {
         from { opacity: 1; }
         to { opacity: 0; }
         }
         .fade-out {
         animation: fadeOut 0.5s ease forwards;
         }
         /* &#x555f;&#x52d5;&#x754c;&#x9762;&#x6a23;&#x5f0f; */
         #start-screen {
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-image: url('https://i.imgur.com/ACyJYTg.png');
         background-color: rgba(0, 0, 0, 0.7);
         background-blend-mode: overlay;
         background-size: cover;
         background-position: center;
         display: flex;
         flex-direction: column;
         justify-content: center;
         align-items: center;
         z-index: 10000;
         transition: opacity 0.8s ease;
         }
         .start-title {
         font-size: 2.5rem;
         font-weight: bold;
         color: white;
         text-align: center;
         margin-bottom: 3rem;
         text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
         line-height: 1.3;
         }
         .start-button {
         position: relative;
         padding: 0.8rem 2.5rem;
         color: white;
         border: none;
         font-size: 1.25rem;
         font-weight: 500;
         cursor: pointer;
         transition: all 0.3s ease;
         margin-bottom: 2.5rem;
         /* &#x7d14;&#x9ed1;&#x767d;&#x6c34;&#x58a8;&#x98a8;&#x683c; */
         background-color: rgba(0, 0, 0, 0.9);
         border-radius: 0.5rem;
         overflow: hidden;
         /* &#x7c21;&#x6f54;&#x9670;&#x5f71; */
         box-shadow: 
         0 4px 10px rgba(0, 0, 0, 0.4),
         inset 0 0 3px rgba(255, 255, 255, 0.15);
         /* &#x6dfb;&#x52a0;&#x6bdb;&#x7b46;&#x908a;&#x7de3;&#x6548;&#x679c; */
         border: 1px solid rgba(255, 255, 255, 0.1);
         }
         .start-button::before {
         content: '';
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         /* &#x8f15;&#x5fae;&#x7684;&#x9ed1;&#x767d;&#x8b8a;&#x5316;&#xff0c;&#x6a21;&#x64ec;&#x58a8;&#x8de1;&#x6fc3;&#x6de1; */
         background: 
         radial-gradient(ellipse at top left, rgba(60, 60, 60, 0.5) 0%, transparent 70%),
         radial-gradient(ellipse at bottom right, rgba(20, 20, 20, 0.8) 0%, transparent 70%);
         opacity: 0.7;
         z-index: -1;
         }
         .start-button::after {
         content: '';
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         bottom: 0;
         /* &#x6c34;&#x58a8;&#x7d0b;&#x7406;&#x6548;&#x679c; */
         background-image: url('data:image/svg+xml;utf8,
         &lt;svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"&gt;
            &lt;filter id="noise"&gt;
               &lt;feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/&gt;
               &lt;feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.3 0"/&gt;
            &lt;/filter&gt;
            &lt;rect width="100%" height="100%" filter="url(%23noise)"/&gt;
         &lt;/svg&gt;
         ');
         opacity: 0.07;
         mix-blend-mode: overlay;
         z-index: -1;
         pointer-events: none;
         }
         .start-button:hover {
         transform: translateY(-2px);
         box-shadow: 
         0 6px 12px rgba(0, 0, 0, 0.5),
         inset 0 0 5px rgba(255, 255, 255, 0.2);
         /* &#x61f8;&#x505c;&#x6642;&#x8b8a;&#x6697;&#x4e00;&#x9ede;&#xff0c;&#x6a21;&#x64ec;&#x58a8;&#x8272;&#x52a0;&#x6df1; */
         background-color: rgba(0, 0, 0, 1);
         }
         .start-button:active {
         transform: translateY(0);
         box-shadow: 
         0 2px 6px rgba(0, 0, 0, 0.4),
         inset 0 0 3px rgba(255, 255, 255, 0.1);
         }
         .version-info {
         color: rgba(255, 255, 255, 0.8);
         font-size: 0.9rem;
         }
      &lt;/style&gt;
   &lt;/head&gt;
   &lt;body class="bg-white font-serif min-h-screen bg-cover bg-center bg-fixed" style="background-image: url('https://i.imgur.com/ACyJYTg.png'); background-color: rgba(255, 255, 255, 0.8); background-blend-mode: overlay;"&gt;
      &lt;!-- &#x555f;&#x52d5;&#x754c;&#x9762; --&gt;
      &lt;div id="start-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-cover bg-center" style="background-image: url('https://i.imgur.com/ACyJYTg.png'); background-color: rgba(0, 0, 0, 0.7); background-blend-mode: overlay;"&gt;
         &lt;div class="text-center p-8 max-w-xl"&gt;
            &lt;h1 class="start-title mb-10 text-4xl md:text-5xl font-bold text-white leading-tight drop-shadow-lg"&gt;&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;&lt;/h1&gt;
            &lt;button id="start-journey-btn" class="start-button text-xl font-medium px-8 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg transform transition hover:scale-105"&gt;
            &#x9032;&#x5165;
            &lt;/button&gt;
            &lt;p class="version-info mt-10 text-white/70 text-sm"&gt;v1.4.3&lt;/p&gt;
         &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- &#x66ab;&#x505c;&#x83dc;&#x55ae;&#x8986;&#x84cb;&#x5c64; - &#x6539;&#x9032;&#x6309;&#x9215;&#x5782;&#x76f4;&#x5c45;&#x4e2d; --&gt;
      &lt;div id="pause-overlay" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"&gt;
         &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-8 py-12 max-w-sm w-full mx-4 flex flex-col items-center justify-center"&gt;
            &lt;div id="pause-buttons" class="flex justify-center gap-8 mb-8"&gt;
               &lt;button id="restart-from-pause-btn" class="w-16 h-16 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors flex items-center justify-center text-xl" title="&#x91cd;&#x65b0;&#x958b;&#x59cb;"&gt;
               &lt;i class="fas fa-redo"&gt;&lt;/i&gt;
               &lt;/button&gt;
               &lt;button id="continue-btn" class="w-16 h-16 bg-primary text-white rounded-full hover:bg-opacity-90 flex items-center justify-center text-xl" title="&#x7e7c;&#x7e8c;&#x904a;&#x6232;"&gt;
               &lt;i class="fas fa-play"&gt;&lt;/i&gt;
               &lt;/button&gt;
               &lt;button id="return-home-btn" class="w-16 h-16 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors flex items-center justify-center text-xl" title="&#x8fd4;&#x56de;&#x4e3b;&#x9801;"&gt;
               &lt;i class="fas fa-home"&gt;&lt;/i&gt;
               &lt;/button&gt;
            &lt;/div&gt;
            &lt;!-- &#x96b1;&#x85cf;&#x7684;&#x5012;&#x8a08;&#x6642;&#x986f;&#x793a; --&gt;
            &lt;div id="countdown-resume" class="hidden text-center"&gt;
               &lt;p class="text-gray-600 dark:text-gray-300 mb-3"&gt;&#x904a;&#x6232;&#x5c07;&#x5728;&#x4ee5;&#x4e0b;&#x6642;&#x9593;&#x5f8c;&#x7e7c;&#x7e8c;&lt;/p&gt;
               &lt;div class="text-4xl font-bold text-primary pause-countdown-number"&gt;3&lt;/div&gt;
            &lt;/div&gt;
         &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- &#x8a2d;&#x7f6e;&#x6309;&#x9215; - &#x7d55;&#x5c0d;&#x56fa;&#x5b9a;&#x4e0d;&#x6efe;&#x52d5; --&gt;
      &lt;div id="settings-button" style="position: fixed; top: 16px; left: 16px; width: 48px; height: 48px; background-color: #92400e; color: white; border-radius: 50%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 9999; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s;"&gt;
         &lt;i class="fas fa-cog text-xl"&gt;&lt;/i&gt;
      &lt;/div&gt;
      &lt;!-- &#x8a2d;&#x7f6e;&#x83dc;&#x55ae; --&gt;
      &lt;div id="settings-menu" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"&gt;
         &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"&gt;
            &lt;div class="flex justify-between items-center mb-6"&gt;
               &lt;h2 class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&#x8a2d;&#x7f6e;&lt;/h2&gt;
               &lt;button id="close-settings" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
               &lt;i class="fas fa-times"&gt;&lt;/i&gt;
               &lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="flex flex-col gap-3"&gt;
               &lt;button data-section="help" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-question-circle text-primary mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x904a;&#x73a9;&#x8aaa;&#x660e;&lt;/span&gt;
               &lt;/button&gt;
               &lt;button data-section="records" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-trophy text-amber-500 mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x6211;&#x7684;&#x8a18;&#x9304;&lt;/span&gt;
               &lt;/button&gt;
               &lt;button data-section="achievements" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-medal text-yellow-500 mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x6b77;&#x53f2;&#x6210;&#x5c31;&lt;/span&gt;
               &lt;/button&gt;
               &lt;button data-section="saveload" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-save text-cyan-500 mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x4fdd;&#x5b58;&#x53ca;&#x8f09;&#x5165;&#x9032;&#x5ea6;&lt;/span&gt;
               &lt;/button&gt;
               &lt;button data-section="version" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-code-branch text-green-500 mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x7248;&#x672c;&#x8cc7;&#x8a0a;&lt;/span&gt;
               &lt;/button&gt;
               &lt;button data-section="about" class="settings-option py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center hover:bg-gray-100 dark:hover:bg-gray-600"&gt;
               &lt;i class="fas fa-user text-blue-500 mr-3"&gt;&lt;/i&gt;
               &lt;span class="text-gray-800 dark:text-gray-200 font-semibold"&gt;&#x95dc;&#x65bc;&#x88fd;&#x4f5c;&#x8005;&lt;/span&gt;
               &lt;/button&gt;
            &lt;/div&gt;
         &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- &#x8a73;&#x7d30;&#x4fe1;&#x606f;&#x6a21;&#x614b;&#x6846; --&gt;
      &lt;div id="info-modal" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"&gt;
         &lt;div class="bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full mx-4 max-h-[80vh] flex flex-col"&gt;
            &lt;!-- &#x56fa;&#x5b9a;&#x5728;&#x9802;&#x90e8;&#x7684;&#x6a19;&#x984c;&#x6b04;&#xff0c;&#x4e0d;&#x53c3;&#x8207;&#x6efe;&#x52d5; --&gt;
            &lt;div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-20 shadow-sm"&gt;
               &lt;h3 id="info-modal-title" class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&lt;/h3&gt;
               &lt;button id="close-info-modal" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
               &lt;i class="fas fa-times"&gt;&lt;/i&gt;
               &lt;/button&gt;
            &lt;/div&gt;
            &lt;!-- &#x5167;&#x5bb9;&#x5340;&#x57df;&#x53ef;&#x6efe;&#x52d5; --&gt;
            &lt;div class="overflow-y-auto p-6 pt-2 flex-1"&gt;
               &lt;div id="info-modal-content" class="text-gray-700 dark:text-gray-300"&gt;&lt;/div&gt;
            &lt;/div&gt;
         &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- &#x982d;&#x50cf;&#x9078;&#x64c7;&#x6a21;&#x614b;&#x6846; --&gt;
      &lt;div id="avatar-selector-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"&gt;
         &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-5 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto"&gt;
            &lt;div class="flex justify-between items-center mb-4"&gt;
               &lt;h3 class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&#x9078;&#x64c7;&#x982d;&#x50cf;&lt;/h3&gt;
               &lt;button id="close-avatar-selector" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
               &lt;i class="fas fa-times"&gt;&lt;/i&gt;
               &lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="grid grid-cols-4 gap-3 md:grid-cols-5 md:gap-4" id="avatar-grid"&gt;
               &lt;!-- &#x982d;&#x50cf;&#x6703;&#x901a;&#x904e;JS&#x52d5;&#x614b;&#x751f;&#x6210; --&gt;
            &lt;/div&gt;
         &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="container mx-auto px-4 pt-16 pb-8 max-w-2xl"&gt;
         &lt;header class="mb-8 text-center"&gt;
            &lt;h1 class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-gray-100 mb-2"&gt;&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;&lt;/h1&gt;
            &lt;p class="text-gray-600 dark:text-gray-300 text-m"&gt;&#x8e0f;&#x4e0a;&#x5c6c;&#x65bc;&#x81ea;&#x5df1;&#x7684;&#x5f81;&#x9014;&lt;/p&gt;
         &lt;/header&gt;
         &lt;div class="passage-selector mb-6"&gt;
            &lt;div id="passage-container" class="bg-amber-800 rounded-lg overflow-hidden transition-all duration-300 shadow-md z-50" style="max-height: 46px;"&gt;
               &lt;div id="passage-header" class="flex justify-between items-center cursor-pointer p-3 text-white"&gt;
                  &lt;h3 class="text-lg font-medium"&gt;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&lt;/h3&gt;
                  &lt;i id="passage-toggle" class="fas fa-chevron-down transition-transform duration-300"&gt;&lt;/i&gt;
               &lt;/div&gt;
               &lt;div id="passage-content" class="px-3 pb-3 hidden"&gt;
                  &lt;div class="categories mb-3 flex flex-wrap gap-2 justify-between"&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x4e2d;&#x4e00;"&gt;&#x4e2d;&#x4e00;&lt;/button&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x4e2d;&#x4e8c;"&gt;&#x4e2d;&#x4e8c;&lt;/button&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x4e2d;&#x4e09;"&gt;&#x4e2d;&#x4e09;&lt;/button&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x6307;&#x5b9a;&#x6587;&#x8a00;"&gt;&#x6307;&#x5b9a;&#x6587;&#x8a00;&lt;/button&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x6587;&#x5b78;"&gt;&#x6587;&#x5b78;&lt;/button&gt;
                     &lt;button class="category-btn p-2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 rounded-md hover:bg-amber-200 dark:hover:bg-amber-700 text-sm flex-1" data-category="&#x5176;&#x4ed6;"&gt;&#x5176;&#x4ed6;&lt;/button&gt;
                  &lt;/div&gt;
                  &lt;div id="passage-list" class="bg-white dark:bg-gray-800 rounded-md p-2 max-h-60 overflow-y-auto"&gt;
                     &lt;!-- &#x7bc7;&#x7ae0;&#x9805;&#x76ee;&#x6703;&#x5728;&#x521d;&#x59cb;&#x5316;&#x6642;&#x81ea;&#x52d5;&#x751f;&#x6210; --&gt;
                     &lt;!-- &#x7a7a;&#x5206;&#x985e;&#x63d0;&#x793a;&#x4fe1;&#x606f; --&gt;
                     &lt;div id="empty-category-message" class="p-4 text-center hidden"&gt;
                        &lt;i class="fas fa-info-circle text-amber-500 text-xl mb-2"&gt;&lt;/i&gt;
                        &lt;p class="text-gray-600 dark:text-gray-300"&gt;&#x6b64;&#x5206;&#x985e;&#x66ab;&#x7121;&#x7bc7;&#x7ae0;&#xff0c;&#x8acb;&#x9078;&#x64c7;&#x5176;&#x4ed6;&#x5206;&#x985e;&lt;/p&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;!--&#x9078;&#x64c7;&#x5340;&#x57df;&#x6bb5;&#x843d; (&#x9ed8;&#x8a8d;&#x96b1;&#x85cf;) --&gt;
                  &lt;div id="paragraph-selector" class="mt-3 bg-white dark:bg-gray-800 rounded-md p-3 hidden"&gt;
                     &lt;p class="text-gray-700 dark:text-gray-300 mb-2 font-medium"&gt;&#x9078;&#x64c7;&#x80cc;&#x8aa6;&#x6bb5;&#x843d;&#xff1a;&lt;/p&gt;
                     &lt;div id="paragraph-list" class="space-y-2"&gt;
                        &lt;!-- &#x6bb5;&#x843d;&#x9078;&#x9805;&#x5c07;&#x5728;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x5f8c;&#x52d5;&#x614b;&#x751f;&#x6210; --&gt;
                     &lt;/div&gt;
                     &lt;div class="mt-3"&gt;
                        &lt;button id="confirm-paragraphs" class="px-3 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 text-base font-medium w-full"&gt;
                        &#x78ba;&#x5b9a;
                        &lt;/button&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
               &lt;/div&gt;
            &lt;/div&gt;
         &lt;/div&gt;
         &lt;div class="book relative mb-8"&gt;
            &lt;!-- &#x7528;&#x6236;&#x8cc7;&#x6599;&#x5bb9;&#x5668; - &#x4fee;&#x6539;&#x6210;&#x8207;&#x904a;&#x6232;&#x9801;&#x9762;&#x76f8;&#x4f3c;&#x5927;&#x5c0f; --&gt;
            &lt;div id="user-profile-container" class="page rounded-lg overflow-hidden bg-white dark:bg-gray-800 p-6 md:p-8 min-h-[400px] shadow-md"&gt;
               &lt;div class="flex flex-col h-full justify-center items-center"&gt;
                  &lt;div id="change-avatar-btn" class="user-avatar-container w-24 h-24 md:w-32 md:h-32 bg-amber-100 dark:bg-amber-800 rounded-full flex items-center justify-center mb-6 relative cursor-pointer hover:shadow-lg transition-shadow"&gt;
                     &lt;div id="user-avatar" class="w-full h-full flex items-center justify-center overflow-hidden"&gt;
                        &lt;!-- &#x9ed8;&#x8a8d;&#x982d;&#x50cf; --&gt;
                        &lt;i class="fas fa-user text-4xl md:text-5xl text-amber-800 dark:text-amber-100"&gt;&lt;/i&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div class="text-center w-full max-w-md"&gt;
                     &lt;div class="flex justify-center items-center gap-3 mb-4"&gt;
                        &lt;!-- &#x986f;&#x793a;&#x6a21;&#x5f0f; --&gt;
                        &lt;div id="name-display-mode" class="flex items-center"&gt;
                           &lt;h3 id="user-name" class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&#x6587;&#x8a00;&#x5927;&#x5e2b;&lt;/h3&gt;
                           &lt;button id="edit-name-btn" class="ml-2 w-7 h-7 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary transition-colors"&gt;
                           &lt;i class="fas fa-pen text-xs"&gt;&lt;/i&gt;
                           &lt;/button&gt;
                        &lt;/div&gt;
                        &lt;!-- &#x7de8;&#x8f2f;&#x6a21;&#x5f0f; (&#x9ed8;&#x8a8d;&#x96b1;&#x85cf;) --&gt;
                        &lt;div id="name-edit-mode" class="flex flex-col items-center gap-2 hidden w-full max-w-xs mx-auto"&gt;
                           &lt;div class="w-full relative"&gt;
                              &lt;input type="text" id="user-name-input" class="w-full text-xl font-bold text-gray-800 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 border-2 border-primary/70 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary shadow-sm" maxlength="12"&gt;
                              &lt;div class="absolute right-3 bottom-2 text-xs text-gray-500 dark:text-gray-400" id="char-counter"&gt;0/12&lt;/div&gt;
                           &lt;/div&gt;
                           &lt;div class="flex gap-3 mt-1"&gt;
                              &lt;button id="save-name-btn" class="w-9 h-9 flex items-center justify-center bg-green-500 hover:bg-green-600 text-white rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors"&gt;
                              &lt;i class="fas fa-check"&gt;&lt;/i&gt;
                              &lt;/button&gt;
                              &lt;button id="cancel-name-btn" class="w-9 h-9 flex items-center justify-center bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-400 transition-colors"&gt;
                              &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                              &lt;/button&gt;
                           &lt;/div&gt;
                        &lt;/div&gt;
                     &lt;/div&gt;
                     &lt;div class="w-full mb-4"&gt;
                        &lt;div class="flex justify-between items-center mb-2"&gt;
                           &lt;div class="flex items-center"&gt;
                              &lt;span id="user-level" class="bg-primary text-white text-sm py-0.5 px-2 rounded-full mr-2"&gt;Lv.1&lt;/span&gt;
                              &lt;span class="text-sm text-gray-600 dark:text-gray-400"&gt;&#x7d93;&#x9a57;&#x503c;&lt;/span&gt;
                           &lt;/div&gt;
                           &lt;span id="exp-text" class="text-sm text-gray-600 dark:text-gray-400"&gt;0 / 100&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div class="h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                           &lt;div id="exp-bar" class="h-full bg-amber-500 rounded-full transition-all duration-300" style="width: 0%"&gt;&lt;/div&gt;
                        &lt;/div&gt;
                     &lt;/div&gt;
                     &lt;div class="mt-6"&gt;
                        &lt;div class="mb-4"&gt;
                           &lt;h4 class="text-md font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center justify-between"&gt;
                              &#x6210;&#x5c31;
                              &lt;button id="manage-achievements-btn" class="text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-md px-2 py-1 focus:outline-none transition-colors"&gt;
                              &lt;i class="fas fa-cog text-xs"&gt;&lt;/i&gt;
                              &lt;/button&gt;
                           &lt;/h4&gt;
                           &lt;div id="achievements-display" class="flex justify-center flex-wrap gap-2"&gt;
                              &lt;p class="text-sm text-gray-500 dark:text-gray-400 italic"&gt;&#x5f9e;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;&#x7684;&#x300c;&#x6b77;&#x53f2;&#x6210;&#x5c31;&#x300d;&#x4e2d;&#x9078;&#x64c7;&#x5c55;&#x793a;&lt;/p&gt;
                           &lt;/div&gt;
                        &lt;/div&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
               &lt;/div&gt;
            &lt;/div&gt;
            &lt;!-- &#x904a;&#x6232;&#x754c;&#x9762;&#x5bb9;&#x5668; --&gt;
            &lt;div id="game-page" class="page rounded-lg overflow-hidden hidden"&gt;
               &lt;div class="page-content bg-paper-light dark:bg-paper-dark p-6 md:p-8 min-h-[400px] flex flex-col justify-between"&gt;
                  &lt;!-- &#x904a;&#x6232;&#x63a7;&#x5236;&#x5340;&#x57df; --&gt;
                  &lt;div class="flex justify-between items-center mb-4"&gt;
                     &lt;div class="flex flex-col gap-2"&gt;
                        &lt;!-- &#x9032;&#x5ea6;&#x689d; --&gt;
                        &lt;div class="w-full max-w-[200px]"&gt;
                           &lt;div class="flex justify-between items-center text-xs text-gray-600 dark:text-gray-400 mb-1"&gt;
                              &lt;span&gt;&#x9032;&#x5ea6;&lt;/span&gt;
                              &lt;span id="progress-text"&gt;0 / &lt;span id="total-chars"&gt;0&lt;/span&gt;&lt;/span&gt;
                           &lt;/div&gt;
                           &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                              &lt;div id="progress-bar" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"&gt;&lt;/div&gt;
                           &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;!-- &#x751f;&#x547d;&#x503c; --&gt;
                        &lt;div id="lives" class="flex text-red-500 dark:text-red-400 text-2xl"&gt;
                           &lt;i class="fas fa-heart mx-0.5"&gt;&lt;/i&gt;
                           &lt;i class="fas fa-heart mx-0.5"&gt;&lt;/i&gt;
                           &lt;i class="fas fa-heart mx-0.5"&gt;&lt;/i&gt;
                        &lt;/div&gt;
                     &lt;/div&gt;
                     &lt;div class="flex items-center gap-2"&gt;
                        &lt;div id="stopwatch" class="text-gray-700 dark:text-gray-300 px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-base flex items-center"&gt;
                           &lt;i class="fas fa-stopwatch mr-2"&gt;&lt;/i&gt;&lt;span id="timer" class="font-medium"&gt;00:00.0&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;!-- &#x66ab;&#x505c;&#x6309;&#x9215;&#x6216;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215; --&gt;
                        &lt;button id="pause-btn" class="p-2 bg-primary text-white rounded-lg hover:bg-opacity-90 text-xl flex items-center justify-center w-10 h-10" title="&#x66ab;&#x505c;&#x904a;&#x6232;"&gt;
                        &lt;i class="fas fa-pause"&gt;&lt;/i&gt;
                        &lt;/button&gt;
                        &lt;button id="return-home-btn-game" class="p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-xl flex items-center justify-center w-10 h-10 hidden" title="&#x8fd4;&#x56de;&#x4e3b;&#x9801;"&gt;
                        &lt;i class="fas fa-home"&gt;&lt;/i&gt;
                        &lt;/button&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div class="text-center"&gt;
                     &lt;div class="passage-info mb-4"&gt;
                        &lt;h2 id="passage-title" class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&#x300a;&#x8ad6;&#x56db;&#x7aef;&#x300b;&lt;/h2&gt;
                        &lt;p id="passage-author" class="text-gray-600 dark:text-gray-400"&gt;&#x5b5f;&#x5b50;&lt;/p&gt;
                     &lt;/div&gt;
                     &lt;div class="current-text my-6"&gt;
                        &lt;div id="game-start-screen" class="flex flex-col items-center justify-center"&gt;
                           &lt;div class="flex flex-col items-center justify-center gap-3"&gt;
                              &lt;div class="flex items-center justify-center gap-3"&gt;
                                 &lt;button id="start-game-btn" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-opacity-90 transform hover:scale-105 transition-transform text-lg"&gt;
                                 &#x958b;&#x59cb;
                                 &lt;/button&gt;
                                 &lt;button id="view-full-text-btn" class="p-3 bg-amber-100 text-amber-800 rounded-lg hover:bg-amber-200 flex items-center justify-center" title="&#x67e5;&#x770b;&#x5b8c;&#x6574;&#x6587;&#x7ae0;"&gt;
                                 &lt;i class="fas fa-search text-xl"&gt;&lt;/i&gt;
                                 &lt;/button&gt;
                              &lt;/div&gt;
                              &lt;!-- &#x55ae;&#x4eba;/&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x5207;&#x63db; - &#x6539;&#x70ba;&#x6ed1;&#x584a; --&gt;
                              &lt;div class="game-mode-switch-container flex items-center my-2"&gt;
                                &lt;span class="text-sm font-medium text-gray-700 dark:text-gray-300 mr-3"&gt;&#x55ae;&#x4eba;&lt;/span&gt;
                                &lt;label class="relative inline-block w-14 h-6"&gt;
                                  &lt;input type="checkbox" id="game-mode-switch" class="opacity-0 w-0 h-0"&gt;
                                  &lt;span class="slider round absolute cursor-pointer inset-0 bg-teal-600 transition-all duration-300 rounded-full before:content-[''] before:absolute before:h-5 before:w-5 before:left-0.5 before:bottom-0.5 before:bg-white before:rounded-full before:transition before:duration-300"&gt;&lt;/span&gt;
                                &lt;/label&gt;
                                &lt;span class="text-sm font-medium text-gray-700 dark:text-gray-300 ml-3"&gt;&#x96d9;&#x4eba;&lt;/span&gt;
                              &lt;/div&gt;
                           &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div id="game-content" class="hidden"&gt;
                           &lt;!-- &#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x904a;&#x6232;&#x754c;&#x9762; --&gt;
                           &lt;div id="single-player-ui" class="flex flex-col items-center justify-center"&gt;
                              &lt;div class="flex items-center justify-center"&gt;
                                 &lt;div id="last-answered-chars" class="text-lg md:text-xl text-gray-700 dark:text-gray-300 whitespace-nowrap overflow-x-auto max-w-full h-12 flex items-center"&gt;&lt;/div&gt;
                                 &lt;div id="current-char" class="character text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 min-w-[1.2em] flex items-center justify-center ml-1"&gt;&lt;/div&gt;
                                 &lt;div class="text-lg text-gray-400 dark:text-gray-500"&gt;...&lt;/div&gt;
                              &lt;/div&gt;
                              &lt;div id="completed-text" class="hidden"&gt;&lt;/div&gt;
                           &lt;/div&gt;
                           &lt;!-- &#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x904a;&#x6232;&#x754c;&#x9762; --&gt;
                           &lt;div id="multiplayer-ui" class="hidden flex flex-col h-full"&gt;
                              &lt;!-- &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x5340;&#x57df; --&gt;
                              &lt;div id="player-top" class="w-full pb-4 mb-2 border-b border-gray-300 dark:border-gray-700 relative" style="transform: rotate(180deg);"&gt;
                                 &lt;div class="flex flex-col items-center"&gt;
                                    &lt;!-- &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x63a7;&#x5236;&#x6b04; --&gt;
                                    &lt;div class="w-full flex justify-between items-center px-4 mb-2"&gt;
                                       &lt;div class="flex flex-col gap-1 max-w-[150px] w-full"&gt;
                                          &lt;div id="stopwatch-top" class="text-gray-700 dark:text-gray-300 px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-base flex items-center"&gt;
                                             &lt;i class="fas fa-stopwatch mr-2"&gt;&lt;/i&gt;&lt;span id="timer-top" class="font-medium"&gt;00:00.0&lt;/span&gt;
                                          &lt;/div&gt;
                                          &lt;!-- &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x9032;&#x5ea6;&#x689d; --&gt;
                                          &lt;div class="px-3"&gt;
                                             &lt;div class="flex justify-between items-center text-xs text-gray-600 dark:text-gray-400"&gt;
                                                &lt;span&gt;&#x9032;&#x5ea6;&lt;/span&gt;
                                                &lt;span id="progress-text-top"&gt;0 / &lt;span id="total-chars-top"&gt;0&lt;/span&gt;&lt;/span&gt;
                                             &lt;/div&gt;
                                             &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                                                &lt;div id="progress-bar-top" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"&gt;&lt;/div&gt;
                                             &lt;/div&gt;
                                          &lt;/div&gt;
                                       &lt;/div&gt;
                                       &lt;button id="pause-btn-top" class="p-2 bg-primary text-white rounded-lg hover:bg-opacity-90 text-xl flex items-center justify-center w-10 h-10" title="&#x66ab;&#x505c;&#x904a;&#x6232;" style="transform: rotate(180deg);"&gt;
                                       &lt;i class="fas fa-pause"&gt;&lt;/i&gt;
                                       &lt;/button&gt;
                                    &lt;/div&gt;
                                    &lt;div class="flex items-center justify-center"&gt;
                                       &lt;div id="last-answered-chars-top" class="text-lg md:text-xl text-gray-700 dark:text-gray-300 whitespace-nowrap overflow-x-auto max-w-full h-12 flex items-center"&gt;&lt;/div&gt;
                                       &lt;div id="current-char-top" class="character text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 min-w-[1.2em] flex items-center justify-center ml-1"&gt;&lt;/div&gt;
                                       &lt;div class="text-lg text-gray-400 dark:text-gray-500"&gt;...&lt;/div&gt;
                                    &lt;/div&gt;
                                    &lt;div id="options-container-top" class="grid grid-cols-3 gap-3 md:gap-4 mt-4 w-full px-4"&gt;&lt;/div&gt;
                                    &lt;!-- &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x932f;&#x8aa4;&#x5c4f;&#x969c; --&gt;
                                    &lt;div id="top-player-error-overlay" class="absolute inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center" style="transform: rotate(180deg);"&gt;
                                       &lt;div class="text-white font-bold flex items-center"&gt;
                                          &lt;span id="top-error-timer" class="text-3xl text-red-500"&gt;&#x25cf;&#x25cf;&#x25cf;&lt;/span&gt;
                                       &lt;/div&gt;
                                    &lt;/div&gt;
                                 &lt;/div&gt;
                              &lt;/div&gt;
                              &lt;!-- &#x4e2d;&#x9593;&#x5340;&#x57df; - &#x50c5;&#x7528;&#x65bc;&#x5012;&#x8a08;&#x6642; --&gt;
                              &lt;div class="flex-grow flex items-center justify-center relative min-h-[50px]"&gt;
                                 &lt;!-- &#x5012;&#x8a08;&#x6642;&#x5340;&#x57df; - &#x589e;&#x52a0;&#x8986;&#x84cb;&#x6574;&#x500b;&#x756b;&#x9762;&#x7684;&#x534a;&#x900f;&#x660e;&#x9ed1;&#x8272;&#x80cc;&#x666f;&#x4e26;&#x52a0;&#x5927;&#x7da0;&#x9ede; --&gt;
                                 &lt;div id="multiplayer-countdown" class="fixed inset-0 flex items-center justify-center hidden bg-black bg-opacity-70 z-[1000]"&gt;
                                    &lt;div class="text-5xl font-bold text-green-500"&gt;&#x25cf;&#x25cf;&#x25cf;&lt;/div&gt;
                                 &lt;/div&gt;
                              &lt;/div&gt;
                              &lt;!-- &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x5340;&#x57df; --&gt;
                              &lt;div id="player-bottom" class="w-full pt-4 mt-2 border-t border-gray-300 dark:border-gray-700 relative"&gt;
                                 &lt;div class="flex flex-col items-center"&gt;
                                    &lt;!-- &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x63a7;&#x5236;&#x6b04; --&gt;
                                    &lt;div class="w-full flex justify-between items-center px-4 mb-2"&gt;
                                       &lt;div class="flex flex-col gap-1 max-w-[150px] w-full"&gt;
                                          &lt;div id="stopwatch-bottom" class="text-gray-700 dark:text-gray-300 px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-lg text-base flex items-center"&gt;
                                             &lt;i class="fas fa-stopwatch mr-2"&gt;&lt;/i&gt;&lt;span id="timer-bottom" class="font-medium"&gt;00:00.0&lt;/span&gt;
                                          &lt;/div&gt;
                                          &lt;!-- &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x9032;&#x5ea6;&#x689d; --&gt;
                                          &lt;div class="px-3"&gt;
                                             &lt;div class="flex justify-between items-center text-xs text-gray-600 dark:text-gray-400"&gt;
                                                &lt;span&gt;&#x9032;&#x5ea6;&lt;/span&gt;
                                                &lt;span id="progress-text-bottom"&gt;0 / &lt;span id="total-chars-bottom"&gt;0&lt;/span&gt;&lt;/span&gt;
                                             &lt;/div&gt;
                                             &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                                                &lt;div id="progress-bar-bottom" class="h-full bg-primary rounded-full transition-all duration-300" style="width: 0%"&gt;&lt;/div&gt;
                                             &lt;/div&gt;
                                          &lt;/div&gt;
                                       &lt;/div&gt;
                                       &lt;button id="pause-btn-bottom" class="p-2 bg-primary text-white rounded-lg hover:bg-opacity-90 text-xl flex items-center justify-center w-10 h-10" title="&#x66ab;&#x505c;&#x904a;&#x6232;"&gt;
                                       &lt;i class="fas fa-pause"&gt;&lt;/i&gt;
                                       &lt;/button&gt;
                                    &lt;/div&gt;
                                    &lt;div class="flex items-center justify-center"&gt;
                                       &lt;div id="last-answered-chars-bottom" class="text-lg md:text-xl text-gray-700 dark:text-gray-300 whitespace-nowrap overflow-x-auto max-w-full h-12 flex items-center"&gt;&lt;/div&gt;
                                       &lt;div id="current-char-bottom" class="character text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 min-w-[1.2em] flex items-center justify-center ml-1"&gt;&lt;/div&gt;
                                       &lt;div class="text-lg text-gray-400 dark:text-gray-500"&gt;...&lt;/div&gt;
                                    &lt;/div&gt;
                                    &lt;div id="options-container-bottom" class="grid grid-cols-3 gap-3 md:gap-4 mt-4 w-full px-4"&gt;&lt;/div&gt;
                                    &lt;!-- &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x932f;&#x8aa4;&#x5c4f;&#x969c; --&gt;
                                    &lt;div id="bottom-player-error-overlay" class="absolute inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center"&gt;
                                       &lt;div class="text-white font-bold flex items-center"&gt;
                                          &lt;span id="bottom-error-timer" class="text-3xl text-red-500"&gt;&#x25cf;&#x25cf;&#x25cf;&lt;/span&gt;
                                       &lt;/div&gt;
                                    &lt;/div&gt;
                                 &lt;/div&gt;
                              &lt;/div&gt;
                           &lt;/div&gt;
                           &lt;!-- &#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x66ab;&#x505c;&#x83dc;&#x55ae; --&gt;
                           &lt;div id="multiplayer-pause-overlay" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden"&gt;
                              &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-8 py-12 max-w-sm w-full mx-4 flex flex-col items-center justify-center"&gt;
                                 &lt;div id="multiplayer-pause-buttons" class="flex justify-center gap-8 mb-8"&gt;
                                    &lt;button id="multiplayer-continue-btn" class="w-16 h-16 bg-primary text-white rounded-full hover:bg-opacity-90 flex items-center justify-center text-xl" title="&#x7e7c;&#x7e8c;&#x904a;&#x6232;"&gt;
                                    &lt;i class="fas fa-play"&gt;&lt;/i&gt;
                                    &lt;/button&gt;
                                    &lt;button id="multiplayer-return-btn" class="w-16 h-16 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors flex items-center justify-center text-xl" title="&#x8fd4;&#x56de;&#x4e3b;&#x9801;"&gt;
                                    &lt;i class="fas fa-home"&gt;&lt;/i&gt;
                                    &lt;/button&gt;
                                 &lt;/div&gt;
                                 &lt;!-- &#x96b1;&#x85cf;&#x7684;&#x5012;&#x8a08;&#x6642;&#x986f;&#x793a; --&gt;
                                 &lt;div id="multiplayer-countdown-resume" class="hidden text-center"&gt;
                                    &lt;p class="text-gray-600 dark:text-gray-300 mb-3"&gt;&#x904a;&#x6232;&#x5c07;&#x5728;&#x4ee5;&#x4e0b;&#x6642;&#x9593;&#x5f8c;&#x7e7c;&#x7e8c;&lt;/p&gt;
                                    &lt;div class="text-4xl font-bold text-primary pause-countdown-number"&gt;3&lt;/div&gt;
                                 &lt;/div&gt;
                              &lt;/div&gt;
                           &lt;/div&gt;
                        &lt;/div&gt;
                     &lt;/div&gt;
                  &lt;/div&gt;
                  &lt;div id="options-container" class="grid grid-cols-3 gap-3 md:gap-4 mb-4"&gt;
                     &lt;!-- Options will be generated here --&gt;
                  &lt;/div&gt;
                  &lt;div id="feedback" class="text-center h-6 text-lg"&gt;&lt;/div&gt;
               &lt;/div&gt;
            &lt;/div&gt;
         &lt;/div&gt;
         &lt;!-- &#x79fb;&#x9664;&#x5e95;&#x90e8;&#x7684;&#x904a;&#x73a9;&#x8aaa;&#x660e;&#x6309;&#x9215;&#xff0c;&#x56e0;&#x70ba;&#x5df2;&#x7d93;&#x653e;&#x5728;&#x9f52;&#x8f2a;&#x83dc;&#x55ae;&#x4e2d; --&gt;
      &lt;/div&gt;
      &lt;!-- &#x7248;&#x672c;&#x865f; --&gt;
      &lt;div class="text-center py-3 text-gray-500 dark:text-gray-400 text-sm"&gt;
         &lt;p&gt;v1.4.3&lt;/p&gt;
         &lt;p&gt;WenyanMaster - &#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5; &#x00a9; 2025&lt;/p&gt;
      &lt;/div&gt;
      &lt;script&gt;
         // &#x6dfb;&#x52a0;&#x7528;&#x65bc;&#x982d;&#x50cf;&#x7684;&#x5169;&#x500b;&#x5168;&#x5c40;&#x8b8a;&#x91cf;
         let userSelectedAvatar = null;
         let avatarPixelData = {
             // &#x5b9a;&#x7fa9;&#x982d;&#x50cf; - &#x90e8;&#x5206;&#x4fdd;&#x7559;&#xff0c;&#x90e8;&#x5206;&#x91cd;&#x65b0;&#x8a2d;&#x8a08;&#x8457;&#x91cd;&#x5448;&#x73fe;&#x7269;&#x4ef6;&#x5f62;&#x72c0;
             'villager': { name: '&#x666e;&#x901a;&#x6751;&#x6c11;', colors: ['#5D4037', '#8D6E63', '#D7CCC8', '#FFF8E1'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'rabbit': { name: '&#x5154;&#x5b50;', colors: ['#FFEBEE', '#FFCDD2', '#9E9E9E', '#424242'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'panda': { name: '&#x718a;&#x8c93;', colors: ['#212121', '#424242', '#FFFFFF', '#90A4AE'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'whale': { name: '&#x9be8;&#x9b5a;', colors: ['#0D47A1', '#1565C0', '#81D4FA', '#E1F5FE'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'bread': { name: '&#x9eb5;&#x5305;', colors: ['#AA7942', '#D2B48C', '#FFFDE7', '#FFECB3'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'chicken': { name: '&#x96de;', colors: ['#FF6F00', '#FFA000', '#FFECB3', '#F44336'] }, // &#x4fdd;&#x7559;
             'dragon': { name: '&#x795e;&#x9f8d;', colors: ['#00695C', '#009688', '#FFD54F', '#D32F2F'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'bomb': { name: '&#x70b8;&#x5f48;', colors: ['#263238', '#37474F', '#546E7A', '#FF3D00'] }, // &#x4fdd;&#x7559;
             'fox': { name: '&#x72d0;&#x72f8;', colors: ['#E65100', '#FF6D00', '#FBE9E7', '#37474F'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'wizard': { name: '&#x9b54;&#x6cd5;&#x5e08;', colors: ['#311B92', '#5E35B1', '#D1C4E9', '#FFC400'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'assassin': { name: '&#x523a;&#x5ba2;', colors: ['#212121', '#424242', '#EEE', '#D50000'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'husky': { name: '&#x54c8;&#x58eb;&#x5947;', colors: ['#455A64', '#78909C', '#CFD8DC', '#ECEFF1'] }, // &#x4fdd;&#x7559;
             'werewolf': { name: '&#x72fc;&#x4eba;', colors: ['#5D4037', '#795548', '#FFC107', '#F5F5F5'] }, // &#x4fdd;&#x7559;
             'cat': { name: '&#x732b;', colors: ['#616161', '#9E9E9E', '#E0E0E0', '#FFC107'] }, // &#x4fdd;&#x7559;
             'orange': { name: '&#x6a59;&#x5b50;', colors: ['#FF9800', '#F57C00', '#4CAF50', '#1B5E20'] }, // &#x4fdd;&#x7559;
             'mask': { name: '&#x9762;&#x5177;', colors: ['#FFFFFF', '#EEEEEE', '#9E9E9E', '#212121'] }, // &#x4fdd;&#x7559;
             'sparrow': { name: '&#x9ebb;&#x96c0;', colors: ['#795548', '#8D6E63', '#A1887F', '#BCAAA4'] }, // &#x4fdd;&#x7559;
             'watermelon': { name: '&#x897f;&#x74dc;', colors: ['#4CAF50', '#388E3C', '#E91E63', '#1B5E20'] }, // &#x4fdd;&#x7559;
             'capybara': { name: '&#x5361;&#x76ae;&#x5df4;&#x62c9;', colors: ['#8D6E63', '#A1887F', '#D7CCC8', '#6D4C41'] }, // &#x4fdd;&#x7559;
             'sunflower': { name: '&#x5411;&#x65e5;&#x8475;', colors: ['#FFEB3B', '#FBC02D', '#795548', '#33691E'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;&#x7684;&#x982d;&#x50cf; - &#x8457;&#x91cd;&#x5448;&#x73fe;&#x7269;&#x4ef6;&#x5f62;&#x72c0;
             'lemon': { name: '&#x6ab8;&#x6aac;', colors: ['#FFEB3B', '#FFEE58', '#AFB42B', '#C0CA33'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'angel': { name: '&#x5929;&#x4f7f;', colors: ['#FAFAFA', '#F5F5F5', '#80DEEA', '#FFEE58'] }, // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;
             'pirate': { name: '&#x6d77;&#x76dc;', colors: ['#3E2723', '#5D4037', '#CFD8DC', '#D32F2F'] }, // &#x5df2;&#x5be6;&#x73fe;
             'unicorn': { name: '&#x7368;&#x89d2;&#x7378;', colors: ['#FAFAFA', '#E1BEE7', '#AB47BC', '#FFD54F'] }, // &#x5df2;&#x5be6;&#x73fe;
             'iceflower': { name: '&#x51b0;&#x82b1;', colors: ['#E3F2FD', '#B3E5FC', '#03A9F4', '#0277BD'] }, // &#x5df2;&#x5be6;&#x73fe;
             'snowman': { name: '&#x96ea;&#x4eba;', colors: ['#ECEFF1', '#CFD8DC', '#546E7A', '#EF5350'] }, // &#x4fdd;&#x7559;
             'mummy': { name: '&#x6728;&#x4e43;&#x4f0a;', colors: ['#F5F5F5', '#E0E0E0', '#BDBDBD', '#757575'] }, // &#x4fdd;&#x7559;
             // &#x91cd;&#x65b0;&#x8a2d;&#x8a08;&#x7684;&#x982d;&#x50cf;
             'candy': { name: '&#x7cd6;&#x679c;', colors: ['#F06292', '#EC407A', '#81C784', '#4CAF50'] },
             'butterfly': { name: '&#x8774;&#x8776;', colors: ['#9C27B0', '#BA68C8', '#EC407A', '#7B1FA2'] },
             'lightning': { name: '&#x9583;&#x96fb;', colors: ['#FFEB3B', '#FDD835', '#FBC02D', '#F9A825'] },
             'crown': { name: '&#x7687;&#x51a0;', colors: ['#FFC107', '#FFD54F', '#F44336', '#B71C1C'] },
             'moon': { name: '&#x6708;&#x7403;', colors: ['#ECEFF1', '#CFD8DC', '#B0BEC5', '#546E7A'] }
         }
         
         // &#x5b9a;&#x7fa9;&#x982d;&#x50cf;&#x89e3;&#x9396;&#x6240;&#x9700;&#x7b49;&#x7d1a;
         window.avatarUnlockLevels = {
         'villager': 1,  // &#x9810;&#x8a2d;&#x89e3;&#x9396;&#x300c;&#x666e;&#x901a;&#x6751;&#x6c11;&#x300d;&#x982d;&#x50cf;
         'rabbit': 4,    // 4&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x5154;&#x5b50;&#x300d;&#x982d;&#x50cf;
         'panda': 7,     // 7&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x718a;&#x8c93;&#x300d;&#x982d;&#x50cf;
         'whale': 10,    // 10&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9be8;&#x9b5a;&#x300d;&#x982d;&#x50cf;
         'bread': 13,    // 13&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9eb5;&#x5305;&#x300d;&#x982d;&#x50cf;
         'chicken': 16,  // 16&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x96de;&#x300d;&#x982d;&#x50cf;
         'dragon': 19,   // 19&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x795e;&#x9f8d;&#x300d;&#x982d;&#x50cf;
         'bomb': 22,     // 22&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x70b8;&#x5f48;&#x300d;&#x982d;&#x50cf;
         'fox': 25,      // 25&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x72d0;&#x72f8;&#x300d;&#x982d;&#x50cf;
         'wizard': 28,   // 28&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9b54;&#x6cd5;&#x5e08;&#x300d;&#x982d;&#x50cf;
         'assassin': 31, // 31&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x523a;&#x5ba2;&#x300d;&#x982d;&#x50cf;
         'husky': 34,    // 34&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x54c8;&#x58eb;&#x5947;&#x300d;&#x982d;&#x50cf;
         'werewolf': 37, // 37&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x72fc;&#x4eba;&#x300d;&#x982d;&#x50cf;
         'cat': 40,      // 40&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x732b;&#x300d;&#x982d;&#x50cf;
         'orange': 43,   // 43&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x6a59;&#x5b50;&#x300d;&#x982d;&#x50cf;
         'mask': 46,     // 46&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9762;&#x5177;&#x300d;&#x982d;&#x50cf;
         'sparrow': 49,  // 49&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9ebb;&#x96c0;&#x300d;&#x982d;&#x50cf;
         'watermelon': 52, // 52&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x897f;&#x74dc;&#x300d;&#x982d;&#x50cf;
         'capybara': 55, // 55&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x5361;&#x76ae;&#x5df4;&#x62c9;&#x300d;&#x982d;&#x50cf;
         'sunflower': 58, // 58&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x5411;&#x65e5;&#x8475;&#x300d;&#x982d;&#x50cf;
         'lemon': 61,    // 61&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x6ab8;&#x6aac;&#x300d;&#x982d;&#x50cf;
         'angel': 64,    // 64&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x5929;&#x4f7f;&#x300d;&#x982d;&#x50cf;
         'pirate': 67,   // 67&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x6d77;&#x76dc;&#x300d;&#x982d;&#x50cf;
         'unicorn': 70,  // 70&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x7368;&#x89d2;&#x7378;&#x300d;&#x982d;&#x50cf;
         'iceflower': 73, // 73&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x51b0;&#x82b1;&#x300d;&#x982d;&#x50cf;
         'candy': 84,    // 84&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x7cd6;&#x679c;&#x300d;&#x982d;&#x50cf;
         'butterfly': 88, // 88&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x8774;&#x8776;&#x300d;&#x982d;&#x50cf;
         'lightning': 92, // 92&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x9583;&#x96fb;&#x300d;&#x982d;&#x50cf;
         'crown': 96,    // 96&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x7687;&#x51a0;&#x300d;&#x982d;&#x50cf;
         'moon': 100,     // 100&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x6708;&#x7403;&#x300d;&#x982d;&#x50cf;
         'snowman': 76,  // 76&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x96ea;&#x4eba;&#x300d;&#x982d;&#x50cf;
         'mummy': 80,    // 80&#x7d1a;&#x89e3;&#x9396;&#x300c;&#x6728;&#x4e43;&#x4f0a;&#x300d;&#x982d;&#x50cf;
         };
         
         document.addEventListener('DOMContentLoaded', function() {
             // &#x78ba;&#x4fdd;&#x79fb;&#x9664;&#x6df1;&#x8272;&#x6a21;&#x5f0f;&#x985e;
             document.documentElement.classList.remove('dark');
             
             // &#x6dfb;&#x52a0;&#x8996;&#x7a97;&#x5927;&#x5c0f;&#x8b8a;&#x5316;&#x76e3;&#x807d;
             window.addEventListener('resize', function() {
                 // &#x5982;&#x679c;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;&#x5df2;&#x6253;&#x958b;
                 if (passageContent &amp;&amp; !passageContent.classList.contains('hidden')) {
                     const passageList = document.getElementById('passage-list');
                     if (passageList) {
                         passageList.style.maxHeight = Math.max(60, window.innerHeight * 0.2) + 'px';
                     }
                     
                     // &#x5982;&#x679c;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x4e5f;&#x6253;&#x958b;
                     const paragraphSelector = document.getElementById('paragraph-selector');
                     const paragraphList = document.getElementById('paragraph-list');
                     if (paragraphSelector &amp;&amp; !paragraphSelector.classList.contains('hidden') &amp;&amp; paragraphList) {
                         // &#x8abf;&#x6574;&#x6bb5;&#x843d;&#x9078;&#x9805;&#x5bb9;&#x5668;&#x7684;&#x9ad8;&#x5ea6;
                         const paragraphOptions = paragraphList.querySelector('.paragraph-options');
                         if (paragraphOptions) {
                             // &#x6bcf;&#x6bb5;&#x7d04;70px&#x9ad8;&#xff0c;&#x6700;&#x5c11;200px&#xff0c;&#x6700;&#x591a;&#x8996;&#x53e3;&#x9ad8;&#x5ea6;&#x7684;50%
                             const paragraphCount = document.querySelectorAll('.paragraph-checkbox').length;
                             const calculatedHeight = Math.min(
                                 Math.max(200, paragraphCount * 70),
                                 window.innerHeight * 0.5
                             );
                             paragraphOptions.style.maxHeight = calculatedHeight + 'px';
                         }
                     }
                     
                     // &#x66f4;&#x65b0;&#x5bb9;&#x5668;&#x9ad8;&#x5ea6;
                     if (passageContainer) {
                         // &#x8a08;&#x7b97;&#x7576;&#x524d;&#x6240;&#x6709;&#x5167;&#x5bb9;&#x7684;&#x5be6;&#x969b;&#x9ad8;&#x5ea6;
                         const passageContentHeight = document.getElementById('passage-content').scrollHeight;
                         // &#x589e;&#x52a0;&#x984d;&#x5916;&#x7a7a;&#x9593;&#xff0c;&#x78ba;&#x4fdd;&#x5bb9;&#x5668;&#x9ad8;&#x5ea6;&#x5145;&#x8db3;
                         const totalHeight = Math.max(600, passageContentHeight + 50);
                         passageContainer.style.maxHeight = totalHeight + 'px';
                     }
                 }
             });
             console.log("DOM&#x52a0;&#x8f09;&#x5b8c;&#x6210;&#xff0c;&#x958b;&#x59cb;&#x521d;&#x59cb;&#x5316;...");
             
             // &#x96b1;&#x85cf;&#x4e3b;&#x754c;&#x9762;&#xff0c;&#x76f4;&#x5230;&#x7528;&#x6236;&#x9ede;&#x64ca;&#x300c;&#x958b;&#x59cb;&#x65c5;&#x7a0b;&#x300d;
             const mainContainer = document.querySelector('.container');
             const startScreen = document.getElementById('start-screen');
             const startJourneyBtn = document.getElementById('start-journey-btn');
             const settingsButton = document.getElementById('settings-button');
             
             // &#x521d;&#x59cb;&#x96b1;&#x85cf;&#x4e3b;&#x5167;&#x5bb9;&#x548c;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
             if (mainContainer) mainContainer.style.display = 'none';
             if (settingsButton) settingsButton.style.display = 'none';
             
             // &#x958b;&#x59cb;&#x65c5;&#x7a0b;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
             if (startJourneyBtn &amp;&amp; startScreen &amp;&amp; mainContainer) {
                 startJourneyBtn.addEventListener('click', function() {
                     // &#x5148;&#x7981;&#x7528;&#x6309;&#x9215;&#x9632;&#x6b62;&#x91cd;&#x8907;&#x9ede;&#x64ca;
                     startJourneyBtn.disabled = true;
                     
                     // 1. &#x8b93;&#x555f;&#x52d5;&#x754c;&#x9762;&#x6de1;&#x51fa;
                     startScreen.style.opacity = '0';
                     
                     // 2. &#x5728;&#x6de1;&#x51fa;&#x904e;&#x7a0b;&#x4e2d;&#xff08;&#x5927;&#x7d04;400ms&#x5f8c;&#xff09;&#x64ad;&#x653e;&#x58a8;&#x6c34;&#x64f4;&#x6563;&#x52d5;&#x756b;
                     setTimeout(() =&gt; {
                         // &#x5275;&#x5efa;&#x58a8;&#x6c34;&#x64f4;&#x6563;&#x52d5;&#x756b;
                         const loadingAnimation = document.createElement('div');
                         loadingAnimation.id = 'loading-container';
                         loadingAnimation.innerHTML = `&lt;div id="main-splash"&gt;&lt;/div&gt;`;
                         document.body.appendChild(loadingAnimation);
                         
                         // 3. &#x6de1;&#x51fa;&#x5b8c;&#x5168;&#x7d50;&#x675f;&#x540e;&#xff08;&#x5927;&#x7d04;800ms&#xff09;&#x96b1;&#x85cf;&#x555f;&#x52d5;&#x754c;&#x9762;&#x4e26;&#x986f;&#x793a;&#x4e3b;&#x754c;&#x9762;
                         setTimeout(() =&gt; {
                             // &#x96b1;&#x85cf;&#x555f;&#x52d5;&#x754c;&#x9762;
                             startScreen.style.display = 'none';
                             // &#x986f;&#x793a;&#x4e3b;&#x754c;&#x9762;
                             mainContainer.style.display = 'block';
                             
                             // &#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x5bb9;&#x5668;&#xff0c;&#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762;
                             const userProfileContainer = document.getElementById('user-profile-container');
                             const gamePage = document.getElementById('game-page');
                             if (userProfileContainer) {
                                 userProfileContainer.classList.remove('hidden');
                             }
                             
                             // 4. &#x6700;&#x5f8c;&#x986f;&#x793a;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                             setTimeout(() =&gt; {
                                 settingsButton.style.display = 'flex';
                                 
                                 // &#x58a8;&#x6c34;&#x52d5;&#x756b;&#x6de1;&#x51fa;&#x4e26;&#x79fb;&#x9664;
                                 loadingAnimation.classList.add('fade-out');
                                 setTimeout(() =&gt; {
                                     if (loadingAnimation.parentNode) {
                                         loadingAnimation.parentNode.removeChild(loadingAnimation);
                                     }
                                     // &#x91cd;&#x65b0;&#x555f;&#x7528;&#x6309;&#x9215;&#xff08;&#x96d6;&#x7136;&#x555f;&#x52d5;&#x754c;&#x9762;&#x5df2;&#x7d93;&#x96b1;&#x85cf;&#xff09;
                                     startJourneyBtn.disabled = false;
                                 }, 500);
                             }, 100); // &#x77ed;&#x66ab;&#x5ef6;&#x9072;&#x5f8c;&#x986f;&#x793a;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                         }, 400); // &#x7e3d;&#x5171;&#x7d04;800ms&#x7684;&#x6de1;&#x51fa;&#x6642;&#x9593;
                     }, 400); // &#x6de1;&#x51fa;&#x5230;&#x4e00;&#x534a;&#x6642;&#x958b;&#x59cb;&#x64ad;&#x653e;&#x58a8;&#x6c34;&#x64f4;&#x6563;&#x52d5;&#x756b;
                 });
             }
             
             // &#x65b0;&#x589e;&#x66ab;&#x505c;&#x529f;&#x80fd;&#x76f8;&#x95dc;&#x8b8a;&#x91cf;
             let isPaused = false;
             let resumeCountdown = null;
             
             // &#x6dfb;&#x52a0;&#x8ffd;&#x8e64;&#x7528;&#x6236;&#x662f;&#x5426;&#x4f7f;&#x7528;&#x904e;&#x66ab;&#x505c;&#x529f;&#x80fd;&#x7684;&#x8b8a;&#x91cf;
             let hasPaused = false;
             
             // &#x8a08;&#x6642;&#x5668;&#x76f8;&#x95dc;&#x8b8a;&#x91cf; - &#x4fee;&#x6539;&#x70ba;&#x652f;&#x6301;&#x66ab;&#x505c;/&#x7e7c;&#x7e8c;
             let startTime = null;
             let elapsedTimeBeforePause = 0; // &#x4fdd;&#x5b58;&#x66ab;&#x505c;&#x524d;&#x7684;&#x7d2f;&#x8a08;&#x6642;&#x9593;
             let timerInterval = null;
             const timerElement = document.getElementById('timer');
             
             // &#x6587;&#x8a00;&#x6587;&#x6578;&#x64da; - &#x60a8;&#x53ef;&#x4ee5;&#x5728;&#x6b64;&#x8655;&#x6dfb;&#x52a0;&#x66f4;&#x591a;&#x7bc7;&#x7ae0;
         
             const passages = {
                 '&#x56db;&#x584a;&#x7389;': {
                     title: '&#x300a;&#x56db;&#x584a;&#x7389;&#xff0e;&#x9592;&#x9069;&#x300b;',
                     author: '&#x95dc;&#x6f22;&#x537f;',
                     category: '&#x5176;&#x4ed6;', 
                     paragraphs: [
                         '&#x5357;&#x755d;&#x8015;&#xff0c;&#x6771;&#x5c71;&#x5367;&#x3002;&#x4e16;&#x614b;&#x4eba;&#x60c5;&#x7d93;&#x6b77;&#x591a;&#x3002;&#x9592;&#x5c07;&#x5f80;&#x4e8b;&#x601d;&#x91cf;&#x904e;&#xff0c;&#x8ce2;&#x7684;&#x662f;&#x4ed6;&#xff0c;&#x611a;&#x7684;&#x662f;&#x6211;&#xff0c;&#x722d;&#x751a;&#x9ebc;&#xff1f;'
                     ]
                 },
             };
             
             // &#x91cd;&#x65b0;&#x751f;&#x6210;&#x7bc7;&#x7ae0;&#x5217;&#x8868;
             generatePassageItems();
         
             // &#x81ea;&#x52d5;&#x751f;&#x6210;&#x5167;&#x5bb9;&#x548c;&#x521d;&#x59cb;&#x5316;
             initializePassages();
             
             // &#x5b9a;&#x4e49;&#x5168;&#x5c40;&#x53d8;&#x91cf;
             const startGameBtn = document.getElementById('start-game-btn');
             const gameStartScreen = document.getElementById('game-start-screen');
             const gameContent = document.getElementById('game-content');
             const gamePage = document.getElementById('game-page');
             
             // &#x5f53;&#x524d;&#x9009;&#x62e9;&#x7684;&#x7bc7;&#x7ae0;&#x952e;&#x503c;&#xff0c;&#x521d;&#x59cb;&#x8bbe;&#x5b9a;&#x4e3a;&#x4e00;&#x4e2a;&#x968f;&#x6a5f;&#x7bc7;&#x7ae0;
              /*let currentPassageKey = '';
             
             // &#x51fd;&#x6578;&#xff1a;&#x96a8;&#x6a5f;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x4e26;&#x52a0;&#x8f09;
             function loadRandomPassage() {
                 // &#x7372;&#x53d6;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x7684;&#x9375;&#x503c;
                 const passageKeys = Object.keys(passages);
                 if (passageKeys.length === 0) return;
                 
                 // &#x96a8;&#x6a5f;&#x9078;&#x64c7;&#x4e00;&#x500b;&#x7bc7;&#x7ae0;
                 const randomIndex = Math.floor(Math.random() * passageKeys.length);
                 const randomPassageKey = passageKeys[randomIndex];
                 currentPassageKey = randomPassageKey;
                 
                 // &#x7372;&#x53d6;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x7d22;&#x5f15;
                 const selectedPassage = passages[randomPassageKey];
                 const paragraphIndices = [];
                 for (let i = 0; i &lt; selectedPassage.paragraphs.length; i++) {
                     paragraphIndices.push(i);
                 }
                 
                 // &#x52a0;&#x8f09;&#x9078;&#x4e2d;&#x7684;&#x7bc7;&#x7ae0;&#xff08;&#x6240;&#x6709;&#x6bb5;&#x843d;&#xff09;
                 loadSelectedParagraphs(randomPassageKey, paragraphIndices);
             }*/
             
             // &#x521d;&#x59cb;&#x5316;&#x9ed8;&#x8a8d;&#x7bc7;&#x7ae0;&#x8cc7;&#x6599;&#x4f46;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;&#x7684;&#x51fd;&#x6578;
             function initializePassageData() {
                 // &#x50c5;&#x9810;&#x8f09;&#x96a8;&#x6a5f;&#x7bc7;&#x7ae0;&#x8cc7;&#x6599;&#xff0c;&#x4e0d;&#x81ea;&#x52d5;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;
                 if (Object.keys(passages).length &gt; 0) {
                     // &#x96a8;&#x6a5f;&#x9078;&#x64c7;&#x4e00;&#x500b;&#x7bc7;&#x7ae0;&#x4f46;&#x53ea;&#x8f09;&#x5165;&#x8cc7;&#x6599;&#xff0c;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;
                     const passageKeys = Object.keys(passages);
                     const randomIndex = Math.floor(Math.random() * passageKeys.length);
                     const randomPassageKey = passageKeys[randomIndex];
                     
                     // &#x521d;&#x59cb;&#x5316;&#x7576;&#x524d;&#x7bc7;&#x7ae0;&#x9375;&#x503c;
                     currentPassageKey = randomPassageKey;
                     
                     // &#x7372;&#x53d6;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x4f46;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;
                     const selectedPassage = passages[randomPassageKey];
                     const paragraphIndices = [];
                     for (let i = 0; i &lt; selectedPassage.paragraphs.length; i++) {
                         paragraphIndices.push(i);
                     }
                     
                     // &#x52a0;&#x8f09;&#x7bc7;&#x7ae0;&#x8cc7;&#x6599;&#xff0c;&#x4f46;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762; (&#x7b2c;&#x4e09;&#x500b;&#x53c3;&#x6578;&#x70ba;false&#x8868;&#x793a;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;)
                     loadSelectedParagraphs(randomPassageKey, paragraphIndices, false);
                 }
                 
                 // &#x78ba;&#x4fdd;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x5bb9;&#x5668;&#x986f;&#x793a;&#xff0c;&#x904a;&#x6232;&#x754c;&#x9762;&#x96b1;&#x85cf;
                 const userProfileContainer = document.getElementById('user-profile-container');
                 if (userProfileContainer) {
                     userProfileContainer.classList.remove('hidden');
                 }
                 
                 // &#x78ba;&#x4fdd;&#x904a;&#x6232;&#x9801;&#x9762;&#x96b1;&#x85cf;&#xff0c;&#x76f4;&#x5230;&#x7528;&#x6236;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;
                 if (gamePage) {
                     gamePage.classList.add('hidden');
                 }
             }
             
             // &#x9801;&#x9762;&#x52a0;&#x8f09;&#x5f8c;&#x521d;&#x59cb;&#x5316;&#x7bc7;&#x7ae0;&#x8cc7;&#x6599;&#xff0c;&#x4f46;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;
             setTimeout(() =&gt; {
                 // &#x521d;&#x59cb;&#x5316;&#x7bc7;&#x7ae0;&#x8cc7;&#x6599;&#x4f46;&#x4e0d;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;
                 initializePassageData();
                 
                 // &#x78ba;&#x4fdd;&#x986f;&#x793a;&#x958b;&#x59cb;&#x756b;&#x9762; (&#x904a;&#x6232;&#x5167;&#x5bb9;&#x4ecd;&#x7136;&#x96b1;&#x85cf;)
                 if (gameStartScreen &amp;&amp; gameContent) {
                     gameStartScreen.classList.remove('hidden');
                     gameContent.classList.add('hidden');
                 }
             }, 300);
             
             // &#x8ffd;&#x8e64;&#x932f;&#x8aa4;&#x6b21;&#x6578;
             let wrongAnswersCount = 0;
             
             // &#x521b;&#x5efa;&#x5012;&#x8ba1;&#x65f6;&#x5bb9;&#x5668;
             const countdownContainer = document.createElement('div');
             countdownContainer.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden';
             countdownContainer.id = 'countdown-container';
             document.body.appendChild(countdownContainer);
             
             const countdownNumber = document.createElement('div');
             countdownNumber.className = 'text-8xl md:text-9xl font-bold text-white countdown-number';
             countdownContainer.appendChild(countdownNumber);
             
             // &#x6dfb;&#x52a0;&#x5012;&#x8ba1;&#x65f6;&#x6837;&#x5f0f;
             const style = document.createElement('style');
             style.textContent = `
                 @keyframes countdown-pulse {
                     0% { transform: scale(0.8); opacity: 0; }
                     20% { transform: scale(1.2); opacity: 1; }
                     70% { transform: scale(0.9); opacity: 1; }
                     100% { transform: scale(1); opacity: 0.7; }
                 }
                 .countdown-number {
                     animation: countdown-pulse 1s ease-in-out;
                     text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 30px rgba(93, 92, 222, 0.6);
                 }
             `;
             document.head.appendChild(style);
             
             // &#x521d;&#x59cb;&#x5316;&#x66ab;&#x505c;&#x529f;&#x80fd;
             initializePauseSystem();
             
             // &#x81ea;&#x52d5;&#x751f;&#x6210;&#x7bc7;&#x7ae0;&#x5217;&#x8868;
             generatePassageItems();
             
             // &#x66f4;&#x65b0;&#x66ab;&#x505c;/&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;&#x72c0;&#x614b;
             function updateGameControlButtons(gameState) {
                 const pauseBtn = document.getElementById('pause-btn');
                 const returnHomeBtn = document.getElementById('return-home-btn-game');
                 
                 if (!pauseBtn || !returnHomeBtn) return;
                 
                 if (gameState === 'not-started' || gameState === 'completed' || gameState === 'failed') {
                     // &#x904a;&#x6232;&#x958b;&#x59cb;&#x524d;&#x3001;&#x5b8c;&#x6210;&#x5f8c;&#x6216;&#x5931;&#x6557;&#x5f8c;&#xff0c;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                     pauseBtn.classList.add('hidden');
                     returnHomeBtn.classList.remove('hidden');
                 } else if (gameState === 'playing') {
                     // &#x904a;&#x6232;&#x9032;&#x884c;&#x4e2d;&#xff0c;&#x986f;&#x793a;&#x66ab;&#x505c;&#x6309;&#x9215;
                     pauseBtn.classList.remove('hidden');
                     returnHomeBtn.classList.add('hidden');
                 }
             }
             
             // &#x70ba;&#x904a;&#x6232;&#x754c;&#x9762;&#x4e2d;&#x7684;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x6dfb;&#x52a0;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
             const returnHomeGameBtn = document.getElementById('return-home-btn-game');
             if (returnHomeGameBtn) {
                 returnHomeGameBtn.addEventListener('click', async function() {
                     console.log("&#x904a;&#x6232;&#x754c;&#x9762;&#x4e2d;&#x7684;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                     
                     try {
                         // &#x986f;&#x793a;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;
                         await showLoadingAnimation();
                         console.log("&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;&#x64ad;&#x653e;&#x5b8c;&#x6210;");
                         
                         // &#x57f7;&#x884c;&#x8207;&#x66ab;&#x505c;&#x83dc;&#x55ae;&#x4e2d;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x76f8;&#x540c;&#x7684;&#x64cd;&#x4f5c;
                         // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                         currentPosition = 0;
                         correctAnswers = 0;
                         lives = 3;
                         successfulChars = 0;
                         wrongAnswersCount = 0;
                         lastAnsweredChars = [];
                         
                         const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                         if (lastAnsweredCharsElem) {
                             lastAnsweredCharsElem.textContent = '';
                         }
                         
                         canSelect = true;
                         isPaused = false;
                         hasPaused = false;
                         updateLives();
                         
                         if (feedback) {
                             feedback.textContent = '';
                         }
                         
                         // &#x505c;&#x6b62;&#x8a08;&#x6642;&#x5668;
                         stopStopwatch();
                         elapsedTimeBeforePause = 0;
                         if (timerElement) {
                             timerElement.textContent = "00:00.0";
                         }
                         
                         // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                         const progressText = document.getElementById('progress-text');
                         const progressBar = document.getElementById('progress-bar');
                         
                         if (progressText) {
                             progressText.textContent = `0 / ${totalNonPunctChars}`;
                         }
                         
                         if (progressBar) {
                             progressBar.style.width = '0%';
                         }
                         
                         // &#x7372;&#x53d6;&#x9700;&#x8981;&#x64cd;&#x4f5c;&#x7684;&#x5143;&#x7d20;
                         const userProfileContainer = document.getElementById('user-profile-container');
                         const gamePage = document.getElementById('game-page');
                         
                         // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762;
                         gamePage.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important;';
                         gamePage.classList.add('hidden');
                         gamePage.classList.remove('block', 'flex', 'visible', 'opacity-100');
                         
                         // &#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x754c;&#x9762;
                         userProfileContainer.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                         userProfileContainer.classList.remove('hidden');
                         userProfileContainer.classList.add('block');
                         
                         // &#x78ba;&#x4fdd;&#x66f8;&#x672c;&#x9801;&#x9762;&#x56de;&#x5230;&#x521d;&#x59cb;&#x72c0;&#x614b;
                         const bookPage = document.querySelector('.page');
                         if (bookPage &amp;&amp; bookPage.classList.contains('turned')) {
                             bookPage.classList.remove('turned');
                         }
                         
                         // &#x6efe;&#x52d5;&#x5230;&#x9801;&#x9762;&#x9802;&#x90e8;
                         window.scrollTo({
                             top: 0,
                             behavior: 'smooth'
                         });
                         
                         // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x4e26;&#x6062;&#x5fa9;&#x539f;&#x59cb;&#x7684;&#x7db2;&#x683c;&#x4f48;&#x5c40;
                         if (optionsContainer) {
                             optionsContainer.innerHTML = '';
                             optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                         }
                         
                         // &#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                         window.enableSettingsButton();
                         
                         console.log("&#x5f9e;&#x904a;&#x6232;&#x754c;&#x9762;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6210;&#x529f;");
                     } catch (error) {
                         console.error("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x8655;&#x7406;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                         alert("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                         // &#x5373;&#x4f7f;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x4ecd;&#x5617;&#x8a66;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                         try {
                             window.enableSettingsButton();
                         } catch (e) {
                             console.error("&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", e);
                         }
                     }
                 });
             }
                 
             // &#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x53d8;&#x91cf;&#x5b9a;&#x4e49;
             window.multiplayerMode = {
                 active: false,
                 players: [
                     { currentPosition: 0, correctAnswers: 0, lastAnsweredChars: [], canSelect: true, errorTimer: null },
                     { currentPosition: 0, correctAnswers: 0, lastAnsweredChars: [], canSelect: true, errorTimer: null }
                 ],
                 winner: null,
                 gameStarted: false
             };
             
             // &#x6dfb;&#x52a0;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x5207;&#x6362;&#x529f;&#x80fd; - &#x4f7f;&#x7528;&#x6ed1;&#x584a;
             const gameModeSwitch = document.getElementById('game-mode-switch');
             
             if (gameModeSwitch) {
                 // &#x8bbe;&#x7f6e;&#x5355;&#x4eba;/&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x5207;&#x6362;
                 window.gameMode = 'single'; // &#x9ed8;&#x8ba4;&#x4e3a;&#x5355;&#x4eba;&#x6a21;&#x5f0f;
                 
                 gameModeSwitch.addEventListener('change', function() {
                     if (this.checked) {
                         // &#x5207;&#x6362;&#x5230;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;
                         window.gameMode = 'multi';
                         console.log("&#x5207;&#x63db;&#x5230;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;");
                     } else {
                         // &#x5207;&#x6362;&#x5230;&#x5355;&#x4eba;&#x6a21;&#x5f0f;
                         window.gameMode = 'single';
                         console.log("&#x5207;&#x63db;&#x5230;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;");
                     }
                 });
             }
             
             // &#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x786e;&#x8ba4;&#x5bf9;&#x8bdd;&#x6846;
             function showMultiplayerConfirm() {
                 // &#x521b;&#x5efa;&#x786e;&#x8ba4;&#x5bf9;&#x8bdd;&#x6846;
                 const confirmDialog = document.createElement('div');
                 confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[1000]';
                 confirmDialog.id = 'multiplayer-confirm-dialog';
                 
                 confirmDialog.innerHTML = `
                     &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full mx-4 text-center"&gt;
                         &lt;h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-4"&gt;&#x96d9;&#x4eba;&#x5c0d;&#x6230;&#x6a21;&#x5f0f;&lt;/h3&gt;
                         &lt;p class="text-gray-600 dark:text-gray-300 mb-5"&gt;&#x6e96;&#x5099;&#x958b;&#x59cb;&#x96d9;&#x4eba;&#x5c0d;&#x6230;&#xff01;&#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#xff08;&#x87a2;&#x5e55;&#x4e0a;&#x534a;&#x90e8;&#xff09;&#x548c;&#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#xff08;&#x87a2;&#x5e55;&#x4e0b;&#x534a;&#x90e8;&#xff09;&#x5c07;&#x540c;&#x6642;&#x6311;&#x6230;&#x3002;&lt;/p&gt;
                         &lt;div class="flex justify-center gap-6"&gt;
                             &lt;button id="start-multi-btn" class="px-5 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90"&gt;&#x958b;&#x59cb;&lt;/button&gt;
                             &lt;button id="cancel-multi-btn" class="px-5 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600"&gt;&#x8fd4;&#x56de;&lt;/button&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
                 `;
                 
                 document.body.appendChild(confirmDialog);
                 
                 // &#x6dfb;&#x52a0;&#x6309;&#x94ae;&#x4e8b;&#x4ef6;
                 document.getElementById('start-multi-btn').addEventListener('click', function() {
                     document.body.removeChild(confirmDialog);
                     startMultiplayerGame();
                 });
                 
                 document.getElementById('cancel-multi-btn').addEventListener('click', function() {
                     document.body.removeChild(confirmDialog);
                     // &#x5207;&#x6362;&#x56de;&#x5355;&#x4eba;&#x6a21;&#x5f0f;
                     if (singleModeBtn) singleModeBtn.click();
                 });
             }
             
             // &#x5f00;&#x59cb;&#x53cc;&#x4eba;&#x6e38;&#x620f;
             function startMultiplayerGame() {
                 window.multiplayerMode.active = true;
                 window.multiplayerMode.gameStarted = false;
                 window.multiplayerMode.winner = null;
                 
                 // &#x91cd;&#x7f6e;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x72b6;&#x6001;
                 window.multiplayerMode.players.forEach(player =&gt; {
                     player.currentPosition = 0;
                     player.correctAnswers = 0;
                     player.lastAnsweredChars = [];
                     player.canSelect = true;
                 });
                 
                 // &#x9690;&#x85cf;&#x5f00;&#x59cb;&#x5c4f;&#x5e55;&#xff0c;&#x663e;&#x793a;&#x6e38;&#x620f;&#x5185;&#x5bb9;
                 if (gameStartScreen) {
                     gameStartScreen.classList.add('hidden');
                 }
                 
                 if (gameContent) {
                     gameContent.classList.remove('hidden');
                 }
                 
                 // &#x663e;&#x793a;&#x53cc;&#x4eba;UI&#xff0c;&#x9690;&#x85cf;&#x5355;&#x4eba;UI
                 const singlePlayerUI = document.getElementById('single-player-ui');
                 const multiplayerUI = document.getElementById('multiplayer-ui');
                 
                 if (singlePlayerUI &amp;&amp; multiplayerUI) {
                     singlePlayerUI.classList.add('hidden');
                     multiplayerUI.classList.remove('hidden');
                     
                     // &#x5728;&#x9032;&#x5165;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x6642;&#x96b1;&#x85cf;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x5bb9;&#x5668;&#x3001;&#x300c;&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;&#x300d;&#x6a19;&#x984c;&#x7b49;&#x65bc;&#x904a;&#x6232;&#x904e;&#x7a0b;&#x7121;&#x95dc;&#x7684;&#x5143;&#x7d20;
                     const headerElement = document.querySelector('header');
                     if (headerElement) {
                         headerElement.style.display = 'none';
                     }
                     
                     const passageSelector = document.querySelector('.passage-selector');
                     if (passageSelector) {
                         passageSelector.style.display = 'none';
                     }
                     
                     // &#x9690;&#x85cf;&#x8bbe;&#x7f6e;&#x6309;&#x94ae;&#x548c;&#x7248;&#x672c;&#x53f7;
                     if (document.getElementById('settings-button')) {
                         document.getElementById('settings-button').style.display = 'none';
                     }
                     
                     // &#x9690;&#x85cf;&#x5e95;&#x90e8;&#x7248;&#x672c;&#x4fe1;&#x606f;
                     const versionInfo = document.querySelector('.text-center.py-3.text-gray-500');
                     if (versionInfo) {
                         versionInfo.style.display = 'none';
                     }
                     
                     // &#x96b1;&#x85cf;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x7684;&#x79d2;&#x9336;&#x3001;&#x751f;&#x547d;&#x503c;&#x3001;&#x7bc7;&#x7ae0;&#x540d;&#x7a31;&#x7b49;&#x5143;&#x7d20;
                     const stopwatch = document.getElementById('stopwatch');
                     if (stopwatch) {
                         stopwatch.style.display = 'none';
                     }
                     
                     const lives = document.getElementById('lives');
                     if (lives) {
                         lives.style.display = 'none';
                     }
                     
                     // &#x96b1;&#x85cf;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x7684;&#x9032;&#x5ea6;&#x689d;
                     const progressContainer = document.querySelector('.w-full.max-w-\\[200px\\]');
                     if (progressContainer) {
                         progressContainer.style.display = 'none';
                     }
                     
                     const passageInfo = document.querySelector('.passage-info');
                     if (passageInfo) {
                         passageInfo.style.display = 'none';
                     }
                     
                     const returnHomeBtn = document.getElementById('return-home-btn-game');
                     if (returnHomeBtn) {
                         returnHomeBtn.style.display = 'none';
                     }
                     
                     // &#x8a2d;&#x7f6e;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x7e3d;&#x5b57;&#x6578;
                     const totalCharsTop = document.getElementById('total-chars-top');
                     const totalCharsBottom = document.getElementById('total-chars-bottom');
                     
                     if (totalCharsTop) totalCharsTop.textContent = totalNonPunctChars;
                     if (totalCharsBottom) totalCharsBottom.textContent = totalNonPunctChars;
                     
                     // &#x91cd;&#x7f6e;&#x8a08;&#x6642;&#x5668;&#x8b8a;&#x91cf;&#x4f46;&#x4e0d;&#x7acb;&#x5373;&#x555f;&#x52d5;&#x8a08;&#x6642;&#x5668;
                     elapsedTimeBeforePauseTop = 0;
                     elapsedTimeBeforePauseBottom = 0;
                     multiplayerTimersStarted = false;
                     
                     // &#x6e05;&#x9664;&#x4e0a;&#x4e00;&#x5c40;&#x904a;&#x6232;&#x986f;&#x793a;&#x7684;&#x5b57;&#x7b26;
                     const lastAnsweredCharsTop = document.getElementById('last-answered-chars-top');
                     const lastAnsweredCharsBottom = document.getElementById('last-answered-chars-bottom');
                     const currentCharTop = document.getElementById('current-char-top');
                     const currentCharBottom = document.getElementById('current-char-bottom');
                     
                     if (lastAnsweredCharsTop) lastAnsweredCharsTop.innerHTML = '';
                     if (lastAnsweredCharsBottom) lastAnsweredCharsBottom.innerHTML = '';
                     if (currentCharTop) currentCharTop.textContent = '';
                     if (currentCharBottom) currentCharBottom.textContent = '';
                     
                     // &#x91cd;&#x7f6e;&#x9032;&#x5ea6;&#x986f;&#x793a;
                     const progressBarTop = document.getElementById('progress-bar-top');
                     const progressBarBottom = document.getElementById('progress-bar-bottom');
                     const progressTextTop = document.getElementById('progress-text-top');
                     const progressTextBottom = document.getElementById('progress-text-bottom');
                     
                     if (progressBarTop) progressBarTop.style.width = '0%';
                     if (progressBarBottom) progressBarBottom.style.width = '0%';
                     if (progressTextTop) progressTextTop.textContent = `0 / ${totalNonPunctChars}`;
                     if (progressTextBottom) progressTextBottom.textContent = `0 / ${totalNonPunctChars}`;
                 }
                 
                 // &#x6dfb;&#x52a0;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x66ab;&#x505c;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                 setupMultiplayerPauseButtons();
                 
                 // &#x5f00;&#x59cb;&#x6e38;&#x620f;&#x5012;&#x8ba1;&#x65f6;
                 const multiplayerCountdown = document.getElementById('multiplayer-countdown');
                 if (multiplayerCountdown) {
                     multiplayerCountdown.classList.remove('hidden');
                     
                     // &#x4f7f;&#x7528;&#x7eff;&#x70b9;&#x5012;&#x8ba1;&#x65f6;
                     let countdownDots = 3;
                     let countdownText = '';
                     
                     function updateCountdownDots() {
                         countdownText = '';
                         for (let i = 0; i &lt; countdownDots; i++) {
                             countdownText += '&#x25cf;';
                         }
                         multiplayerCountdown.querySelector('div').textContent = countdownText;
                         
                         if (countdownDots &gt; 0) {
                             countdownDots--;
                             setTimeout(updateCountdownDots, 1000);
                         } else {
                             // &#x5012;&#x8ba1;&#x65f6;&#x7ed3;&#x675f;&#xff0c;&#x5f00;&#x59cb;&#x6e38;&#x620f;
                             multiplayerCountdown.classList.add('hidden');
                             window.multiplayerMode.gameStarted = true;
                             
                             // &#x5728;&#x5012;&#x8a08;&#x6642;&#x7d50;&#x675f;&#x5f8c;&#x555f;&#x52d5;&#x8a08;&#x6642;&#x5668;
                             multiplayerTimersStarted = true;
                             startMultiplayerTimers();
                             
                             // &#x4e3a;&#x4e24;&#x4f4d;&#x73a9;&#x5bb6;&#x751f;&#x6210;&#x9009;&#x9879;
                             updateMultiplayerDisplay();
                         }
                     }
                     
                     updateCountdownDots();
                 }
             }
             
             // &#x8a2d;&#x7f6e;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x7684;&#x66ab;&#x505c;&#x6309;&#x9215;&#x529f;&#x80fd;
             function setupMultiplayerPauseButtons() {
                 const pauseBtnTop = document.getElementById('pause-btn-top');
                 const pauseBtnBottom = document.getElementById('pause-btn-bottom');
                 const multiplayerPauseOverlay = document.getElementById('multiplayer-pause-overlay');
                 const multiplayerContinueBtn = document.getElementById('multiplayer-continue-btn');
                 const multiplayerReturnBtn = document.getElementById('multiplayer-return-btn');
                 const multiplayerCountdownResume = document.getElementById('multiplayer-countdown-resume');
                 
                 // &#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x66ab;&#x505c;&#x72c0;&#x614b;
                 let isMultiplayerPaused = false;
                 let multiplayerResumeCountdown = null;
                 
                 // &#x66ab;&#x505c;&#x51fd;&#x6578;
                 function pauseMultiplayerGame() {
                     if (isMultiplayerPaused) return;
                     
                     isMultiplayerPaused = true;
                     
                     // &#x66ab;&#x505c;&#x5169;&#x4f4d;&#x73a9;&#x5bb6;&#x7684;&#x8a08;&#x6642;&#x5668;
                     stopMultiplayerTimers();
                     
                     // &#x7981;&#x6b62;&#x9078;&#x64c7;&#x9078;&#x9805;
                     window.multiplayerMode.players.forEach(player =&gt; {
                         player.canSelect = false;
                     });
                     
                     // &#x986f;&#x793a;&#x66ab;&#x505c;&#x8986;&#x84cb;&#x5c64;
                     if (multiplayerPauseOverlay) {
                         multiplayerPauseOverlay.classList.remove('hidden');
                     }
                 }
                 
                 // &#x7e7c;&#x7e8c;&#x904a;&#x6232;&#x51fd;&#x6578;
                 function resumeMultiplayerGame() {
                     if (!isMultiplayerPaused) return;
                     
                     isMultiplayerPaused = false;
                     
                     // &#x96b1;&#x85cf;&#x66ab;&#x505c;&#x8986;&#x84cb;&#x5c64;
                     if (multiplayerPauseOverlay) {
                         multiplayerPauseOverlay.classList.add('hidden');
                     }
                     
                     // &#x78ba;&#x4fdd;&#x8a08;&#x6642;&#x5668;&#x6a19;&#x8a18;&#x70ba;&#x5df2;&#x555f;&#x52d5;
                     multiplayerTimersStarted = true;
                     
                     // &#x6062;&#x5fa9;&#x8a08;&#x6642;&#x5668;
                     startMultiplayerTimers();
                     
                     // &#x5141;&#x8a31;&#x9078;&#x64c7;&#x9078;&#x9805;
                     window.multiplayerMode.players.forEach(player =&gt; {
                         player.canSelect = true;
                     });
                 }
                 
                 // &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x66ab;&#x505c;&#x6309;&#x9215;
                 if (pauseBtnTop) {
                     pauseBtnTop.addEventListener('click', function() {
                         if (!window.multiplayerMode.gameStarted || window.multiplayerMode.winner !== null) return;
                         pauseMultiplayerGame();
                     });
                 }
                 
                 // &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x66ab;&#x505c;&#x6309;&#x9215;
                 if (pauseBtnBottom) {
                     pauseBtnBottom.addEventListener('click', function() {
                         if (!window.multiplayerMode.gameStarted || window.multiplayerMode.winner !== null) return;
                         pauseMultiplayerGame();
                     });
                 }
                 
                 // &#x7e7c;&#x7e8c;&#x904a;&#x6232;&#x6309;&#x9215;
                 if (multiplayerContinueBtn) {
                     multiplayerContinueBtn.addEventListener('click', function() {
                         // &#x96b1;&#x85cf;&#x6309;&#x9215;&#xff0c;&#x986f;&#x793a;&#x5012;&#x8a08;&#x6642;
                         const pauseButtons = document.getElementById('multiplayer-pause-buttons');
                         if (pauseButtons) {
                             pauseButtons.classList.add('hidden');
                         }
                         
                         if (multiplayerCountdownResume) {
                             multiplayerCountdownResume.classList.remove('hidden');
                         }
                         
                         let count = 3;
                         const countdownNumber = multiplayerCountdownResume.querySelector('.pause-countdown-number');
                         if (countdownNumber) {
                             countdownNumber.textContent = count;
                         }
                         
                         // &#x6e05;&#x9664;&#x53ef;&#x80fd;&#x5b58;&#x5728;&#x7684;&#x5012;&#x8a08;&#x6642;
                         if (multiplayerResumeCountdown) {
                             clearInterval(multiplayerResumeCountdown);
                         }
                         
                         // &#x958b;&#x59cb;&#x65b0;&#x7684;&#x5012;&#x8a08;&#x6642;
                         multiplayerResumeCountdown = setInterval(function() {
                             count--;
                             if (countdownNumber) {
                                 countdownNumber.textContent = count;
                                 countdownNumber.style.animation = 'none';
                                 void countdownNumber.offsetWidth; // &#x91cd;&#x7f6e;&#x52d5;&#x756b;
                                 countdownNumber.style.animation = 'countdownPulse 1s ease-out';
                             }
                             
                             if (count &lt;= 0) {
                                 clearInterval(multiplayerResumeCountdown);
                                 multiplayerResumeCountdown = null;
                                 
                                 // &#x6062;&#x5fa9;&#x904a;&#x6232;
                                 resumeMultiplayerGame();
                                 
                                 // &#x91cd;&#x7f6e;&#x754c;&#x9762;
                                 if (pauseButtons) {
                                     pauseButtons.classList.remove('hidden');
                                 }
                                 if (multiplayerCountdownResume) {
                                     multiplayerCountdownResume.classList.add('hidden');
                                 }
                             }
                         }, 1000);
                     });
                 }
                 
                 // &#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215; - &#x4fee;&#x6539;&#x70ba;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x904a;&#x6232;&#x958b;&#x59cb;&#x754c;&#x9762;
                 if (multiplayerReturnBtn) {
                     multiplayerReturnBtn.addEventListener('click', function() {
                         // &#x96b1;&#x85cf;&#x66ab;&#x505c;&#x8986;&#x84cb;&#x5c64;
                         if (multiplayerPauseOverlay) {
                             multiplayerPauseOverlay.classList.add('hidden');
                         }
                         
                         // &#x6e05;&#x9664;&#x5012;&#x8a08;&#x6642;
                         if (multiplayerResumeCountdown) {
                             clearInterval(multiplayerResumeCountdown);
                             multiplayerResumeCountdown = null;
                         }
                         
                         // &#x91cd;&#x7f6e;&#x754c;&#x9762;
                         const pauseButtons = document.getElementById('multiplayer-pause-buttons');
                         if (pauseButtons) {
                             pauseButtons.classList.remove('hidden');
                         }
                         if (multiplayerCountdownResume) {
                             multiplayerCountdownResume.classList.add('hidden');
                         }
                         
                         // &#x91cd;&#x7f6e;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x72c0;&#x614b;
                         window.multiplayerMode.active = false;
                         isMultiplayerPaused = false;
                         
                         // &#x505c;&#x6b62;&#x8a08;&#x6642;&#x5668;
                         stopMultiplayerTimers();
                         
                         // &#x91cd;&#x8981;&#xff1a;&#x5b8c;&#x5168;&#x91cd;&#x7f6e;&#x8a08;&#x6642;&#x5668;&#x76f8;&#x95dc;&#x8b8a;&#x91cf;
                         timerTopInterval = null;
                         timerBottomInterval = null;
                         startTimeTop = null;
                         startTimeBottom = null;
                         elapsedTimeBeforePauseTop = 0;
                         elapsedTimeBeforePauseBottom = 0;
                         
                         // &#x91cd;&#x65b0;&#x986f;&#x793a;&#x4e4b;&#x524d;&#x96b1;&#x85cf;&#x7684;&#x5143;&#x7d20;
                         const headerElement = document.querySelector('header');
                         if (headerElement) {
                             headerElement.style.display = 'block';
                         }
                         
                         const passageSelector = document.querySelector('.passage-selector');
                         if (passageSelector) {
                             passageSelector.style.display = 'block';
                         }
                         
                         // &#x6062;&#x5fa9;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x548c;&#x7248;&#x672c;&#x865f;
                         if (document.getElementById('settings-button')) {
                             document.getElementById('settings-button').style.display = 'flex';
                         }
                         
                         // &#x6062;&#x5fa9;&#x5e95;&#x90e8;&#x7248;&#x672c;&#x4fe1;&#x606f;
                         const versionInfo = document.querySelector('.text-center.py-3.text-gray-500');
                         if (versionInfo) {
                             versionInfo.style.display = 'block';
                         }
                         
                         // &#x6062;&#x5fa9;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;UI&#x5143;&#x7d20;
                         const stopwatch = document.getElementById('stopwatch');
                         if (stopwatch) {
                             stopwatch.style.display = 'block';
                         }
                         
                         const lives = document.getElementById('lives');
                         if (lives) {
                             lives.style.display = 'block';
                         }
                         
                     // &#x6062;&#x5fa9;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x9032;&#x5ea6;&#x689d;
                     const progressContainer = document.querySelector('.w-full.max-w-\\[200px\\]');
                     if (progressContainer) {
                         progressContainer.style.display = 'block';
                     }

                         const passageInfo = document.querySelector('.passage-info');
                         if (passageInfo) {
                             passageInfo.style.display = 'block';
                         }
                         
                         // &#x78ba;&#x4fdd;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;
                         const returnHomeBtn = document.getElementById('return-home-btn-game');
                         if (returnHomeBtn) {
                             returnHomeBtn.classList.remove('hidden');
                             returnHomeBtn.style.display = 'flex';
                         }
                         
                         // &#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x904a;&#x6232;&#x958b;&#x59cb;&#x754c;&#x9762;, &#x4e0d;&#x89f8;&#x767c;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                         const gameStartScreen = document.getElementById('game-start-screen');
                         const gameContent = document.getElementById('game-content');
                         const gamePage = document.getElementById('game-page');
                         
                         if (gameStartScreen &amp;&amp; gameContent &amp;&amp; gamePage) {
                             // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x5167;&#x5bb9;&#xff0c;&#x986f;&#x793a;&#x958b;&#x59cb;&#x756b;&#x9762;
                             gameContent.classList.add('hidden');
                             gameStartScreen.classList.remove('hidden');
                             
                             // &#x986f;&#x793a;&#x904a;&#x6232;&#x9801;&#x9762;
                             gamePage.classList.remove('hidden');
                             gamePage.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                             
                             // &#x78ba;&#x4fdd;&#x66f8;&#x672c;&#x9801;&#x9762;&#x7ffb;&#x8f49;&#x6548;&#x679c;&#x751f;&#x6548;
                             const bookPage = document.querySelector('.page');
                             if (bookPage) {
                                 bookPage.classList.add('turned');
                             }
                             
                             // &#x5207;&#x63db;&#x56de;&#x55ae;&#x4eba;&#x6a21;&#x5f0f; - &#x4f7f;&#x7528;gameModeSwitch
                             if (gameModeSwitch &amp;&amp; gameModeSwitch.checked) {
                                 gameModeSwitch.checked = false;
                                 window.gameMode = 'single';
                                 console.log("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#xff1a;&#x5df2;&#x5207;&#x63db;&#x5230;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;");
                             }
                         }
                     });
                 }
                 
                 // &#x9375;&#x76e4;&#x4e8b;&#x4ef6; - ESC &#x9375;&#x66ab;&#x505c;/&#x7e7c;&#x7e8c;
                 document.addEventListener('keydown', function(e) {
                     if (e.key === 'Escape' &amp;&amp; window.multiplayerMode.active &amp;&amp; window.multiplayerMode.gameStarted) {
                         if (isMultiplayerPaused) {
                             // &#x5982;&#x679c;&#x5df2;&#x66ab;&#x505c;&#xff0c;&#x6309;ESC&#x5c07;&#x89f8;&#x767c;&#x7e7c;&#x7e8c;&#x6309;&#x9215;
                             if (multiplayerContinueBtn) {
                                 multiplayerContinueBtn.click();
                             }
                         } else {
                             // &#x5982;&#x679c;&#x672a;&#x66ab;&#x505c;&#xff0c;&#x6309;ESC&#x5c07;&#x66ab;&#x505c;&#x904a;&#x6232;
                             pauseMultiplayerGame();
                         }
                     }
                 });
             }
             
             // &#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x8a08;&#x6642;&#x5668;&#x76f8;&#x95dc;&#x8b8a;&#x91cf;
             let timerTopInterval = null;
             let timerBottomInterval = null;
             let startTimeTop = null;
             let startTimeBottom = null;
             let elapsedTimeBeforePauseTop = 0;
             let elapsedTimeBeforePauseBottom = 0;
             let multiplayerTimersStarted = false; // &#x6a19;&#x8a18;&#x8a08;&#x6642;&#x5668;&#x662f;&#x5426;&#x5df2;&#x7d93;&#x958b;&#x59cb;
             
             // &#x958b;&#x59cb;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x8a08;&#x6642;&#x5668;
             function startMultiplayerTimers() {
                 // &#x5982;&#x679c;&#x8a08;&#x6642;&#x5668;&#x5c1a;&#x672a;&#x958b;&#x59cb;&#x6216;&#x5df2;&#x88ab;&#x66ab;&#x505c;&#xff0c;&#x5247;&#x555f;&#x52d5;&#x8a08;&#x6642;&#x5668;
                 if (!multiplayerTimersStarted) {
                     console.log("&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x8a08;&#x6642;&#x5668;&#x5c1a;&#x672a;&#x555f;&#x52d5;&#xff0c;&#x7b49;&#x5f85;&#x5012;&#x8a08;&#x6642;&#x7d50;&#x675f;");
                     return;
                 }
                 
                 const timerTopElement = document.getElementById('timer-top');
                 const timerBottomElement = document.getElementById('timer-bottom');
                 
                 // &#x8a2d;&#x7f6e;&#x958b;&#x59cb;&#x6642;&#x9593; - &#x8003;&#x616e;&#x5148;&#x524d;&#x7d2f;&#x7a4d;&#x7684;&#x6642;&#x9593;
                 startTimeTop = new Date();
                 startTimeBottom = new Date();
                 
                 console.log("&#x958b;&#x59cb;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x8a08;&#x6642;&#x5668;");
                 
                 // &#x555f;&#x52d5;&#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x8a08;&#x6642;&#x5668;
                 timerTopInterval = setInterval(function() {
                     if (!timerTopElement) return;
                     
                     const currentTime = new Date();
                     const totalElapsedMs = elapsedTimeBeforePauseTop + (currentTime - startTimeTop);
                     
                     // &#x8f49;&#x63db;&#x70ba;&#x6642;&#x9593;&#x683c;&#x5f0f;
                     const totalElapsedDate = new Date(totalElapsedMs);
                     const minutes = String(totalElapsedDate.getUTCMinutes()).padStart(2, '0');
                     const seconds = String(totalElapsedDate.getUTCSeconds()).padStart(2, '0');
                     const tenths = Math.floor(totalElapsedDate.getUTCMilliseconds() / 100);
                     
                     timerTopElement.textContent = `${minutes}:${seconds}.${tenths}`;
                 }, 100);
                 
                 // &#x555f;&#x52d5;&#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x8a08;&#x6642;&#x5668;
                 timerBottomInterval = setInterval(function() {
                     if (!timerBottomElement) return;
                     
                     const currentTime = new Date();
                     const totalElapsedMs = elapsedTimeBeforePauseBottom + (currentTime - startTimeBottom);
                     
                     // &#x8f49;&#x63db;&#x70ba;&#x6642;&#x9593;&#x683c;&#x5f0f;
                     const totalElapsedDate = new Date(totalElapsedMs);
                     const minutes = String(totalElapsedDate.getUTCMinutes()).padStart(2, '0');
                     const seconds = String(totalElapsedDate.getUTCSeconds()).padStart(2, '0');
                     const tenths = Math.floor(totalElapsedDate.getUTCMilliseconds() / 100);
                     
                     timerBottomElement.textContent = `${minutes}:${seconds}.${tenths}`;
                 }, 100);
             }
             
             // &#x505c;&#x6b62;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x8a08;&#x6642;&#x5668;
             function stopMultiplayerTimers() {
                 // &#x505c;&#x6b62;&#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x8a08;&#x6642;&#x5668;&#x4e26;&#x4fdd;&#x5b58;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 if (timerTopInterval) {
                     clearInterval(timerTopInterval);
                     timerTopInterval = null;
                     
                     if (startTimeTop) {
                         const currentTime = new Date();
                         elapsedTimeBeforePauseTop += (currentTime - startTimeTop);
                         startTimeTop = null;
                     }
                 }
                 
                 // &#x505c;&#x6b62;&#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x8a08;&#x6642;&#x5668;&#x4e26;&#x4fdd;&#x5b58;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 if (timerBottomInterval) {
                     clearInterval(timerBottomInterval);
                     timerBottomInterval = null;
                     
                     if (startTimeBottom) {
                         const currentTime = new Date();
                         elapsedTimeBeforePauseBottom += (currentTime - startTimeBottom);
                         startTimeBottom = null;
                     }
                 }
                 
                 // &#x6a19;&#x8a18;&#x8a08;&#x6642;&#x5668;&#x672a;&#x555f;&#x52d5;
                 multiplayerTimersStarted = false;
             }
             
             // &#x66f4;&#x65b0;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x663e;&#x793a;
             function updateMultiplayerDisplay() {
                 // &#x66f4;&#x65b0;&#x4e0a;&#x65b9;&#x73a9;&#x5bb6;
                 updatePlayerDisplay(0);
                 // &#x66f4;&#x65b0;&#x4e0b;&#x65b9;&#x73a9;&#x5bb6;
                 updatePlayerDisplay(1);
                 
                 // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                 updateMultiplayerProgress();
                 
                 // &#x96b1;&#x85cf;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x9032;&#x5ea6;&#x689d;
                 const singleProgressContainer = document.querySelector('.w-full.max-w-\\[200px\\]');
                 if (singleProgressContainer) {
                     singleProgressContainer.style.display = 'none';
                 }
             }
             
             // &#x66f4;&#x65b0;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x9032;&#x5ea6;&#x689d;
             function updateMultiplayerProgress() {
                 // &#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&#x9032;&#x5ea6;
                 const player1 = window.multiplayerMode.players[0];
                 const player1Progress = player1.correctAnswers;
                 const totalCharsTop = document.getElementById('total-chars-top');
                 const progressTextTop = document.getElementById('progress-text-top');
                 const progressBarTop = document.getElementById('progress-bar-top');
                 
                 // &#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&#x9032;&#x5ea6;
                 const player2 = window.multiplayerMode.players[1];
                 const player2Progress = player2.correctAnswers;
                 const totalCharsBottom = document.getElementById('total-chars-bottom');
                 const progressTextBottom = document.getElementById('progress-text-bottom');
                 const progressBarBottom = document.getElementById('progress-bar-bottom');
                 
                 // &#x66f4;&#x65b0;&#x986f;&#x793a;
                 if (totalCharsTop) totalCharsTop.textContent = totalNonPunctChars;
                 if (progressTextTop) progressTextTop.textContent = `${player1Progress} / ${totalNonPunctChars}`;
                 if (progressBarTop) {
                     const progressPercentage = (totalNonPunctChars &gt; 0) ? (player1Progress / totalNonPunctChars * 100) : 0;
                     progressBarTop.style.width = `${progressPercentage}%`;
                 }
                 
                 if (totalCharsBottom) totalCharsBottom.textContent = totalNonPunctChars;
                 if (progressTextBottom) progressTextBottom.textContent = `${player2Progress} / ${totalNonPunctChars}`;
                 if (progressBarBottom) {
                     const progressPercentage = (totalNonPunctChars &gt; 0) ? (player2Progress / totalNonPunctChars * 100) : 0;
                     progressBarBottom.style.width = `${progressPercentage}%`;
                 }
             }
             
             // &#x66f4;&#x65b0;&#x5355;&#x4e2a;&#x73a9;&#x5bb6;&#x663e;&#x793a;
             function updatePlayerDisplay(playerIndex) {
                 const player = window.multiplayerMode.players[playerIndex];
                 const position = player.currentPosition;
                 const isTop = playerIndex === 0;
                 const prefix = isTop ? 'top' : 'bottom';
                 
                 const currentCharElement = document.getElementById(`current-char-${prefix}`);
                 const optionsContainer = document.getElementById(`options-container-${prefix}`);
                 const lastAnsweredCharsElement = document.getElementById(`last-answered-chars-${prefix}`);
                 
                 if (!currentCharElement || !optionsContainer) return;
                 
                 // &#x8df3;&#x8fc7;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                 while (position &lt; content.length &amp;&amp; isPunctuation(content[position])) {
                     player.currentPosition++;
                 }
                 
                 // &#x66f4;&#x65b0;&#x5f53;&#x524d;&#x5b57;&#x7b26;&#x663e;&#x793a;
                 if (player.currentPosition &lt; content.length) {
                     currentCharElement.textContent = '';
                     
                     // &#x751f;&#x6210;&#x9009;&#x9879;
                     generateMultiplayerOptions(playerIndex);
                     
                     // &#x66f4;&#x65b0;&#x5df2;&#x56de;&#x7b54;&#x5b57;&#x7b26;
                     if (lastAnsweredCharsElement &amp;&amp; player.lastAnsweredChars.length &gt; 0) {
                         let htmlContent = '';
                         
                         // &#x627e;&#x51fa;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x975e;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x5b57;&#x7b26;&#x7684;&#x7d22;&#x5f15;
                         let lastNonPunctIndex = -1;
                         for (let i = player.lastAnsweredChars.length - 1; i &gt;= 0; i--) {
                             if (!isPunctuation(player.lastAnsweredChars[i])) {
                                 lastNonPunctIndex = i;
                                 break;
                             }
                         }
                         
                         // &#x6784;&#x5efa;HTML&#x5185;&#x5bb9;
                         for (let i = 0; i &lt; player.lastAnsweredChars.length; i++) {
                             // &#x5982;&#x679c;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x975e;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x5b57;&#x7b26;&#xff0c;&#x52a0;&#x7c97;&#x653e;&#x5927;
                             if (i === lastNonPunctIndex) {
                                 htmlContent += `&lt;span class="text-2xl md:text-3xl font-bold"&gt;${player.lastAnsweredChars[i]}&lt;/span&gt;`;
                             } else {
                                 htmlContent += player.lastAnsweredChars[i];
                             }
                         }
                         
                         lastAnsweredCharsElement.innerHTML = htmlContent;
                     }
                 } else {
                     // &#x73a9;&#x5bb6;&#x5df2;&#x5b8c;&#x6210;&#x6e38;&#x620f;
                     handleMultiplayerGameEnd(playerIndex);
                 }
             }
             
             // &#x4e3a;&#x73a9;&#x5bb6;&#x751f;&#x6210;&#x9009;&#x9879;
             function generateMultiplayerOptions(playerIndex) {
                 const player = window.multiplayerMode.players[playerIndex];
                 const pos = player.currentPosition;
                 const isTop = playerIndex === 0;
                 const prefix = isTop ? 'top' : 'bottom';
                 
                 const optionsContainer = document.getElementById(`options-container-${prefix}`);
                 if (!optionsContainer || pos &gt;= content.length) return;
                 
                 // &#x6e05;&#x7a7a;&#x9009;&#x9879;&#x5bb9;&#x5668;
                 optionsContainer.innerHTML = '';
                 
                 // &#x83b7;&#x53d6;&#x6b63;&#x786e;&#x7b54;&#x6848;
                 const correctAnswer = content[pos];
                 
                 // &#x751f;&#x6210;&#x4e24;&#x4e2a;&#x5e72;&#x6270;&#x9009;&#x9879;
                 let options = [correctAnswer];
                 
                 while (options.length &lt; 3) {
                     const randomIndex = Math.floor(Math.random() * content.length);
                     const randomChar = content[randomIndex];
                     
                     // &#x786e;&#x4fdd;&#x4e0d;&#x91cd;&#x590d;&#x4e14;&#x4e0d;&#x662f;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                     if (!options.includes(randomChar) &amp;&amp; 
                         !isPunctuation(randomChar) &amp;&amp; 
                         randomChar !== correctAnswer) {
                         options.push(randomChar);
                     }
                 }
                 
                 // &#x6253;&#x4e71;&#x9009;&#x9879;&#x987a;&#x5e8f;
                 options = shuffleArray(options);
                 
                 // &#x521b;&#x5efa;&#x9009;&#x9879;&#x6309;&#x94ae;
                 options.forEach(option =&gt; {
                     const btn = document.createElement('button');
                     btn.className = 'option-btn h-16 md:h-20 text-2xl md:text-3xl bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none';
                     btn.textContent = option;
                     
                     btn.addEventListener('click', function() {
                         const playerObj = window.multiplayerMode.players[playerIndex];
                         if (!playerObj.canSelect || !window.multiplayerMode.gameStarted) return;
                         
                         if (option === correctAnswer) {
                             handleMultiplayerCorrectAnswer(playerIndex, btn);
                         } else {
                             handleMultiplayerIncorrectAnswer(playerIndex, btn);
                         }
                     });
                     
                     optionsContainer.appendChild(btn);
                 });
             }
             
             // &#x5904;&#x7406;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x6b63;&#x786e;&#x7b54;&#x6848;
             function handleMultiplayerCorrectAnswer(playerIndex, btn) {
                 const player = window.multiplayerMode.players[playerIndex];
                 player.correctAnswers++;
                 
                 // &#x6dfb;&#x52a0;&#x52a8;&#x753b;&#x6548;&#x679c;
                 btn.classList.add('correct');
                 
                 // &#x6dfb;&#x52a0;&#x5f53;&#x524d;&#x5b57;&#x7b26;&#x5230;&#x5df2;&#x56de;&#x7b54;&#x5b57;&#x7b26;&#x5217;&#x8868;
                 player.lastAnsweredChars.push(content[player.currentPosition]);
                 
                 // &#x4fdd;&#x5b58;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;&#x5e76;&#x524d;&#x8fdb;
                 const savedPosition = player.currentPosition;
                 player.currentPosition++;
                 
                 // &#x68c0;&#x67e5;&#x5e76;&#x6dfb;&#x52a0;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                 while (player.currentPosition &lt; content.length &amp;&amp; isPunctuation(content[player.currentPosition])) {
                     player.lastAnsweredChars.push(content[player.currentPosition]);
                     player.currentPosition++;
                 }
                 
                 // &#x5982;&#x679c;&#x8d85;&#x51fa;&#x6700;&#x5927;&#x663e;&#x793a;&#x5b57;&#x7b26;&#x9650;&#x5236;&#xff0c;&#x79fb;&#x9664;&#x6700;&#x65e9;&#x7684;&#x5b57;&#x7b26;
                 const MAX_DISPLAYED_CHARS = 15;
                 while (player.lastAnsweredChars.length &gt; MAX_DISPLAYED_CHARS) {
                     player.lastAnsweredChars.shift();
                 }
                 
                 // &#x5373;&#x6642;&#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                 updateMultiplayerProgress();
                 
                 //&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x7bc0;&#x594f;&#x5feb;&#x901f;
                 setTimeout(() =&gt; {
                     updatePlayerDisplay(playerIndex);
                 }, 10); 
             }
             
             // &#x5904;&#x7406;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x9519;&#x8bef;&#x7b54;&#x6848;
             function handleMultiplayerIncorrectAnswer(playerIndex, btn) {
                 const player = window.multiplayerMode.players[playerIndex];
                 const isTop = playerIndex === 0;
                 const prefix = isTop ? 'top' : 'bottom';
                 
                 // &#x6dfb;&#x52a0;&#x9519;&#x8bef;&#x6548;&#x679c;
                 btn.classList.add('incorrect');
                 
                 // &#x7981;&#x7528;&#x9009;&#x62e9;3&#x79d2;
                 player.canSelect = false;
                 
                 // &#x663e;&#x793a;&#x9519;&#x8bef;&#x8986;&#x76d6;&#x5c42;&#x548c;&#x7ea2;&#x70b9;&#x8ba1;&#x65f6;&#x5668;
                 const errorOverlay = document.getElementById(`${prefix}-player-error-overlay`);
                 const errorTimer = document.getElementById(`${prefix}-error-timer`);
                 
                 if (errorOverlay &amp;&amp; errorTimer) {
                     // &#x663e;&#x793a;&#x8986;&#x76d6;&#x5c42;
                     errorOverlay.classList.remove('hidden');
                     errorOverlay.style.display = 'flex';
                     
                     // &#x7ea2;&#x70b9;&#x8ba1;&#x65f6;
                     let dots = 3;
                     errorTimer.textContent = '&#x25cf;&#x25cf;&#x25cf;';
                     
                     // &#x6e05;&#x9664;&#x4e4b;&#x524d;&#x7684;&#x8ba1;&#x65f6;&#x5668;
                     if (player.errorTimer) {
                         clearInterval(player.errorTimer);
                     }
                     
                     // &#x8bbe;&#x7f6e;&#x65b0;&#x8ba1;&#x65f6;&#x5668;
                     player.errorTimer = setInterval(() =&gt; {
                         dots--;
                         let dotText = '';
                         for (let i = 0; i &lt; dots; i++) {
                             dotText += '&#x25cf;';
                         }
                         errorTimer.textContent = dotText;
                         
                         if (dots &lt;= 0) {
                             clearInterval(player.errorTimer);
                             player.errorTimer = null;
                             errorOverlay.classList.add('hidden');
                             // &#x78ba;&#x4fdd;&#x932f;&#x8aa4;&#x8986;&#x84cb;&#x5c64;&#x5b8c;&#x5168;&#x96b1;&#x85cf;
                             errorOverlay.style.display = 'none';
                             player.canSelect = true;
                             
                             // &#x79fb;&#x9664;&#x6309;&#x94ae;&#x9519;&#x8bef;&#x6548;&#x679c;
                             btn.classList.remove('incorrect');
                         }
                     }, 1000);
                 }
             }
             
             // &#x8655;&#x7406;&#x96d9;&#x4eba;&#x6a21;&#x5f0f;&#x904a;&#x6232;&#x7d50;&#x675f;
             function handleMultiplayerGameEnd(winnerIndex) {
                 // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x6709;&#x7372;&#x52dd;&#x8005;&#xff0c;&#x4e0d;&#x518d;&#x8655;&#x7406;
                 if (window.multiplayerMode.winner !== null) return;
                 
                 // &#x8a2d;&#x7f6e;&#x7372;&#x52dd;&#x8005;
                 window.multiplayerMode.winner = winnerIndex;
                 window.multiplayerMode.gameStarted = false;
                 
                 // &#x505c;&#x6b62;&#x8a08;&#x6642;&#x5668;
                 stopMultiplayerTimers();
                 
                 // &#x5275;&#x5efa;&#x7372;&#x52dd;&#x63d0;&#x793a;&#x5c64;
                 const victoryOverlay = document.createElement('div');
                 victoryOverlay.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[1000]';
                 victoryOverlay.id = 'multiplayer-victory-overlay';
                 
                 // &#x7372;&#x53d6;&#x96d9;&#x65b9;&#x9032;&#x5ea6;
                 const player1Progress = window.multiplayerMode.players[0].correctAnswers;
                 const player2Progress = window.multiplayerMode.players[1].correctAnswers;
                 
                 // &#x7372;&#x53d6;&#x52dd;&#x5229;&#x73a9;&#x5bb6;&#x7684;&#x8a08;&#x6642;&#x5668;&#x5167;&#x5bb9;
                 const winnerTimerElement = winnerIndex === 0 ? 
                     document.getElementById('timer-top') : 
                     document.getElementById('timer-bottom');
                 
                 const winnerTime = winnerTimerElement ? winnerTimerElement.textContent : "00:00.0";
                 
                 victoryOverlay.innerHTML = `
                     &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 text-center"&gt;
                         &lt;h2 class="text-2xl font-bold text-green-600 dark:text-green-400 mb-6"&gt;${winnerIndex === 0 ? '&#x4e0a;&#x65b9;' : '&#x4e0b;&#x65b9;'}&#x73a9;&#x5bb6;&#x7372;&#x52dd;&#xff01;&lt;/h2&gt;
                         &lt;div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-5"&gt;
                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x5b8c;&#x6210;&#x6642;&#x9593;: ${winnerTime}&lt;/p&gt;
                             &lt;div class="flex justify-between items-center mt-2 px-4"&gt;
                                 &lt;span class="text-gray-700 dark:text-gray-300"&gt;&#x4e0a;&#x65b9;&#x73a9;&#x5bb6;&lt;/span&gt;
                                 &lt;span class="font-medium"&gt;${player1Progress} &#x5b57;&lt;/span&gt;
                             &lt;/div&gt;
                             &lt;div class="flex justify-between items-center mt-1 px-4"&gt;
                                 &lt;span class="text-gray-700 dark:text-gray-300"&gt;&#x4e0b;&#x65b9;&#x73a9;&#x5bb6;&lt;/span&gt;
                                 &lt;span class="font-medium"&gt;${player2Progress} &#x5b57;&lt;/span&gt;
                             &lt;/div&gt;
                         &lt;/div&gt;
                         &lt;div class="flex justify-center gap-6 mt-4"&gt;
                             &lt;button id="restart-multi-btn" class="w-12 h-12 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors flex items-center justify-center text-xl"&gt;
                                 &lt;i class="fas fa-redo"&gt;&lt;/i&gt;
                             &lt;/button&gt;
                             &lt;button id="return-home-multi-btn" class="w-12 h-12 bg-primary text-white rounded-full hover:bg-opacity-90 flex items-center justify-center text-xl"&gt;
                                 &lt;i class="fas fa-home"&gt;&lt;/i&gt;
                             &lt;/button&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
                 `;
                 
                 document.body.appendChild(victoryOverlay);
                 
                 // &#x6dfb;&#x52a0;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                 document.getElementById('restart-multi-btn').addEventListener('click', function() {
                     // &#x79fb;&#x9664;&#x52dd;&#x5229;&#x63d0;&#x793a;
                     document.body.removeChild(victoryOverlay);
                     // &#x91cd;&#x65b0;&#x958b;&#x59cb;&#x96d9;&#x4eba;&#x904a;&#x6232;
                     startMultiplayerGame();
                 });
                 
                 document.getElementById('return-home-multi-btn').addEventListener('click', function() {
                     // &#x79fb;&#x9664;&#x52dd;&#x5229;&#x63d0;&#x793a;
                     document.body.removeChild(victoryOverlay);
                     
                     // &#x91cd;&#x7f6e;&#x72c0;&#x614b;
                     window.multiplayerMode.active = false;
                     
                     // &#x91cd;&#x8981;&#xff1a;&#x5b8c;&#x5168;&#x91cd;&#x7f6e;&#x8a08;&#x6642;&#x5668;&#x76f8;&#x95dc;&#x8b8a;&#x91cf;
                     if (timerTopInterval) {
                         clearInterval(timerTopInterval);
                         timerTopInterval = null;
                     }
                     if (timerBottomInterval) {
                         clearInterval(timerBottomInterval);
                         timerBottomInterval = null;
                     }
                     startTimeTop = null;
                     startTimeBottom = null;
                     elapsedTimeBeforePauseTop = 0;
                     elapsedTimeBeforePauseBottom = 0;
                     multiplayerTimersStarted = false;
                     
                     // &#x986f;&#x793a;&#x55ae;&#x4eba;UI&#xff0c;&#x96b1;&#x85cf;&#x96d9;&#x4eba;UI
                     const singlePlayerUI = document.getElementById('single-player-ui');
                     const multiplayerUI = document.getElementById('multiplayer-ui');
                     
                     if (singlePlayerUI &amp;&amp; multiplayerUI) {
                         multiplayerUI.classList.add('hidden');
                     }
                     
                     // &#x5207;&#x63db;&#x56de;&#x55ae;&#x4eba;&#x6a21;&#x5f0f; - &#x4f7f;&#x7528;&#x65b0;&#x7684;&#x6ed1;&#x584a;
                     if (gameModeSwitch &amp;&amp; gameModeSwitch.checked) {
                         gameModeSwitch.checked = false;
                         window.gameMode = 'single';
                         console.log("&#x52dd;&#x5229;&#x8fd4;&#x56de;&#xff1a;&#x5df2;&#x5207;&#x63db;&#x5230;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;");
                     }
                     
                     // &#x91cd;&#x65b0;&#x986f;&#x793a;&#x4e4b;&#x524d;&#x96b1;&#x85cf;&#x7684;&#x5143;&#x7d20;
                     const headerElement = document.querySelector('header');
                     if (headerElement) {
                         headerElement.style.display = 'block';
                     }
                     
                     const passageSelector = document.querySelector('.passage-selector');
                     if (passageSelector) {
                         passageSelector.style.display = 'block';
                     }
                     
                     // &#x6062;&#x5fa9;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x548c;&#x7248;&#x672c;&#x865f;
                     if (document.getElementById('settings-button')) {
                         document.getElementById('settings-button').style.display = 'flex';
                     }
                     
                     // &#x6062;&#x5fa9;&#x5e95;&#x90e8;&#x7248;&#x672c;&#x4fe1;&#x606f;
                     const versionInfo = document.querySelector('.text-center.py-3.text-gray-500');
                     if (versionInfo) {
                         versionInfo.style.display = 'block';
                     }
                     
                     // &#x6062;&#x5fa9;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;UI&#x5143;&#x7d20;
                     const stopwatch = document.getElementById('stopwatch');
                     if (stopwatch) {
                         stopwatch.style.display = 'block';
                     }
                     
                     const lives = document.getElementById('lives');
                     if (lives) {
                         lives.style.display = 'block';
                     }
                     
                     // &#x6062;&#x5fa9;&#x55ae;&#x4eba;&#x6a21;&#x5f0f;&#x9032;&#x5ea6;&#x689d;
                     const progressContainer = document.querySelector('.w-full.max-w-\\[200px\\]');
                     if (progressContainer) {
                         progressContainer.style.display = 'block';
                     }
                     
                     const passageInfo = document.querySelector('.passage-info');
                     if (passageInfo) {
                         passageInfo.style.display = 'block';
                     }
                     
                     // &#x78ba;&#x4fdd;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;
                     const returnHomeBtn = document.getElementById('return-home-btn-game');
                     if (returnHomeBtn) {
                         returnHomeBtn.classList.remove('hidden');
                         returnHomeBtn.style.display = 'flex';
                     }
                     
                     // &#x78ba;&#x4fdd;&#x66ab;&#x505c;&#x6309;&#x9215;&#x96b1;&#x85cf;
                     const pauseBtn = document.getElementById('pause-btn');
                     if (pauseBtn) {
                         pauseBtn.classList.add('hidden');
                     }
                     
                     // &#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x904a;&#x6232;&#x958b;&#x59cb;&#x754c;&#x9762;
                     const gameStartScreen = document.getElementById('game-start-screen');
                     const gameContent = document.getElementById('game-content');
                     
                     if (gameStartScreen &amp;&amp; gameContent) {
                         // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x5167;&#x5bb9;&#xff0c;&#x986f;&#x793a;&#x958b;&#x59cb;&#x756b;&#x9762;
                         gameContent.classList.add('hidden');
                         gameStartScreen.classList.remove('hidden');
                     }
                     
                     console.log("&#x5df2;&#x91cd;&#x7f6e;&#x8a08;&#x6642;&#x5668;&#x4e26;&#x66f4;&#x65b0;&#x904a;&#x6232;&#x63a7;&#x5236;&#x6309;&#x9215;");
                 });
             }
             
             // &#x5f00;&#x59cb;&#x6e38;&#x620f;&#x6309;&#x94ae;&#x4e8b;&#x4ef6;
             if (startGameBtn) {
                 startGameBtn.addEventListener('click', function() {
                     // &#x6839;&#x636e;&#x5f53;&#x524d;&#x6a21;&#x5f0f;&#x8fdb;&#x5165;&#x76f8;&#x5e94;&#x6e38;&#x620f;
                     if (window.gameMode === 'multi') {
                         // &#x663e;&#x793a;&#x53cc;&#x4eba;&#x6a21;&#x5f0f;&#x786e;&#x8ba4;&#x5bf9;&#x8bdd;&#x6846;
                         showMultiplayerConfirm();
                     } else {
                         // &#x5355;&#x4eba;&#x6a21;&#x5f0f;&#x539f;&#x6709;&#x903b;&#x8f91;
                         gameStartScreen.classList.add('hidden');
                         countdownContainer.classList.remove('hidden');
                         
                         // &#x78ba;&#x4fdd;&#x9078;&#x64c7;&#x80cc;&#x8aa6;&#x6bb5;&#x843d;&#x754c;&#x9762;&#x95dc;&#x9589;
                         passageContent.classList.add('hidden');
                         passageToggle.style.transform = 'rotate(0deg)';
                         passageContainer.style.maxHeight = '46px';
                         
                         // &#x91cd;&#x7f6e;&#x66ab;&#x505c;&#x72c0;&#x614b;
                         hasPaused = false;
                         
                         // &#x5728;&#x5012;&#x8a08;&#x6642;&#x671f;&#x9593;&#x7981;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                         window.disableSettingsButton();
                         
                         let countdown = 3;
                         
                         // &#x663e;&#x793a;&#x5012;&#x8ba1;&#x65f6;
                         function showCountdown() {
                             if (countdown &gt; 0) {
                                 countdownNumber.textContent = countdown;
                                 countdownNumber.style.animation = 'none';
                                 void countdownNumber.offsetWidth; // &#x91cd;&#x7f6e;&#x52a8;&#x753b;
                                 countdownNumber.style.animation = 'countdown-pulse 1s ease-in-out';
                                 
                                 countdown--;
                                 setTimeout(showCountdown, 1000);
                             } else {
                                 // &#x5012;&#x8ba1;&#x65f6;&#x7ed3;&#x675f;&#xff0c;&#x663e;&#x793a;"&#x5f00;&#x59cb;&#xff01;"
                                 countdownNumber.textContent = '&#x958b;&#x59cb;&#xff01;';
                                 countdownNumber.style.animation = 'none';
                                 void countdownNumber.offsetWidth;
                                 countdownNumber.style.animation = 'countdown-pulse 0.7s ease-in-out';
                                 
                                 // &#x5f00;&#x59cb;&#x6e38;&#x620f;
                                 setTimeout(function() {
                                     countdownContainer.classList.add('hidden');
                                     gameContent.classList.remove('hidden');
                                     
                                     // &#x786e;&#x4fdd;&#x663e;&#x793a;&#x5355;&#x4eba;UI
                                     const singlePlayerUI = document.getElementById('single-player-ui');
                                     const multiplayerUI = document.getElementById('multiplayer-ui');
                                     
                                     if (singlePlayerUI &amp;&amp; multiplayerUI) {
                                         singlePlayerUI.classList.remove('hidden');
                                         multiplayerUI.classList.add('hidden');
                                     }
                                     
                                     // &#x5207;&#x63db;&#x6309;&#x9215;&#x986f;&#x793a;&#x70ba;&#x66ab;&#x505c;&#x6309;&#x9215;
                                     updateGameControlButtons('playing');
                                     
                                     // &#x91cd;&#x7f6e;&#x4e26;&#x958b;&#x59cb;&#x79d2;&#x8868; (&#x78ba;&#x4fdd;&#x5f9e;0&#x958b;&#x59cb;)
                                     elapsedTimeBeforePause = 0; // &#x91cd;&#x7f6e;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                                     resetStopwatch();
                                     
                                     // &#x904a;&#x6232;&#x958b;&#x59cb;&#x540e;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                                     window.enableSettingsButton();
                                     
                                     // &#x663e;&#x793a;&#x6e38;&#x620f;&#x5185;&#x5bb9;
                                     updateDisplay();
                                 }, 800);
                             }
                         }
                         
                         showCountdown();
                     }
                 });
             } else {
                 console.error("&#x958b;&#x59cb;&#x904a;&#x6232;&#x6309;&#x9215;&#x672a;&#x627e;&#x5230;");
             }
             
             // &#x9009;&#x62e9;&#x7bc7;&#x7ae0;&#x529f;&#x80fd;
             const passageContainer = document.getElementById('passage-container');
             const passageHeader = document.getElementById('passage-header');
             const passageToggle = document.getElementById('passage-toggle');
             const passageContent = document.getElementById('passage-content');
             const categoryBtns = document.querySelectorAll('.category-btn');
             const passageList = document.getElementById('passage-list');
             
         // &#x5b8c;&#x6574;&#x7684;&#x4e8b;&#x4ef6;&#x76e3;&#x807d;&#x51fd;&#x6578;&#x66ff;&#x63db;
         if (passageHeader &amp;&amp; passageToggle &amp;&amp; passageContent) {
         // &#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;&#x9ed8;&#x8a8d;&#x95dc;&#x9589;
         // &#x7528;&#x6236;&#x9700;&#x8981;&#x9ede;&#x64ca;&#x624d;&#x6703;&#x6253;&#x958b;
         
         // &#x5728;&#x5168;&#x5c40;&#x8b8a;&#x91cf;&#x5340;&#x57df;&#x6dfb;&#x52a0;&#x4e00;&#x500b;&#x6a19;&#x8a18;
         let isFirstTimeOpeningSelector = true; // &#x6a19;&#x8a18;&#x662f;&#x5426;&#x662f;&#x9996;&#x6b21;&#x6253;&#x958b;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;
         
         // &#x5207;&#x6362;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;
         passageHeader.addEventListener('click', function() {
         console.log("&#x7bc7;&#x7ae0;&#x6a19;&#x982d;&#x88ab;&#x9ede;&#x64ca;");
         
         if (passageContent.classList.contains('hidden')) {
         // &#x6253;&#x958b;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;
         console.log("&#x6253;&#x958b;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;");
         passageContent.classList.remove('hidden');
         passageToggle.style.transform = 'rotate(180deg)';
         
         // &#x6dfb;&#x52a0;&#x66f4;&#x81ea;&#x7136;&#x7684;&#x958b;&#x555f;&#x52d5;&#x756b;&#x6548;&#x679c;
         passageContent.style.opacity = '0';
         passageContent.style.transform = 'translateY(-20px)';
         passageContent.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
         passageContainer.style.transition = 'max-height 0.5s cubic-bezier(0.19, 1, 0.22, 1)';
         passageContainer.style.maxHeight = '500px'; // &#x7acb;&#x5373;&#x8a2d;&#x7f6e;&#x8db3;&#x5920;&#x7684;&#x9ad8;&#x5ea6;
         
         // &#x89f8;&#x767c;&#x91cd;&#x7e6a;&#x4e26;&#x61c9;&#x7528;&#x52d5;&#x756b;
         setTimeout(() =&gt; {
             passageContent.style.opacity = '1';
             passageContent.style.transform = 'translateY(0)';
         }, 10);
         
         // &#x81ea;&#x52d5;&#x95dc;&#x9589;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;
         const paragraphSelector = document.getElementById('paragraph-selector');
         if (paragraphSelector) {
             console.log("&#x81ea;&#x52d5;&#x95dc;&#x9589;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;");
             paragraphSelector.classList.add('hidden');
         }
         
         // &#x9996;&#x6b21;&#x6253;&#x958b;&#x6642;&#x4e0d;&#x9810;&#x8a2d;&#x4efb;&#x4f55;&#x7bc7;&#x7ae0;&#xff0c;&#x4f46;&#x518d;&#x6b21;&#x6253;&#x958b;&#x6642;&#x52a0;&#x8f09;&#x4e0a;&#x6b21;&#x7684;&#x7bc7;&#x7ae0;
         const shouldPreselect = !isFirstTimeOpeningSelector &amp;&amp; currentPassageKey &amp;&amp; currentPassageKey.length &gt; 0;
         
         if (shouldPreselect) {
             // &#x5982;&#x679c;&#x4e0d;&#x662f;&#x9996;&#x6b21;&#x6253;&#x958b;&#x4e26;&#x4e14;&#x6709;&#x4e0a;&#x6b21;&#x9078;&#x64c7;&#x7684;&#x7bc7;&#x7ae0;&#xff0c;&#x5247;&#x81ea;&#x52d5;&#x6253;&#x958b;&#x8a72;&#x7bc7;&#x7ae0;
             const passageItems = document.querySelectorAll('.passage-item');
             passageItems.forEach(item =&gt; {
                 if (item.dataset.value === currentPassageKey) {
                     // &#x79fb;&#x9664;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x7684;active&#x6a23;&#x5f0f;
                     passageItems.forEach(i =&gt; 
                         i.classList.remove('active', 'bg-amber-100', 'dark:bg-amber-900'));
                     
                     // &#x6dfb;&#x52a0;&#x7576;&#x524d;&#x7bc7;&#x7ae0;&#x7684;active&#x6a23;&#x5f0f;
                     item.classList.add('active', 'bg-amber-100', 'dark:bg-amber-900');
                     
                     // &#x986f;&#x793a;&#x8a72;&#x7bc7;&#x7ae0;&#x7684;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;
                     if (paragraphSelector &amp;&amp; paragraphSelector.classList.contains('hidden')) {
                         // &#x53ea;&#x6709;&#x5728;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x96b1;&#x85cf;&#x6642;&#x624d;&#x8abf;&#x7528;&#xff0c;&#x907f;&#x514d;&#x91cd;&#x8907;&#x52a0;&#x8f09;
                         showParagraphSelector(currentPassageKey);
                     }
                     
                     // &#x5982;&#x679c;&#x7bc7;&#x7ae0;&#x9805;&#x76ee;&#x7576;&#x524d;&#x662f;&#x96b1;&#x85cf;&#x7684;&#xff0c;&#x5247;&#x6253;&#x958b;&#x5176;&#x6240;&#x5c6c;&#x7684;&#x5206;&#x985e;
                     if (item.classList.contains('hidden')) {
                         const category = item.dataset.category;
                         // &#x627e;&#x5230;&#x4e26;&#x6fc0;&#x6d3b;&#x5c0d;&#x61c9;&#x7684;&#x5206;&#x985e;&#x6309;&#x9215;
                         categoryBtns.forEach(btn =&gt; {
                             if (btn.dataset.category === category) {
                                 // &#x79fb;&#x9664;&#x6240;&#x6709;&#x6309;&#x9215;&#x7684;active&#x6a23;&#x5f0f;
                                 categoryBtns.forEach(b =&gt; b.classList.remove('active', 'bg-amber-200', 'dark:bg-amber-700'));
                                 
                                 // &#x6dfb;&#x52a0;&#x7576;&#x524d;&#x6309;&#x9215;&#x7684;active&#x6a23;&#x5f0f;
                                 btn.classList.add('active', 'bg-amber-200', 'dark:bg-amber-700');
                                 
                                 // &#x986f;&#x793a;&#x8a72;&#x5206;&#x985e;&#x4e0b;&#x7684;&#x6240;&#x6709;&#x7bc7;&#x7ae0;
                                 passageItems.forEach(i =&gt; {
                                     if (i.dataset.category === category) {
                                         i.classList.remove('hidden');
                                     } else {
                                         i.classList.add('hidden');
                                     }
                                 });
                             }
                         });
                     }
                 }
             });
         }
         
         // &#x66f4;&#x65b0;&#x6a19;&#x8a18;&#xff0c;&#x8868;&#x793a;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;&#x5df2;&#x88ab;&#x6253;&#x958b;&#x904e;
         isFirstTimeOpeningSelector = false;
         
         } else {
         // &#x95dc;&#x9589;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668; - &#x6dfb;&#x52a0;&#x6536;&#x7e2e;&#x52d5;&#x756b;
         console.log("&#x95dc;&#x9589;&#x7bc7;&#x7ae0;&#x9078;&#x64c7;&#x5668;");
         passageToggle.style.transform = 'rotate(0deg)';
             
             // &#x6dfb;&#x52a0;&#x6de1;&#x51fa;&#x52d5;&#x756b;&#x6548;&#x679c;
             passageContent.style.opacity = '0';
             passageContent.style.transform = 'translateY(10px)';
             
             // &#x5148;&#x6536;&#x7e2e;&#x5bb9;&#x5668;&#x9ad8;&#x5ea6;&#xff0c;&#x7136;&#x5f8c;&#x96b1;&#x85cf;&#x5167;&#x5bb9;
             passageContainer.style.transition = 'max-height 0.4s cubic-bezier(0.6, 0.04, 0.98, 0.335)';
             passageContainer.style.maxHeight = '46px';
             
             // &#x5ef6;&#x9072;&#x96b1;&#x85cf;&#x5167;&#x5bb9;&#xff0c;&#x8b93;&#x6536;&#x7e2e;&#x52d5;&#x756b;&#x5148;&#x5b8c;&#x6210;
             setTimeout(() =&gt; {
                 passageContent.classList.add('hidden');
                 
                 // &#x91cd;&#x7f6e;&#x52d5;&#x756b;&#x72c0;&#x614b;&#xff0c;&#x70ba;&#x4e0b;&#x6b21;&#x6253;&#x958b;&#x505a;&#x6e96;&#x5099;
                 setTimeout(() =&gt; {
                     passageContent.style.transition = 'none';
                     passageContent.style.opacity = '1';
                     passageContent.style.transform = 'translateY(0)';
                 }, 50);
                 
                 // &#x5f37;&#x5236;&#x96b1;&#x85cf;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;
                 const paragraphSelector = document.getElementById('paragraph-selector');
                 if (paragraphSelector) {
                     console.log("&#x96b1;&#x85cf;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;");
                     paragraphSelector.classList.add('hidden');
                     
                     // &#x91cd;&#x7f6e;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x52d5;&#x756b;&#x72c0;&#x614b;
                     setTimeout(() =&gt; {
                         paragraphSelector.style.transition = 'none';
                         paragraphSelector.style.opacity = '1';
                         paragraphSelector.style.transform = 'translateY(0)';
                     }, 50);
                 } else {
                     console.error("&#x627e;&#x4e0d;&#x5230;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x5143;&#x7d20;");
                 }
             }, 300); // &#x7b49;&#x5f85;&#x6536;&#x7e2e;&#x52d5;&#x756b;&#x5b8c;&#x6210;
         }
         });
         }            
             // &#x5206;&#x7c7b;&#x6309;&#x94ae;&#x70b9;&#x51fb;&#x4e8b;&#x4ef6;
             categoryBtns.forEach(btn =&gt; {
                 btn.addEventListener('click', function() {
                     // &#x79fb;&#x9664;&#x6240;&#x6709;&#x6309;&#x94ae;&#x7684;active&#x6837;&#x5f0f;
                     categoryBtns.forEach(b =&gt; b.classList.remove('active', 'bg-amber-200', 'dark:bg-amber-700'));
                     
                     // &#x6dfb;&#x52a0;&#x5f53;&#x524d;&#x6309;&#x94ae;&#x7684;active&#x6837;&#x5f0f;
                     this.classList.add('active', 'bg-amber-200', 'dark:bg-amber-700');
                     
                     // &#x904e;&#x6ffe;&#x7bc7;&#x7ae0;&#x5217;&#x8868;
                     const category = this.dataset.category;
                     const passageItems = document.querySelectorAll('.passage-item');
                     const emptyMessage = document.getElementById('empty-category-message');
                     
                     if (!emptyMessage) {
                         console.error("&#x7a7a;&#x5206;&#x985e;&#x63d0;&#x793a;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                         return;
                     }
                     
                     // &#x5148;&#x96b1;&#x85cf;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x548c;&#x63d0;&#x793a;&#x4fe1;&#x606f;
                     passageItems.forEach(item =&gt; {
                         item.classList.add('hidden');
                     });
                     emptyMessage.classList.add('hidden');
                     
                     // &#x6aa2;&#x67e5;&#x986f;&#x793a;&#x7b26;&#x5408;&#x5206;&#x985e;&#x7684;&#x7bc7;&#x7ae0;
                     let hasVisibleItems = false;
                     passageItems.forEach(item =&gt; {
                         if (item.dataset.category === category) {
                             item.classList.remove('hidden');
                             hasVisibleItems = true;
                         }
                     });
                     
                     // &#x5982;&#x679c;&#x8a72;&#x5206;&#x985e;&#x6c92;&#x6709;&#x7bc7;&#x7ae0;&#xff0c;&#x986f;&#x793a;&#x63d0;&#x793a;&#x4fe1;&#x606f;
                     if (!hasVisibleItems) {
                         emptyMessage.classList.remove('hidden');
                     }
                     
                     // &#x9690;&#x85cf;&#x6bb5;&#x843d;&#x9009;&#x62e9;&#x5668;
                     const paragraphSelector = document.getElementById('paragraph-selector');
                     if (paragraphSelector) {
                         paragraphSelector.classList.add('hidden');
                     }
                     
                     // &#x78ba;&#x4fdd;&#x7bc7;&#x7ae0;&#x5217;&#x8868;&#x5bb9;&#x5668;&#x6709;&#x8db3;&#x5920;&#x9ad8;&#x5ea6;&#x4e26;&#x53ef;&#x6efe;&#x52d5;
                     const passageList = document.getElementById('passage-list');
                     if (passageList) {
                         // &#x8a08;&#x7b97;&#x5408;&#x9069;&#x7684;&#x6700;&#x5927;&#x9ad8;&#x5ea6; (&#x8996;&#x53e3;&#x9ad8;&#x5ea6;&#x7684;20%)
                         const maxHeight = Math.max(60, window.innerHeight * 0.2) + 'px';
                         passageList.style.maxHeight = maxHeight;
                         
                         // &#x78ba;&#x4fdd;&#x5bb9;&#x5668;&#x53ef;&#x6efe;&#x52d5;
                         passageList.style.overflowY = 'auto';
                     }
                     
                     // &#x78ba;&#x4fdd;&#x4e3b;&#x5bb9;&#x5668;&#x6709;&#x8db3;&#x5920;&#x7a7a;&#x9593;&#x986f;&#x793a;&#x5217;&#x8868;
                     if (passageContainer) {
                         // &#x8996;&#x53e3;&#x9ad8;&#x5ea6;&#x7684;60%&#xff0c;&#x4f46;&#x81f3;&#x5c11;600px
                         passageContainer.style.maxHeight = Math.max(600, window.innerHeight * 0.6) + 'px';
                     }
                 });
             });
             
             // &#x81ea;&#x52d5;&#x751f;&#x6210;&#x7bc7;&#x7ae0;&#x9805;&#x76ee;&#x7684;&#x51fd;&#x6578;
             function generatePassageItems() {
                 const container = document.getElementById('passage-list');
                 if (!container) {
                     console.error("&#x7bc7;&#x7ae0;&#x5217;&#x8868;&#x5bb9;&#x5668;&#x672a;&#x627e;&#x5230;");
                     return;
                 }
                 
                 // &#x4fdd;&#x5b58;&#x7a7a;&#x5206;&#x985e;&#x63d0;&#x793a;&#x6d88;&#x606f;
                 const emptyMessage = document.getElementById('empty-category-message');
                 let savedEmptyMsg = null;
                 if (emptyMessage) {
                     savedEmptyMsg = emptyMessage.cloneNode(true);
                 }
                 
                 // &#x6e05;&#x7a7a;&#x5bb9;&#x5668;
                 container.innerHTML = '';
                 
                 // &#x6062;&#x5fa9;&#x7a7a;&#x5206;&#x985e;&#x63d0;&#x793a;&#x6d88;&#x606f;
                 if (savedEmptyMsg) {
                     container.appendChild(savedEmptyMsg);
                 }
                 
                 // &#x70ba;&#x6bcf;&#x500b;&#x7bc7;&#x7ae0;&#x5275;&#x5efa;&#x9805;&#x76ee;
                 Object.keys(passages).forEach(key =&gt; {
                     const passage = passages[key];
                     
                     // &#x5275;&#x5efa;&#x7bc7;&#x7ae0;&#x9805;&#x76ee;&#x5143;&#x7d20;
                     const item = document.createElement('div');
                     item.className = 'passage-item p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md cursor-pointer hidden';
                     item.dataset.value = key;
                     item.dataset.category = passage.category || '&#x5176;&#x4ed6;'; // &#x4f7f;&#x7528;&#x7bc7;&#x7ae0;&#x4e2d;&#x5b9a;&#x7fa9;&#x7684;&#x5206;&#x985e;
                     item.textContent = `${passage.title} - ${passage.author}`;
                     
                     // &#x6dfb;&#x52a0;&#x5230;&#x5bb9;&#x5668;&#x4e2d;
                     container.appendChild(item);
                 });
                 
                 // &#x6dfb;&#x52a0;&#x7bc7;&#x7ae0;&#x9805;&#x76ee;&#x7684;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 addPassageItemListeners();
             }
             
             // &#x4e3a;&#x7bc7;&#x7ae0;&#x9879;&#x6dfb;&#x52a0;&#x70b9;&#x51fb;&#x4e8b;&#x4ef6;&#x76d1;&#x542c;
             function addPassageItemListeners() {
                 document.querySelectorAll('.passage-item').forEach(item =&gt; {
                     item.addEventListener('click', function() {
                         // &#x79fb;&#x9664;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x7684;active&#x6837;&#x5f0f;
                         document.querySelectorAll('.passage-item').forEach(i =&gt; 
                             i.classList.remove('active', 'bg-amber-100', 'dark:bg-amber-900'));
                         
                         // &#x6dfb;&#x52a0;&#x5f53;&#x524d;&#x7bc7;&#x7ae0;&#x7684;active&#x6837;&#x5f0f;
                         this.classList.add('active', 'bg-amber-100', 'dark:bg-amber-900');
                         
                         // &#x83b7;&#x53d6;&#x9009;&#x4e2d;&#x7684;&#x7bc7;&#x7ae0;
                         const passageKey = this.dataset.value;
                         currentPassageKey = passageKey;
                         
                         // &#x663e;&#x793a;&#x6bb5;&#x843d;&#x9009;&#x62e9;&#x5668;
                         showParagraphSelector(passageKey);
                     });
                 });
             }
             
             // &#x81ea;&#x52d5;&#x70ba;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x751f;&#x6210;&#x5167;&#x5bb9;
             function initializePassages() {
                 Object.keys(passages).forEach(key =&gt; {
                     if (!passages[key].content) {
                         passages[key].content = passages[key].paragraphs.join('');
                     }
                 });
             }
             
             // &#x663e;&#x793a;&#x6bb5;&#x843d;&#x9009;&#x62e9;&#x5668;
             function showParagraphSelector(passageKey) {
                 // &#x6dfb;&#x52a0;&#x52a8;&#x753b;&#x6548;&#x679c; - &#x7528;&#x4e8e;&#x6bb5;&#x843d;&#x9009;&#x62e9;&#x5668;&#x7684;&#x6253;&#x5f00;&#x8fc7;&#x6e21;
                 const paragraphSelector = document.getElementById('paragraph-selector');
                 const paragraphList = document.getElementById('paragraph-list');
                 const selectedPassage = passages[passageKey];
                 
                 if (!paragraphSelector || !paragraphList) {
                     console.error("&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                     return;
                 }
                 
                 if (!selectedPassage) {
                     console.error("&#x9078;&#x4e2d;&#x7684;&#x7bc7;&#x7ae0;&#x4e0d;&#x5b58;&#x5728;:", passageKey);
                     return;
                 }
                 
                 // &#x6e05;&#x7a7a;&#x6bb5;&#x843d;&#x5217;&#x8868;
                 paragraphList.innerHTML = '';
                 
                 // &#x6dfb;&#x52a0;"&#x5168;&#x6587;"&#x9009;&#x9879;
                 const allOption = document.createElement('div');
                 allOption.className = 'flex items-center mb-2';
                 allOption.innerHTML = `
                     &lt;input type="checkbox" id="paragraph-all" class="mr-2 h-4 w-4 text-primary" checked&gt;
                     &lt;label for="paragraph-all" class="text-gray-700 dark:text-gray-300 cursor-pointer font-medium"&gt;&#x5168;&#x6587;&lt;/label&gt;
                 `;
                 paragraphList.appendChild(allOption);
                 
                 // &#x5168;&#x9009;&#x6309;&#x94ae;&#x903b;&#x8f91;
                 const allCheckbox = allOption.querySelector('input');
                 if (allCheckbox) {
                     allCheckbox.addEventListener('change', function() {
                         // &#x83b7;&#x53d6;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x590d;&#x9009;&#x6846;
                         const paragraphCheckboxes = paragraphOptionsContainer.querySelectorAll('.paragraph-checkbox');
                         
                         // &#x8bbe;&#x7f6e;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x590d;&#x9009;&#x6846;&#x4e0e;&#x5168;&#x9009;&#x6846;&#x72b6;&#x6001;&#x4e00;&#x81f4;
                         paragraphCheckboxes.forEach(checkbox =&gt; {
                             checkbox.checked = this.checked;
                         });
                     });
                 }
                 
                 // &#x521b;&#x5efa;&#x5305;&#x542b;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x9009;&#x9879;&#x7684;&#x5bb9;&#x5668;
                 const paragraphOptionsContainer = document.createElement('div');
                 paragraphOptionsContainer.className = 'paragraph-options overflow-y-auto';
                 paragraphList.appendChild(paragraphOptionsContainer);
                 
                 // &#x6dfb;&#x52a0;&#x5404;&#x6bb5;&#x843d;&#x9009;&#x9879;
                 selectedPassage.paragraphs.forEach((paragraph, index) =&gt; {
                     const paragraphOption = document.createElement('div');
                     paragraphOption.className = 'flex items-center mb-2';
                     paragraphOption.innerHTML = `
                         &lt;input type="checkbox" id="paragraph-${index+1}" class="mr-2 h-4 w-4 text-primary paragraph-checkbox" data-index="${index}" checked&gt;
                         &lt;label for="paragraph-${index+1}" class="text-gray-700 dark:text-gray-300 cursor-pointer flex-1"&gt;
                             &lt;span class="font-medium"&gt;&#x7b2c;${index+1}&#x6bb5;&#xff1a;&lt;/span&gt;
                             &lt;span class="text-sm"&gt;${paragraph.substring(0, 20)}${paragraph.length &gt; 20 ? '...' : ''}&lt;/span&gt;
                         &lt;/label&gt;
                     `;
                     paragraphOptionsContainer.appendChild(paragraphOption);
                     
                     // &#x6bb5;&#x843d;&#x590d;&#x9009;&#x6846;&#x903b;&#x8f91;
                     const checkbox = paragraphOption.querySelector('input');
                     if (checkbox) {
                         checkbox.addEventListener('change', function() {
                             // &#x68c0;&#x67e5;&#x662f;&#x5426;&#x6240;&#x6709;&#x6bb5;&#x843d;&#x90fd;&#x88ab;&#x9009;&#x4e2d;
                             const paragraphCheckboxes = paragraphOptionsContainer.querySelectorAll('.paragraph-checkbox');
                             const allCheckbox = document.getElementById('paragraph-all');
                             
                             if (allCheckbox &amp;&amp; paragraphCheckboxes) {
                                 const allChecked = Array.from(paragraphCheckboxes).every(cb =&gt; cb.checked);
                                 allCheckbox.checked = allChecked;
                             }
                         });
                     }
                 });
                 
                 // &#x663e;&#x793a;&#x6bb5;&#x843d;&#x9009;&#x62e9;&#x5668;
                 // &#x5148;&#x7f6e;&#x9802;&#xff0c;&#x907f;&#x514d;&#x986f;&#x793a;&#x5ef6;&#x9072;
                 paragraphSelector.style.cssText = 'transform: translateY(-20px); opacity: 0;';
                 paragraphSelector.classList.remove('hidden');
                 
                 // &#x5f37;&#x5236;&#x89f8;&#x767c;&#x91cd;&#x7e6a;
                 void paragraphSelector.offsetWidth;
                 
                 // &#x61c9;&#x7528;&#x52d5;&#x756b; - &#x8f03;&#x9577;&#x7684;&#x904e;&#x6e21;&#x6642;&#x9593;&#x63d0;&#x4f9b;&#x66f4;&#x6d41;&#x66a2;&#x7684;&#x9ad4;&#x9a57;
                 paragraphSelector.style.transition = 'transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s ease-out';
                 paragraphSelector.style.transform = 'translateY(0)';
                 paragraphSelector.style.opacity = '1';
                 
                 // &#x8a2d;&#x7f6e;&#x6bb5;&#x843d;&#x5217;&#x8868;&#x7684;&#x6efe;&#x52d5;&#x5c6c;&#x6027;
                 if (paragraphOptionsContainer) {
                     // &#x6839;&#x64da;&#x6bb5;&#x843d;&#x6578;&#x91cf;&#x52d5;&#x614b;&#x8abf;&#x6574;&#x9ad8;&#x5ea6;&#xff0c;&#x589e;&#x52a0;&#x6bcf;&#x6bb5;&#x9ad8;&#x5ea6;&#x4e26;&#x63d0;&#x9ad8;&#x6700;&#x5c0f;&#x503c;
                     const paragraphCount = selectedPassage.paragraphs.length;
                     // &#x6bcf;&#x6bb5;&#x7d04;70px&#x9ad8;&#xff0c;&#x6700;&#x5c11;200px&#xff0c;&#x6700;&#x591a;&#x8996;&#x53e3;&#x9ad8;&#x5ea6;&#x7684;50%
                     const calculatedHeight = Math.min(
                         Math.max(200, paragraphCount * 70),
                         window.innerHeight * 0.5
                     );
                     paragraphOptionsContainer.style.maxHeight = calculatedHeight + 'px';
                     paragraphOptionsContainer.style.overflowY = 'auto';
                 }
                 
                 // &#x78ba;&#x4fdd;&#x5bb9;&#x5668;&#x9ad8;&#x5ea6;&#x8db3;&#x5920; - &#x4f7f;&#x7528;&#x52d5;&#x614b;&#x8a08;&#x7b97;&#x7684;&#x9ad8;&#x5ea6;
                 if (passageContainer) {
                     // &#x8a08;&#x7b97;&#x7576;&#x524d;&#x6240;&#x6709;&#x5167;&#x5bb9;&#x7684;&#x5be6;&#x969b;&#x9ad8;&#x5ea6;&#xff0c;&#x5305;&#x62ec;&#x6bb5;&#x843d;&#x9078;&#x64c7;&#x5668;&#x548c;&#x78ba;&#x8a8d;&#x6309;&#x9215;
                     const paragraphSelectorHeight = paragraphSelector.scrollHeight;
                     const passageContentHeight = document.getElementById('passage-content').scrollHeight;
                     // &#x589e;&#x52a0;&#x984d;&#x5916;&#x7a7a;&#x9593;&#xff0c;&#x78ba;&#x4fdd;&#x5bb9;&#x5668;&#x9ad8;&#x5ea6;&#x5145;&#x8db3;
                     const totalHeight = Math.max(600, passageContentHeight + 50);
                     passageContainer.style.maxHeight = totalHeight + 'px';
                     passageContainer.style.transition = 'max-height 0.3s ease';
                 }
                 
                 // &#x91cd;&#x65b0;&#x7ed1;&#x5b9a;&#x786e;&#x8ba4;&#x6309;&#x94ae;&#x4e8b;&#x4ef6;
                 setupConfirmButton();
             }
             
             // &#x8a2d;&#x7f6e;&#x78ba;&#x8a8d;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
             function setupConfirmButton() {
                 const confirmBtn = document.getElementById('confirm-paragraphs');
                 if (!confirmBtn) {
                     console.error("&#x78ba;&#x8a8d;&#x6309;&#x9215;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                     return;
                 }
                 
                 // &#x79fb;&#x9664;&#x73fe;&#x6709;&#x7684;&#x4e8b;&#x4ef6;&#x76e3;&#x807d;&#x5668;
                 const newConfirmBtn = confirmBtn.cloneNode(true);
                 confirmBtn.parentNode.replaceChild(newConfirmBtn, confirmBtn);
                 
                 // &#x6dfb;&#x52a0;&#x65b0;&#x7684;&#x4e8b;&#x4ef6;&#x76e3;&#x807d;&#x5668; - &#x6539;&#x70ba;&#x7570;&#x6b65;&#x51fd;&#x6578;&#x4ee5;&#x652f;&#x6301;&#x7b49;&#x5f85;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;
                 newConfirmBtn.addEventListener('click', async function() {
                     console.log("&#x78ba;&#x8a8d;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                     
                     const paragraphList = document.getElementById('paragraph-list');
                     if (!paragraphList) {
                         console.error("&#x6bb5;&#x843d;&#x5217;&#x8868;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                         return;
                     }
                     
                     // &#x83b7;&#x53d6;&#x9009;&#x4e2d;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;
                     const selectedIndices = [];
                     const paragraphOptions = paragraphList.querySelector('.paragraph-options');
                     if (!paragraphOptions) {
                         console.error("&#x6bb5;&#x843d;&#x9078;&#x9805;&#x5bb9;&#x5668;&#x672a;&#x627e;&#x5230;");
                         return;
                     }
                     
                     const checkboxes = paragraphOptions.querySelectorAll('.paragraph-checkbox');
                     
                     checkboxes.forEach(checkbox =&gt; {
                         if (checkbox.checked) {
                             selectedIndices.push(parseInt(checkbox.dataset.index));
                         }
                     });
                     
                     // &#x5982;&#x679c;&#x6ca1;&#x6709;&#x9009;&#x4e2d;&#x4efb;&#x4f55;&#x6bb5;&#x843d;&#xff0c;&#x9ed8;&#x8ba4;&#x9009;&#x4e2d;&#x5168;&#x90e8;
                     if (selectedIndices.length === 0) {
                         if (passages[currentPassageKey]) {
                             for (let i = 0; i &lt; passages[currentPassageKey].paragraphs.length; i++) {
                                 selectedIndices.push(i);
                             }
                         }
                     }
                     
                     console.log("&#x9078;&#x4e2d;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;:", selectedIndices);
                     
                     // &#x5173;&#x95ed;&#x9009;&#x62e9;&#x5668;
                     if (passageContent) {
                         passageContent.classList.add('hidden');
                     }
                     if (passageToggle) {
                         passageToggle.style.transform = 'rotate(0deg)';
                     }
                     if (passageContainer) {
                         passageContainer.style.maxHeight = '46px';
                     }
                     
                     try {
                         // &#x986f;&#x793a;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b; - &#x7b49;&#x5f85;&#x52d5;&#x756b;&#x5b8c;&#x6210;&#x5f8c;&#x518d;&#x9032;&#x5165;&#x904a;&#x6232;&#x754c;&#x9762;
                         console.log("&#x958b;&#x59cb;&#x64ad;&#x653e;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;");
                         await showLoadingAnimation();
                         console.log("&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;&#x64ad;&#x653e;&#x5b8c;&#x6210;");
                         
                         // &#x8f09;&#x5165;&#x9078;&#x4e2d;&#x7684;&#x6bb5;&#x843d; (&#x7b2c;&#x4e09;&#x500b;&#x53c3;&#x6578;&#x8a2d;&#x70ba;true&#xff0c;&#x8868;&#x793a;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;)
                         loadSelectedParagraphs(currentPassageKey, selectedIndices, true);
                         
                         // &#x78ba;&#x4fdd;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x800c;&#x975e;&#x66ab;&#x505c;&#x6309;&#x9215;
                         const pauseBtn = document.getElementById('pause-btn');
                         const returnHomeBtn = document.getElementById('return-home-btn-game');
                         
                         if (pauseBtn &amp;&amp; returnHomeBtn) {
                             pauseBtn.classList.add('hidden');
                             returnHomeBtn.classList.remove('hidden');
                             console.log("&#x78ba;&#x8a8d;&#x6309;&#x9215;&#xff1a;&#x5df2;&#x5207;&#x63db;&#x70ba;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;");
                         }
                         
                         // &#x96b1;&#x85cf;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x754c;&#x9762; - &#x4f7f;&#x7528;&#x5f37;&#x5236;&#x591a;&#x5c64;&#x96b1;&#x85cf;
                         const userProfileContainer = document.getElementById('user-profile-container');
                         if (userProfileContainer) {
                             // &#x5f37;&#x5236;&#x5fb9;&#x5e95;&#x96b1;&#x85cf;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868; - &#x4f7f;&#x7528;&#x591a;&#x91cd;&#x65b9;&#x5f0f;&#x78ba;&#x4fdd;&#x96b1;&#x85cf;
                             userProfileContainer.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;';
                             userProfileContainer.classList.add('hidden');
                             
                             // &#x79fb;&#x9664;&#x4efb;&#x4f55;&#x53ef;&#x80fd;&#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868;&#x7684;&#x985e;&#x540d;
                             userProfileContainer.classList.remove('block', 'flex', 'visible', 'opacity-100');
                             
                             console.log("&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868;&#x5df2;&#x88ab;&#x5f37;&#x5236;&#x96b1;&#x85cf;");
                         }
                     } catch (error) {
                         console.error("&#x904e;&#x6e21;&#x5230;&#x904a;&#x6232;&#x754c;&#x9762;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                         alert("&#x8f09;&#x5165;&#x904a;&#x6232;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x8a66;");
                     }
                 });
             }
             
             // &#x7528;&#x4e8e;&#x5b58;&#x50a8;&#x5df2;&#x56de;&#x7b54;&#x7684;&#x5b57;&#x7b26;
             let lastAnsweredChars = [];
             const MAX_DISPLAYED_CHARS = 15;
             
             // &#x6210;&#x529f;&#x80cc;&#x8aa6;50&#x5b57;&#x6062;&#x5fa9;1&#x9ede;&#x751f;&#x547d;&#x503c;&#x7684;&#x8a08;&#x6578;&#x5668;
             let successfulChars = 0;
             
             // &#x904a;&#x6232;&#x7576;&#x524d;&#x4f7f;&#x7528;&#x7684;&#x5167;&#x5bb9;
             let content = '';
             let totalNonPunctChars = 0;
             
             // &#x5275;&#x5efa;&#x67e5;&#x770b;&#x5b8c;&#x6574;&#x6587;&#x7ae0;&#x7684;&#x529f;&#x80fd;
             const fullTextModal = document.createElement('div');
             fullTextModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden';
             fullTextModal.id = 'full-text-modal';
             document.body.appendChild(fullTextModal);
             
             // &#x52a0;&#x8f09;&#x9078;&#x4e2d;&#x6bb5;&#x843d;&#x7684;&#x51fd;&#x6578;&#xff0c;&#x4e0d;&#x4f7f;&#x7528;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;
             async function loadSelectedParagraphs(passageKey, paragraphIndices) {
                 console.log("&#x958b;&#x59cb;&#x52a0;&#x8f09;&#x6bb5;&#x843d;:", passageKey, paragraphIndices);
                 
                 try {
                     // &#x4fdd;&#x5b58;&#x9078;&#x64c7;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x5230;&#x5168;&#x5c40;&#x8b8a;&#x91cf;&#xff0c;&#x4f9b;&#x5206;&#x4eab;&#x4f7f;&#x7528;
                     window.selectedParagraphIndices = paragraphIndices;
                     console.log("&#x5df2;&#x4fdd;&#x5b58;&#x6bb5;&#x843d;&#x7d22;&#x5f15;:", window.selectedParagraphIndices);
                     
                     // &#x78ba;&#x4fdd;&#x904a;&#x6232;&#x9801;&#x9762;&#x5b58;&#x5728;
                     const gamePage = document.getElementById('game-page');
                     if (!gamePage) {
                         console.error("&#x904a;&#x6232;&#x9801;&#x9762;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                         return;
                     }
                     
                     // &#x91cd;&#x7f6e;&#x6e38;&#x620f;&#x72b6;&#x6001;
                     currentPosition = 0;
                     correctAnswers = 0;
                     wrongAnswersCount = 0; // &#x91cd;&#x7f6e;&#x932f;&#x8aa4;&#x8a08;&#x6578;
                     lives = 3;
                     updateLives();
                     
                     // &#x6e05;&#x7a7a;&#x5df2;&#x56de;&#x7b54;&#x7684;&#x5b57;&#x7b26;
                     successfulChars = 0;
                     const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                     if (lastAnsweredCharsElem) {
                         lastAnsweredChars = [];
                         lastAnsweredCharsElem.textContent = '';
                     }
                     
                     const completedText = document.getElementById('completed-text');
                     if (completedText) {
                         completedText.textContent = '';
                     }
                     
                     // &#x7372;&#x53d6;&#x9078;&#x64c7;&#x7684;&#x7bc7;&#x7ae0;
                     const selectedPassage = passages[passageKey];
                     if (!selectedPassage) {
                         console.error("&#x9078;&#x4e2d;&#x7684;&#x7bc7;&#x7ae0;&#x4e0d;&#x5b58;&#x5728;:", passageKey);
                         return;
                     }
                     
                     // &#x6839;&#x636e;&#x9009;&#x62e9;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x6784;&#x5efa;&#x5185;&#x5bb9;
                     content = '';
                     paragraphIndices.sort((a, b) =&gt; a - b); // &#x786e;&#x4fdd;&#x6bb5;&#x843d;&#x6309;&#x987a;&#x5e8f;&#x6392;&#x5217;
                     
                     paragraphIndices.forEach(index =&gt; {
                         if (index &gt;= 0 &amp;&amp; index &lt; selectedPassage.paragraphs.length) {
                             content += selectedPassage.paragraphs[index];
                         }
                     });
                     
                     // &#x8a08;&#x7b97;&#x975e;&#x6a19;&#x9ede;&#x7b26;&#x865f;&#x7684;&#x5b57;&#x7b26;&#x6578;&#x91cf;
                     totalNonPunctChars = 0;
                     for (let i = 0; i &lt; content.length; i++) {
                         if (!isPunctuation(content[i])) {
                             totalNonPunctChars++;
                         }
                     }
                     
                     console.log("&#x5b57;&#x6578;&#x8a08;&#x7b97;&#x5b8c;&#x6210;&#xff0c;&#x7e3d;&#x975e;&#x6a19;&#x9ede;&#x5b57;&#x7b26;&#x6578;&#xff1a;", totalNonPunctChars);
                     
                     // &#x6784;&#x5efa;&#x6807;&#x9898;&#xff08;&#x6dfb;&#x52a0;&#x6240;&#x9009;&#x6bb5;&#x843d;&#x4fe1;&#x606f;&#xff09;
                     const passageTitle = document.getElementById('passage-title');
                     const passageAuthor = document.getElementById('passage-author');
                     
                     if (passageTitle) {
                         if (paragraphIndices.length === selectedPassage.paragraphs.length) {
                             // &#x5982;&#x679c;&#x9078;&#x64c7;&#x4e86;&#x6240;&#x6709;&#x6bb5;&#x843d;&#xff0c;&#x53ea;&#x986f;&#x793a;&#x6a19;&#x984c;
                             passageTitle.textContent = selectedPassage.title;
                         } else {
                             // &#x5982;&#x679c;&#x9078;&#x64c7;&#x4e86;&#x90e8;&#x5206;&#x6bb5;&#x843d;&#xff0c;&#x986f;&#x793a;&#x6bb5;&#x843d;&#x7bc4;&#x570d;
                             let rangeText = '';
                             if (paragraphIndices.length === 1) {
                                 rangeText = `&#x7b2c;${paragraphIndices[0] + 1}&#x6bb5;`;
                             } else {
                                 // &#x5224;&#x65ad;&#x662f;&#x5426;&#x662f;&#x8fde;&#x7eed;&#x7684;&#x6bb5;&#x843d;
                                 let isConsecutive = true;
                                 for (let i = 0; i &lt; paragraphIndices.length - 1; i++) {
                                     if (paragraphIndices[i + 1] !== paragraphIndices[i] + 1) {
                                         isConsecutive = false;
                                         break;
                                     }
                                 }
                                 
                                 if (isConsecutive) {
                                     rangeText = `&#x7b2c;${paragraphIndices[0] + 1}-${paragraphIndices[paragraphIndices.length - 1] + 1}&#x6bb5;`;
                                 } else {
                                     rangeText = `&#x7b2c;${paragraphIndices.map(idx =&gt; idx + 1).join('&#x3001;')}&#x6bb5;`;
                                 }
                             }
                             passageTitle.textContent = `${selectedPassage.title}&#xff08;${rangeText}&#xff09;`;
                         }
                     }
                     
                     if (passageAuthor) {
                         passageAuthor.textContent = selectedPassage.author;
                     }
                     
                     // &#x505c;&#x6b62;&#x79d2;&#x8868;&#x5e76;&#x91cd;&#x7f6e;
                     stopStopwatch();
                     if (timerElement) {
                         timerElement.textContent = "00:00.0";
                     }
                     // &#x78ba;&#x4fdd;&#x6062;&#x5fa9;&#x79d2;&#x8868;&#x6642;&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x8a08;&#x6642;
                     elapsedTimeBeforePause = 0;
                     
                     // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x986f;&#x793a; - &#x4f7f;&#x7528;&#x9078;&#x4e2d;&#x6bb5;&#x843d;&#x7684;&#x7e3d;&#x5b57;&#x6578;
                     const totalCharsElement = document.getElementById('total-chars');
                     const progressTextElement = document.getElementById('progress-text');
                     const progressBarElement = document.getElementById('progress-bar');
                     
                     if (totalCharsElement) {
                         totalCharsElement.textContent = totalNonPunctChars;
                     }
                     
                     if (progressTextElement) {
                         progressTextElement.textContent = `0 / ${totalNonPunctChars}`;
                     }
                     
                     if (progressBarElement) {
                         progressBarElement.style.width = '0%';
                     }
                     
                     // &#x6e05;&#x7a7a;&#x9009;&#x9879;&#x5bb9;&#x5668;
                     const optionsContainer = document.getElementById('options-container');
                     if (optionsContainer) {
                         optionsContainer.innerHTML = '';
                         optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                     }
                     
                     // &#x78ba;&#x4fdd;&#x6e38;&#x620f;&#x5f00;&#x59cb;&#x754c;&#x9762;&#x6e96;&#x5099;&#x597d;
                     if (gameContent) {
                         gameContent.classList.add('hidden');
                     }
                     
                     if (gameStartScreen) {
                         gameStartScreen.classList.remove('hidden');
                     }
                     
                     // &#x91cd;&#x7f6e;&#x66ab;&#x505c;&#x72c0;&#x614b;
                     isPaused = false;
                     hasPaused = false; // &#x91cd;&#x7f6e;&#x662f;&#x5426;&#x4f7f;&#x7528;&#x904e;&#x66ab;&#x505c;&#x7684;&#x6a19;&#x8a18;
                     
                     // &#x660e;&#x78ba;&#x66f4;&#x65b0;&#x6309;&#x9215;&#x72c0;&#x614b;&#x70ba;&#x300c;&#x672a;&#x958b;&#x59cb;&#x300d;&#xff0c;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                     updateGameControlButtons('not-started');
                     
                     // &#x76f4;&#x63a5;&#x8655;&#x7406;&#x66ab;&#x505c;/&#x8fd4;&#x56de;&#x6309;&#x9215;&#x7684;&#x986f;&#x793a;
                     const pauseBtn = document.getElementById('pause-btn');
                     const returnHomeBtn = document.getElementById('return-home-btn-game');
                     
                     if (pauseBtn &amp;&amp; returnHomeBtn) {
                         // &#x5728;&#x904a;&#x6232;&#x672a;&#x958b;&#x59cb;&#x6642;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                         pauseBtn.classList.add('hidden');
                         returnHomeBtn.classList.remove('hidden');
                         console.log("&#x5df2;&#x5207;&#x63db;&#x70ba;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215; (&#x52a0;&#x8f09;&#x6bb5;&#x843d;)");
                     }
                     
                     // &#x53ea;&#x6709;&#x7576;&#x7528;&#x6236;&#x901a;&#x904e;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x660e;&#x78ba;&#x8abf;&#x7528;&#x6642;&#x624d;&#x986f;&#x793a;&#x904a;&#x6232;&#x9801;&#x9762;
                     // &#x5982;&#x679c;&#x4e0d;&#x662f;&#x901a;&#x904e;&#x521d;&#x59cb;&#x8f09;&#x5165;&#x8abf;&#x7528;&#xff0c;&#x5247;&#x986f;&#x793a;&#x904a;&#x6232;&#x9801;&#x9762;
                     if (arguments.length &gt; 2 &amp;&amp; arguments[2] === true) {
                         // &#x5f37;&#x5236;&#x5fb9;&#x5e95;&#x986f;&#x793a;&#x904a;&#x6232;&#x9801;&#x9762; - &#x4f7f;&#x7528;&#x591a;&#x91cd;&#x65b9;&#x5f0f;&#x78ba;&#x4fdd;&#x986f;&#x793a;
                         console.log("&#x5f37;&#x5236;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;");
                         gamePage.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
                         gamePage.classList.remove('hidden');
                         
                         // &#x6dfb;&#x52a0;&#x986f;&#x793a;&#x985e;&#x540d;
                         gamePage.classList.add('block', 'visible', 'opacity-100');
                         
                         // &#x78ba;&#x4fdd;&#x9801;&#x9762;&#x7ffb;&#x8f49;&#x6548;&#x679c;&#x751f;&#x6548;
                         const bookPage = document.querySelector('.page');
                         if (bookPage) {
                             bookPage.classList.add('turned');
                         }
                         
                         // &#x4f7f;&#x7528;&#x5ef6;&#x9072;&#x6aa2;&#x67e5;&#x904a;&#x6232;&#x754c;&#x9762;&#x72c0;&#x614b;
                         setTimeout(() =&gt; {
                             console.log("&#x904a;&#x6232;&#x754c;&#x9762;&#x986f;&#x793a;&#x72c0;&#x614b;:", window.getComputedStyle(gamePage).display);
                             
                             // &#x5982;&#x679c;&#x904a;&#x6232;&#x754c;&#x9762;&#x4ecd;&#x672a;&#x986f;&#x793a;&#xff0c;&#x518d;&#x6b21;&#x5617;&#x8a66;
                             if (window.getComputedStyle(gamePage).display === 'none') {
                                 console.warn("&#x904a;&#x6232;&#x754c;&#x9762;&#x4ecd;&#x672a;&#x986f;&#x793a;&#xff0c;&#x518d;&#x6b21;&#x5617;&#x8a66;...");
                                 gamePage.style.cssText = 'display: block !important; visibility: visible !important;';
                             }
                             
                             // &#x518d;&#x6b21;&#x78ba;&#x8a8d;&#x6309;&#x9215;&#x986f;&#x793a;&#x72c0;&#x614b;
                             if (pauseBtn &amp;&amp; returnHomeBtn) {
                                 if (!returnHomeBtn.classList.contains('hidden')) {
                                     console.log("&#x78ba;&#x8a8d;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;&#x6b63;&#x5e38;");
                                 } else {
                                     console.warn("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x4ecd;&#x7136;&#x96b1;&#x85cf;&#xff0c;&#x91cd;&#x65b0;&#x8a2d;&#x7f6e;...");
                                     pauseBtn.classList.add('hidden');
                                     returnHomeBtn.classList.remove('hidden');
                                 }
                             }
                             
                             // &#x518d;&#x6b21;&#x78ba;&#x8a8d;&#x6309;&#x9215;&#x986f;&#x793a;&#x72c0;&#x614b;
                             if (pauseBtn &amp;&amp; returnHomeBtn) {
                                 if (!returnHomeBtn.classList.contains('hidden')) {
                                     console.log("&#x78ba;&#x8a8d;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;&#x6b63;&#x5e38;");
                                 } else {
                                     console.warn("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x4ecd;&#x7136;&#x96b1;&#x85cf;&#xff0c;&#x91cd;&#x65b0;&#x8a2d;&#x7f6e;...");
                                     pauseBtn.classList.add('hidden');
                                     returnHomeBtn.classList.remove('hidden');
                                 }
                             }
                         }, 50);
                         
                         // &#x540c;&#x6642;&#x5f37;&#x5236;&#x96b1;&#x85cf;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x5bb9;&#x5668;
                         const userProfileContainer = document.getElementById('user-profile-container');
                         if (userProfileContainer) {
                             userProfileContainer.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;';
                             userProfileContainer.classList.add('hidden');
                             userProfileContainer.classList.remove('block', 'flex', 'visible', 'opacity-100');
                         }
                     } else {
                         // &#x78ba;&#x4fdd;&#x904a;&#x6232;&#x9801;&#x9762;&#x96b1;&#x85cf;
                         gamePage.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;';
                         gamePage.classList.add('hidden');
                         gamePage.classList.remove('block', 'flex', 'visible', 'opacity-100');
                     }
                     
                     console.log("&#x6bb5;&#x843d;&#x52a0;&#x8f09;&#x5b8c;&#x6210;&#xff0c;&#x904a;&#x6232;&#x6e96;&#x5099;&#x5c31;&#x7dd2;");
                     
                 } catch (error) {
                     console.error("&#x52a0;&#x8f09;&#x6bb5;&#x843d;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                 }
             }
             
             let currentPosition = 0;
             let correctAnswers = 0;
             let canSelect = true;
             let lives = 3;
             
             const completedText = document.getElementById('completed-text');
             const currentChar = document.getElementById('current-char');
             const optionsContainer = document.getElementById('options-container');
             const feedback = document.getElementById('feedback');
             const helpBtn = document.getElementById('help-btn');
             const helpText = document.getElementById('help-text');
             
             // &#x79d2;&#x8868;&#x529f;&#x80fd; - &#x4fee;&#x6539;&#x70ba;&#x652f;&#x6301;&#x66ab;&#x505c;/&#x7e7c;&#x7e8c;
             function startStopwatch() {
                 if (isPaused) return; // &#x5982;&#x679c;&#x904a;&#x6232;&#x5df2;&#x66ab;&#x505c;&#xff0c;&#x4e0d;&#x555f;&#x52d5;&#x8a08;&#x6642;&#x5668;
                 
                 // &#x8a2d;&#x7f6e;&#x958b;&#x59cb;&#x6642;&#x9593; - &#x8003;&#x616e;&#x5148;&#x524d;&#x7d2f;&#x7a4d;&#x7684;&#x6642;&#x9593;
                 startTime = new Date();
                 
                 // &#x555f;&#x52d5;&#x8a08;&#x6642;&#x5668;
                 timerInterval = setInterval(updateStopwatch, 100);
                 
                 // &#x904a;&#x6232;&#x958b;&#x59cb;&#x5f8c;&#xff0c;&#x986f;&#x793a;&#x66ab;&#x505c;&#x6309;&#x9215;&#x800c;&#x975e;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                 updateGameControlButtons('playing');
             }
             
             // &#x66f4;&#x65b0;&#x66ab;&#x505c;/&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x986f;&#x793a;&#x72c0;&#x614b;
             function updateGameControlButtons(gameState) {
                 const pauseBtn = document.getElementById('pause-btn');
                 const returnHomeBtn = document.getElementById('return-home-btn-game');
                 
                 if (!pauseBtn || !returnHomeBtn) return;
                 
                 if (gameState === 'not-started' || gameState === 'completed' || gameState === 'failed') {
                     // &#x904a;&#x6232;&#x958b;&#x59cb;&#x524d;&#x3001;&#x5b8c;&#x6210;&#x5f8c;&#x6216;&#x5931;&#x6557;&#x5f8c;&#xff0c;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                     pauseBtn.classList.add('hidden');
                     returnHomeBtn.classList.remove('hidden');
                 } else if (gameState === 'playing') {
                     // &#x904a;&#x6232;&#x9032;&#x884c;&#x4e2d;&#xff0c;&#x986f;&#x793a;&#x66ab;&#x505c;&#x6309;&#x9215;
                     pauseBtn.classList.remove('hidden');
                     returnHomeBtn.classList.add('hidden');
                 }
             }
             
             function stopStopwatch() {
                 // &#x5982;&#x679c;&#x8a08;&#x6642;&#x5668;&#x6b63;&#x5728;&#x904b;&#x884c;&#xff0c;&#x505c;&#x6b62;&#x4e26;&#x4fdd;&#x5b58;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 if (timerInterval) {
                     clearInterval(timerInterval);
                     timerInterval = null;
                     
                     // &#x5982;&#x679c;&#x662f;&#x66ab;&#x505c;&#x64cd;&#x4f5c;&#xff08;&#x800c;&#x975e;&#x904a;&#x6232;&#x7d50;&#x675f;&#x7b49;&#x5176;&#x4ed6;&#x539f;&#x56e0;&#x505c;&#x6b62;&#xff09;&#xff0c;&#x66f4;&#x65b0;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                     if (startTime &amp;&amp; isPaused) {
                         const currentTime = new Date();
                         elapsedTimeBeforePause += (currentTime - startTime);
                         startTime = null; // &#x6e05;&#x9664;&#x958b;&#x59cb;&#x6642;&#x9593;
                     }
                 }
             }
             
             function resetStopwatch() {
                 stopStopwatch();
                 elapsedTimeBeforePause = 0; // &#x91cd;&#x7f6e;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 
                 if (timerElement) {
                     timerElement.textContent = "00:00.0";
                 }
                 
                 // &#x91cd;&#x65b0;&#x958b;&#x59cb;&#x79d2;&#x9336;
                 startStopwatch();
             }
             
             function updateStopwatch() {
                 if (!timerElement || isPaused) return;
                 
                 const currentTime = new Date();
                 // &#x8a08;&#x7b97;&#x7e3d;&#x7d93;&#x904e;&#x6642;&#x9593; = &#x4e4b;&#x524d;&#x7d2f;&#x8a08;&#x7684;&#x6642;&#x9593; + &#x7576;&#x524d;&#x8a08;&#x6642;&#x6bb5;&#x7684;&#x6642;&#x9593;
                 const totalElapsedMs = elapsedTimeBeforePause + (currentTime - startTime);
                 
                 // &#x8f49;&#x63db;&#x70ba;&#x6642;&#x9593;&#x683c;&#x5f0f;
                 const totalElapsedDate = new Date(totalElapsedMs);
                 const minutes = String(totalElapsedDate.getUTCMinutes()).padStart(2, '0');
                 const seconds = String(totalElapsedDate.getUTCSeconds()).padStart(2, '0');
                 const tenths = Math.floor(totalElapsedDate.getUTCMilliseconds() / 100);
                 
                 timerElement.textContent = `${minutes}:${seconds}.${tenths}`;
             }
             
             // &#x83b7;&#x53d6;&#x5b8c;&#x6210;&#x65f6;&#x95f4;&#xff08;&#x4ee5;&#x79d2;&#x4e3a;&#x5355;&#x4f4d;&#xff09;
             function getCompletionTimeInSeconds() {
                 if (!timerElement) return 0;
                 
                 const timeString = timerElement.textContent;
                 const parts = timeString.split(':');
                 const minutePart = parseInt(parts[0]);
                 const secondParts = parts[1].split('.');
                 const secondPart = parseInt(secondParts[0]);
                 const tenthPart = parseInt(secondParts[1]) / 10;
                 
                 // &#x8fd4;&#x56de;&#x603b;&#x79d2;&#x6570;&#xff08;&#x5305;&#x62ec;&#x5c0f;&#x6570;&#x90e8;&#x5206;&#xff09;
                 return minutePart * 60 + secondPart + tenthPart;
             }
             
             // &#x521d;&#x59cb;&#x663e;&#x793a;&#xff0c;&#x5148;&#x4e0d;&#x542f;&#x52a8;&#x79d2;&#x8868;
             if (timerElement) timerElement.textContent = "00:00.0";
             
             // &#x5e2e;&#x52a9;&#x6309;&#x94ae; - &#x6dfb;&#x52a0;&#x81ea;&#x52d5;&#x6efe;&#x52d5;&#x529f;&#x80fd;
             if (helpBtn &amp;&amp; helpText) {
                 helpBtn.addEventListener('click', function() {
                     helpText.classList.toggle('hidden');
                     
                     // &#x5982;&#x679c;&#x5e6b;&#x52a9;&#x6587;&#x672c;&#x986f;&#x793a;&#xff0c;&#x6efe;&#x52d5;&#x9801;&#x9762;&#x4f7f;&#x5176;&#x5b8c;&#x5168;&#x53ef;&#x898b;
                     if (!helpText.classList.contains('hidden')) {
                         setTimeout(() =&gt; {
                             helpText.scrollIntoView({ behavior: 'smooth', block: 'center' });
                         }, 100);
                     }
                 });
             }
             
             // &#x521d;&#x59cb;&#x5316;&#x66ab;&#x505c;&#x529f;&#x80fd;
             function initializePauseSystem() {
                 const pauseBtn = document.getElementById('pause-btn');
                 const pauseOverlay = document.getElementById('pause-overlay');
                 const continueBtn = document.getElementById('continue-btn');
                 const restartFromPauseBtn = document.getElementById('restart-from-pause-btn');
                 const countdownResume = document.getElementById('countdown-resume');
                 const pauseButtons = document.getElementById('pause-buttons');
                 
                 if (!pauseBtn || !pauseOverlay || !continueBtn || !restartFromPauseBtn || !countdownResume) {
                     console.error("&#x66ab;&#x505c;&#x7cfb;&#x7d71;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                     return;
                 }
                 
                 // &#x66ab;&#x505c;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 pauseBtn.addEventListener('click', function() {
                     // &#x53ea;&#x6709;&#x5728;&#x904a;&#x6232;&#x9032;&#x884c;&#x4e2d;&#x4e14;&#x672a;&#x66ab;&#x505c;&#x6642;&#x624d;&#x80fd;&#x66ab;&#x505c;
                     if (gameStartScreen.classList.contains('hidden') &amp;&amp; gameContent.classList.contains('hidden') === false &amp;&amp; !isPaused) {
                         pauseGame();
                     }
                 });
                 
                 // &#x7e7c;&#x7e8c;&#x904a;&#x6232;&#x6309;&#x9215;
                 continueBtn.addEventListener('click', function() {
                     // &#x96b1;&#x85cf;&#x6309;&#x9215;&#xff0c;&#x986f;&#x793a;&#x5012;&#x8a08;&#x6642;
                     pauseButtons.classList.add('hidden');
                     countdownResume.classList.remove('hidden');
                     
                     let count = 3;
                     const countdownNumber = countdownResume.querySelector('.pause-countdown-number');
                     countdownNumber.textContent = count;
                     
                     // &#x6e05;&#x9664;&#x53ef;&#x80fd;&#x5b58;&#x5728;&#x7684;&#x5012;&#x8a08;&#x6642;
                     if (resumeCountdown) {
                         clearInterval(resumeCountdown);
                     }
                     
                     // &#x958b;&#x59cb;&#x65b0;&#x7684;&#x5012;&#x8a08;&#x6642;
                     resumeCountdown = setInterval(function() {
                         count--;
                         countdownNumber.textContent = count;
                         countdownNumber.style.animation = 'none';
                         void countdownNumber.offsetWidth; // &#x91cd;&#x7f6e;&#x52d5;&#x756b;
                         countdownNumber.style.animation = 'countdownPulse 1s ease-out';
                         
                         if (count &lt;= 0) {
                             clearInterval(resumeCountdown);
                             resumeCountdown = null;
                             
                             // &#x6062;&#x5fa9;&#x904a;&#x6232;
                             resumeGame();
                             
                             // &#x91cd;&#x7f6e;&#x754c;&#x9762;
                             pauseButtons.classList.remove('hidden');
                             countdownResume.classList.add('hidden');
                         }
                     }, 1000);
                 });
                 
                 // &#x91cd;&#x65b0;&#x958b;&#x59cb;&#x6309;&#x9215;
                 restartFromPauseBtn.addEventListener('click', async function() {
                     // &#x5148;&#x95dc;&#x9589;&#x66ab;&#x505c;&#x83dc;&#x55ae;
                     pauseOverlay.classList.add('hidden');
                     isPaused = false;
                     
                     // &#x6e05;&#x9664;&#x5012;&#x8a08;&#x6642;
                     if (resumeCountdown) {
                         clearInterval(resumeCountdown);
                         resumeCountdown = null;
                     }
                     
                     // &#x91cd;&#x7f6e;&#x754c;&#x9762;
                     pauseButtons.classList.remove('hidden');
                     countdownResume.classList.add('hidden');
                     
                     // &#x57f7;&#x884c;&#x91cd;&#x65b0;&#x958b;&#x59cb;
                     await restartGame();
                     
                     // &#x95dc;&#x9375;&#x4fee;&#x5fa9;&#xff1a;&#x78ba;&#x4fdd;&#x986f;&#x793a;"&#x8fd4;&#x56de;&#x4e3b;&#x9801;"&#x6309;&#x9215;&#x800c;&#x975e;&#x66ab;&#x505c;&#x6309;&#x9215;
                     updateGameControlButtons('not-started');
                     console.log("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#xff1a;&#x5df2;&#x66f4;&#x65b0;&#x6309;&#x9215;&#x986f;&#x793a;&#x72c0;&#x614b;&#x70ba;'&#x672a;&#x958b;&#x59cb;'");
                     
                     // &#x95dc;&#x9375;&#x4fee;&#x5fa9;&#xff1a;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x9f52;&#x8f2a;&#x6309;&#x9215;
                     window.enableSettingsButton();
                     console.log("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#xff1a;&#x5df2;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x9f52;&#x8f2a;&#x6309;&#x9215;");
                 });
                 
                 // &#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                 const returnHomeBtn = document.getElementById('return-home-btn');
                 if (returnHomeBtn) {
                     returnHomeBtn.addEventListener('click', async function() {
                         console.log("&#x66ab;&#x505c;&#x754c;&#x9762;&#x7684;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                         
                         try {
                             // &#x5148;&#x95dc;&#x9589;&#x66ab;&#x505c;&#x83dc;&#x55ae;&#xff0c;&#x907f;&#x514d;&#x91cd;&#x8907;&#x986f;&#x793a;
                             pauseOverlay.classList.add('hidden');
                             isPaused = false;
                             
                             // &#x6e05;&#x9664;&#x5012;&#x8a08;&#x6642;
                             if (resumeCountdown) {
                                 clearInterval(resumeCountdown);
                                 resumeCountdown = null;
                             }
                             
                             // &#x91cd;&#x7f6e;&#x754c;&#x9762;
                             pauseButtons.classList.remove('hidden');
                             countdownResume.classList.add('hidden');
                             
                             // &#x986f;&#x793a;&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;
                             await showLoadingAnimation();
                             console.log("&#x6c34;&#x58a8;&#x904e;&#x6e21;&#x52d5;&#x756b;&#x64ad;&#x653e;&#x5b8c;&#x6210;");
                             
                             // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                             currentPosition = 0;
                             correctAnswers = 0;
                             lives = 3;
                             successfulChars = 0;
                             wrongAnswersCount = 0;
                             lastAnsweredChars = [];
                             
                             const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                             if (lastAnsweredCharsElem) {
                                 lastAnsweredCharsElem.textContent = '';
                             }
                             
                             canSelect = true;
                             isPaused = false;
                             hasPaused = false;
                             updateLives();
                             
                             if (feedback) {
                                 feedback.textContent = '';
                             }
                             
                             // &#x505c;&#x6b62;&#x8a08;&#x6642;&#x5668;
                             stopStopwatch();
                             elapsedTimeBeforePause = 0;
                             if (timerElement) {
                                 timerElement.textContent = "00:00.0";
                             }
                             
                             // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                             const progressText = document.getElementById('progress-text');
                             const progressBar = document.getElementById('progress-bar');
                             
                             if (progressText) {
                                 progressText.textContent = `0 / ${totalNonPunctChars}`;
                             }
                             
                             if (progressBar) {
                                 progressBar.style.width = '0%';
                             }
                             
                             // &#x7372;&#x53d6;&#x9700;&#x8981;&#x64cd;&#x4f5c;&#x7684;&#x5143;&#x7d20;
                             const userProfileContainer = document.getElementById('user-profile-container');
                             const gamePage = document.getElementById('game-page');
                             
                             // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762;
                             gamePage.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important;';
                             gamePage.classList.add('hidden');
                             gamePage.classList.remove('block', 'flex', 'visible', 'opacity-100');
                             
                             // &#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x754c;&#x9762;
                             userProfileContainer.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                             userProfileContainer.classList.remove('hidden');
                             userProfileContainer.classList.add('block');
                             
                             // &#x78ba;&#x4fdd;&#x66f8;&#x672c;&#x9801;&#x9762;&#x56de;&#x5230;&#x521d;&#x59cb;&#x72c0;&#x614b;
                             const bookPage = document.querySelector('.page');
                             if (bookPage &amp;&amp; bookPage.classList.contains('turned')) {
                                 bookPage.classList.remove('turned');
                             }
                             
                             // &#x6efe;&#x52d5;&#x5230;&#x9801;&#x9762;&#x9802;&#x90e8;
                             window.scrollTo({
                                 top: 0,
                                 behavior: 'smooth'
                             });
                             
                             // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x4e26;&#x6062;&#x5fa9;&#x539f;&#x59cb;&#x7684;&#x7db2;&#x683c;&#x4f48;&#x5c40;
                             if (optionsContainer) {
                                 optionsContainer.innerHTML = '';
                                 optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                             }
                             
                             // &#x95dc;&#x9375;&#x4fee;&#x5fa9;&#xff1a;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#xff0c;&#x56e0;&#x70ba;&#x7528;&#x6236;&#x5df2;&#x8fd4;&#x56de;&#x4e3b;&#x9801;
                             window.enableSettingsButton();
                             console.log("&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;");
                             
                             console.log("&#x5f9e;&#x66ab;&#x505c;&#x83dc;&#x55ae;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6210;&#x529f;");
                         } catch (error) {
                             console.error("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x8655;&#x7406;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                             alert("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                             // &#x5373;&#x4f7f;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x4ecd;&#x5617;&#x8a66;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                             try {
                                 window.enableSettingsButton();
                             } catch (e) {
                                 console.error("&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", e);
                             }
                         }
                     });
                 } else {
                     console.error("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                 }
                 
                 // &#x9375;&#x76e4;&#x4e8b;&#x4ef6;
                 document.addEventListener('keydown', function(e) {
                     // &#x6309;&#x4e0b; ESC &#x9375;&#x66ab;&#x505c;/&#x7e7c;&#x7e8c;
                     if (e.key === 'Escape') {
                         if (gameStartScreen.classList.contains('hidden') &amp;&amp; gameContent.classList.contains('hidden') === false) {
                             if (isPaused) {
                                 continueBtn.click();
                             } else {
                                 pauseBtn.click();
                             }
                         }
                     }
                 });
             }
             
             // &#x66ab;&#x505c;&#x904a;&#x6232;
             function pauseGame() {
                 if (isPaused) return; // &#x9632;&#x6b62;&#x91cd;&#x8907;&#x66ab;&#x505c;
                 
                 isPaused = true;
                 hasPaused = true; // &#x6a19;&#x8a18;&#x7528;&#x6236;&#x4f7f;&#x7528;&#x4e86;&#x66ab;&#x505c;&#x529f;&#x80fd;
                 
                 // &#x66ab;&#x505c;&#x8a08;&#x6642;&#x5668; - &#x4fdd;&#x5b58;&#x7576;&#x524d;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 stopStopwatch();
                 
                 // &#x7981;&#x6b62;&#x9078;&#x64c7;&#x9078;&#x9805;
                 canSelect = false;
                 
                 // &#x7981;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 window.disableSettingsButton();
                 
                 // &#x986f;&#x793a;&#x66ab;&#x505c;&#x8986;&#x84cb;&#x5c64;
                 const pauseOverlay = document.getElementById('pause-overlay');
                 if (pauseOverlay) {
                     pauseOverlay.classList.remove('hidden');
                 }
                 
                 console.log("&#x904a;&#x6232;&#x5df2;&#x66ab;&#x505c;");
             }
             
             // &#x6062;&#x5fa9;&#x904a;&#x6232;
             function resumeGame() {
                 if (!isPaused) return; // &#x9632;&#x6b62;&#x975e;&#x66ab;&#x505c;&#x72c0;&#x614b;&#x4e0b;&#x6062;&#x5fa9;
                 
                 isPaused = false;
                 
                 // &#x96b1;&#x85cf;&#x66ab;&#x505c;&#x8986;&#x84cb;&#x5c64;
                 const pauseOverlay = document.getElementById('pause-overlay');
                 if (pauseOverlay) {
                     pauseOverlay.classList.add('hidden');
                 }
                 
                 // &#x6062;&#x5fa9;&#x8a08;&#x6642;&#x5668; - &#x5f9e;&#x4e4b;&#x524d;&#x7684;&#x7d2f;&#x8a08;&#x6642;&#x9593;&#x7e7c;&#x7e8c;
                 startStopwatch();
                 
                 // &#x5141;&#x8a31;&#x9078;&#x64c7;&#x9078;&#x9805;
                 canSelect = true;
                 
                 // &#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 window.enableSettingsButton();
                 
                 console.log("&#x904a;&#x6232;&#x5df2;&#x6062;&#x5fa9;&#xff0c;&#x7d2f;&#x8a08;&#x6642;&#x9593;: " + elapsedTimeBeforePause + "ms");
             }
             
             // &#x91cd;&#x65b0;&#x958b;&#x59cb;&#x904a;&#x6232;
             async function restartGame() {
                 // &#x5148;&#x986f;&#x793a;&#x8f09;&#x5165;&#x52d5;&#x756b;
                 await showLoadingAnimation();
                 
                 // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                 currentPosition = 0;
                 correctAnswers = 0;
                 wrongAnswersCount = 0;
                 lives = 3;
                 successfulChars = 0;
                 lastAnsweredChars = [];
                 
                 // &#x91cd;&#x7f6e;UI&#x5143;&#x7d20;
                 const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                 if (lastAnsweredCharsElem) {
                     lastAnsweredCharsElem.textContent = '';
                 }
                 
                 updateLives();
                 
                 if (completedText) {
                     completedText.textContent = '';
                 }
                 
                 if (feedback) {
                     feedback.textContent = '';
                     feedback.className = 'mt-4 text-center h-6 text-lg';
                 }
                 
                 // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                 const progressText = document.getElementById('progress-text');
                 const progressBar = document.getElementById('progress-bar');
                 
                 if (progressText) {
                     progressText.textContent = `0 / ${totalNonPunctChars}`;
                 }
                 
                 if (progressBar) {
                     progressBar.style.width = '0%';
                 }
                 
                 // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                 canSelect = true;
                 isPaused = false;
                 hasPaused = false; // &#x91cd;&#x7f6e;&#x66ab;&#x505c;&#x6a19;&#x8a18;
                 
                 // &#x91cd;&#x7f6e;&#x79d2;&#x8868;
                 stopStopwatch();
                 elapsedTimeBeforePause = 0; // &#x91cd;&#x7f6e;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                 if (timerElement) {
                     timerElement.textContent = "00:00.0";
                 }
                 
                 // &#x986f;&#x793a;&#x958b;&#x59cb;&#x5c4f;&#x5e55;
                 if (gameContent &amp;&amp; gameStartScreen) {
                     gameContent.classList.add('hidden');
                     gameStartScreen.classList.remove('hidden');
                 }
                 
                 // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x4e26;&#x6062;&#x5fa9;&#x539f;&#x59cb;&#x7684;&#x7db2;&#x683c;&#x4f48;&#x5c40;
                 if (optionsContainer) {
                     optionsContainer.innerHTML = '';
                     optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                 }
                 
                 // &#x78ba;&#x4fdd;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x754c;&#x9762;&#x95dc;&#x9589;
                 if (passageContent &amp;&amp; passageToggle &amp;&amp; passageContainer) {
                     passageContent.classList.add('hidden');
                     passageToggle.style.transform = 'rotate(0deg)';
                     passageContainer.style.maxHeight = '46px';
                 }
                 
                 console.log("&#x904a;&#x6232;&#x5df2;&#x91cd;&#x65b0;&#x958b;&#x59cb;");
             }
             
             // &#x5275;&#x5efa;&#x67e5;&#x770b;&#x5b8c;&#x6574;&#x6587;&#x7ae0;&#x529f;&#x80fd;
             const viewFullTextBtn = document.getElementById('view-full-text-btn');
             if (viewFullTextBtn) {
                 viewFullTextBtn.addEventListener('click', function() {
                     if (!currentPassageKey) {
                         alert('&#x8acb;&#x5148;&#x9078;&#x64c7;&#x4e00;&#x7bc7;&#x6587;&#x7ae0;');
                         return;
                     }
                     
                     // &#x7372;&#x53d6;&#x7576;&#x524d;&#x6587;&#x7ae0;&#x5b8c;&#x6574;&#x5167;&#x5bb9;
                     const passage = passages[currentPassageKey];
                     if (!passage) return;
                     
                     // &#x5c07;&#x6bb5;&#x843d;&#x8f49;&#x63db;&#x70ba;HTML&#x683c;&#x5f0f;&#xff0c;&#x4f7f;&#x7528;&#x7db2;&#x683c;&#x4f48;&#x5c40;&#x986f;&#x793a;&#x6bb5;&#x843d;&#x7de8;&#x865f;&#x548c;&#x5167;&#x5bb9;
                     const formattedParagraphs = passage.paragraphs.map((paragraph, index) =&gt; {
                         return `
                         &lt;div class="grid grid-cols-[auto,1px,1fr] gap-3 mb-5"&gt;
                             &lt;div class="text-amber-700 dark:text-amber-400 font-medium whitespace-nowrap py-1"&gt;&#x7b2c;${index + 1}&#x6bb5;&lt;/div&gt;
                             &lt;div class="bg-gray-300 dark:bg-gray-600 w-px"&gt;&lt;/div&gt;
                             &lt;div class="text-gray-700 dark:text-gray-300 py-1 text-lg"&gt;${paragraph}&lt;/div&gt;
                         &lt;/div&gt;`;
                     }).join('');
                     
                     // &#x5275;&#x5efa;&#x6a21;&#x614b;&#x6846;&#x5167;&#x5bb9;
                     fullTextModal.innerHTML = `
                     &lt;div class="bg-white dark:bg-gray-800 p-6 rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto"&gt;
                         &lt;div class="flex justify-between items-center mb-4"&gt;
                             &lt;h3 class="text-lg font-bold text-gray-800 dark:text-gray-100"&gt;${passage.title}&lt;/h3&gt;
                             &lt;button id="close-modal-btn" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
                                 &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                             &lt;/button&gt;
                         &lt;/div&gt;
                         &lt;p class="text-sm text-gray-500 dark:text-gray-400 mb-4"&gt;${passage.author}&lt;/p&gt;
                         &lt;div class="bg-gray-50 dark:bg-gray-700/30 p-4 rounded-lg"&gt;
                             ${formattedParagraphs}
                         &lt;/div&gt;
                     &lt;/div&gt;
                     `;
                     
                     // &#x986f;&#x793a;&#x6a21;&#x614b;&#x6846;
                     fullTextModal.classList.remove('hidden');
                     
                     // &#x95dc;&#x9589;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                     document.getElementById('close-modal-btn').addEventListener('click', function() {
                         fullTextModal.classList.add('hidden');
                     });
                     
                     // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;&#x6a21;&#x614b;&#x6846;
                     fullTextModal.addEventListener('click', function(e) {
                         if (e.target === fullTextModal) {
                             fullTextModal.classList.add('hidden');
                         }
                     });
                 });
             }
             
             // &#x7372;&#x53d6;&#x4e26;&#x5b58;&#x5132;&#x9032;&#x5ea6;&#x76f8;&#x95dc;&#x7684;DOM&#x5143;&#x7d20;
             const progressTextElement = document.getElementById('progress-text');
             const totalCharsElement = document.getElementById('total-chars');
             const progressBarElement = document.getElementById('progress-bar');
             
             function updateDisplay() {
                 // &#x6aa2;&#x67e5;&#x7576;&#x524d;&#x4f4d;&#x7f6e;&#x5b57;&#x7b26;&#x662f;&#x5426;&#x662f;&#x6a19;&#x9ede;&#xff0c;&#x5982;&#x679c;&#x662f;&#x5247;&#x8df3;&#x904e;
                 while (currentPosition &lt; content.length &amp;&amp; isPunctuation(content[currentPosition])) {
                     currentPosition++;
                 }
                 
                 // &#x78ba;&#x4fdd;&#x7576;&#x524d;&#x5b57;&#x7b26;&#x5143;&#x7d20;&#x5b58;&#x5728;
                 if (!currentChar) {
                     console.error('currentChar element is missing');
                     return;
                 }
                 
                 // &#x66f4;&#x65b0;&#x986f;&#x793a;&#xff0c;&#x4e0d;&#x518d;&#x9810;&#x5148;&#x986f;&#x793a;&#x7576;&#x524d;&#x5b57;&#x7b26;
                 if (currentPosition &lt; content.length) {
                     // &#x6e05;&#x7a7a;&#x7576;&#x524d;&#x5b57;&#x7b26;&#x986f;&#x793a;&#x5340;
                     currentChar.textContent = '';
                     
                     // &#x76f4;&#x63a5;&#x70ba;&#x7576;&#x524d;&#x4f4d;&#x7f6e;&#x751f;&#x6210;&#x9078;&#x9805;
                     generateOptions(currentPosition);
                 } else {
                     // &#x5b8c;&#x6210;&#x6240;&#x6709;&#x5b57;&#x7b26;
                     completePassage();
                 }
                 
                 // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x986f;&#x793a;
                 updateProgressUI();
             }
             
             // &#x62bd;&#x53d6;&#x9032;&#x5ea6;&#x66f4;&#x65b0;&#x70ba;&#x7368;&#x7acb;&#x51fd;&#x6578;
             function updateProgressUI() {
                 // &#x8a08;&#x7b97;&#x4e26;&#x986f;&#x793a;&#x975e;&#x6a19;&#x9ede;&#x5b57;&#x7b26;&#x7684;&#x9032;&#x5ea6;
                 let nonPunctChars = 0;
                 for (let i = 0; i &lt; currentPosition; i++) {
                     if (!isPunctuation(content[i])) {
                         nonPunctChars++;
                     }
                 }
                 
                 // &#x78ba;&#x4fdd;&#x9032;&#x5ea6;&#x689d;&#x76f8;&#x95dc;&#x5143;&#x7d20;&#x5b58;&#x5728;
                 try {
                     // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d; - &#x4f7f;&#x7528;&#x9078;&#x4e2d;&#x6bb5;&#x843d;&#x7684;&#x7e3d;&#x5b57;&#x6578;
                     if (totalCharsElement) totalCharsElement.textContent = totalNonPunctChars;
                     if (progressTextElement) progressTextElement.textContent = `${nonPunctChars} / ${totalNonPunctChars}`;
                     const progressPercentage = (totalNonPunctChars &gt; 0) ? (nonPunctChars / totalNonPunctChars * 100) : 0;
                     if (progressBarElement) progressBarElement.style.width = `${progressPercentage}%`;
                 } catch (e) {
                     console.error('Error updating progress UI:', e);
                 }
             }
             
             function generateOptions(pos) {
                 if (!optionsContainer) {
                     console.error("&#x9078;&#x9805;&#x5bb9;&#x5668;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;");
                     return;
                 }
                 
                 // &#x786e;&#x4fdd; pos &#x4e0d;&#x662f;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                 while (pos &lt; content.length &amp;&amp; isPunctuation(content[pos])) {
                     pos++;
                 }
                 
                 // &#x6e05;&#x7a7a;&#x9009;&#x9879;&#x5bb9;&#x5668;
                 optionsContainer.innerHTML = '';
                 
                 // &#x6b63;&#x786e;&#x7b54;&#x6848;
                 const correctAnswer = content[pos];
                 
                 // &#x751f;&#x6210;&#x4e24;&#x4e2a;&#x5e72;&#x6270;&#x9009;&#x9879;
                 let options = [correctAnswer];
                 
                 while (options.length &lt; 3) {
                     const randomIndex = Math.floor(Math.random() * content.length);
                     const randomChar = content[randomIndex];
                     
                     // &#x786e;&#x4fdd;&#x4e0d;&#x91cd;&#x590d;&#x4e14;&#x4e0d;&#x662f;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                     if (!options.includes(randomChar) &amp;&amp; 
                         !isPunctuation(randomChar) &amp;&amp; 
                         randomChar !== correctAnswer) {
                         options.push(randomChar);
                     }
                 }
                 
                 // &#x6253;&#x4e71;&#x9009;&#x9879;&#x987a;&#x5e8f;
                 options = shuffleArray(options);
                 
                 // &#x521b;&#x5efa;&#x9009;&#x9879;&#x6309;&#x94ae;
                 options.forEach(option =&gt; {
                     const btn = document.createElement('button');
                     btn.className = 'option-btn h-16 md:h-20 text-2xl md:text-3xl bg-white dark:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none';
                     btn.textContent = option;
                     
                     btn.addEventListener('click', function() {
                         if (!canSelect || isPaused) return; // &#x5982;&#x679c;&#x5df2;&#x66ab;&#x505c;&#xff0c;&#x4e0d;&#x5141;&#x8a31;&#x9078;&#x64c7;
                         
                         if (option === correctAnswer) {
                             // &#x53ea;&#x5728;&#x6b63;&#x78ba;&#x7b54;&#x6848;&#x6642;&#x5275;&#x5efa;&#x58a8;&#x6ef4;&#x6548;&#x679c;
                             createInkDrop(btn);
                             handleCorrectAnswer(btn);
                         } else {
                             // &#x932f;&#x8aa4;&#x6642;&#x4e0d;&#x5275;&#x5efa;&#x58a8;&#x6ef4;
                             handleIncorrectAnswer(btn);
                         }
                     });
                     
                     optionsContainer.appendChild(btn);
                 });
             }
             
             function handleCorrectAnswer(btn) {
                 canSelect = false;
                 correctAnswers++;
                 
                 // &#x6dfb;&#x52a0;&#x6b63;&#x786e;&#x6548;&#x679c;
                 btn.classList.add('correct');
                 
                 // &#x4e0d;&#x518d;&#x986f;&#x793a;&#x53cd;&#x994b;&#x6587;&#x5b57;
                 if (feedback) {
                     feedback.textContent = '';
                     feedback.className = 'mt-0 text-center h-0 text-lg';
                 }
                 
                 // &#x6dfb;&#x52a0;&#x5f53;&#x524d;&#x5b57;&#x7b26;&#x5230;&#x5df2;&#x56de;&#x7b54;&#x7684;&#x5b57;&#x7b26;&#x5217;&#x8868;
                 lastAnsweredChars.push(content[currentPosition]);
                 
                 // &#x4fdd;&#x5b58;&#x5f53;&#x524d;&#x4f4d;&#x7f6e;
                 const savedPosition = currentPosition;
                 
                 // &#x68c0;&#x67e5;&#x5e76;&#x6dfb;&#x52a0;&#x540e;&#x7eed;&#x6807;&#x70b9;&#x7b26;&#x53f7;
                 currentPosition++;
                 while (currentPosition &lt; content.length &amp;&amp; isPunctuation(content[currentPosition])) {
                     // &#x5c06;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x4e5f;&#x6dfb;&#x52a0;&#x5230;&#x5df2;&#x56de;&#x7b54;&#x5217;&#x8868;
                     lastAnsweredChars.push(content[currentPosition]);
                     currentPosition++;
                 }
                 
                 // &#x5982;&#x679c;&#x8d85;&#x51fa;&#x6700;&#x5927;&#x663e;&#x793a;&#x5b57;&#x6570;&#x9650;&#x5236;&#xff0c;&#x79fb;&#x9664;&#x6700;&#x65e9;&#x7684;&#x5b57;&#x7b26;
                 while (lastAnsweredChars.length &gt; MAX_DISPLAYED_CHARS) {
                     lastAnsweredChars.shift();
                 }
                 
                 // &#x66f4;&#x65b0;&#x5df2;&#x56de;&#x7b54;&#x5b57;&#x7b26;&#x663e;&#x793a;
                 const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                 if (lastAnsweredCharsElem) {
                     // &#x6784;&#x5efa;HTML&#x5185;&#x5bb9;&#xff0c;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x975e;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x5b57;&#x7b26;&#x4f7f;&#x7528;&#x7279;&#x6b8a;&#x6837;&#x5f0f;
                     if (lastAnsweredChars.length &gt; 0) {
                         let htmlContent = '';
                         
                         // &#x627e;&#x51fa;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x975e;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x5b57;&#x7b26;&#x7684;&#x7d22;&#x5f15;
                         let lastNonPunctIndex = -1;
                         for (let i = lastAnsweredChars.length - 1; i &gt;= 0; i--) {
                             if (!isPunctuation(lastAnsweredChars[i])) {
                                 lastNonPunctIndex = i;
                                 break;
                             }
                         }
                         
                         // &#x6784;&#x5efa;HTML&#x5185;&#x5bb9;
                         for (let i = 0; i &lt; lastAnsweredChars.length; i++) {
                             // &#x5982;&#x679c;&#x662f;&#x6700;&#x540e;&#x4e00;&#x4e2a;&#x975e;&#x6807;&#x70b9;&#x7b26;&#x53f7;&#x5b57;&#x7b26;&#xff0c;&#x52a0;&#x7c97;&#x653e;&#x5927;
                             if (i === lastNonPunctIndex) {
                                 htmlContent += `&lt;span class="text-2xl md:text-3xl font-bold"&gt;${lastAnsweredChars[i]}&lt;/span&gt;`;
                             } else {
                                 htmlContent += lastAnsweredChars[i];
                             }
                         }
                         
                         lastAnsweredCharsElem.innerHTML = htmlContent;
                     } else {
                         lastAnsweredCharsElem.innerHTML = '';
                     }
                 }
                 
                 // &#x589e;&#x52a0;&#x6210;&#x529f;&#x80cc;&#x8aa6;&#x5b57;&#x6578;&#x8a08;&#x6578;
                 if (!isPunctuation(content[savedPosition])) {
                     successfulChars++;
                     
                     // &#x6bcf;&#x6210;&#x529f;&#x80cc;&#x8aa6;50&#x5b57;&#xff0c;&#x6062;&#x5fa9;1&#x9ede;&#x751f;&#x547d;&#x503c;&#xff08;&#x4e0a;&#x9650;&#x70ba;3&#x9ede;&#xff09;
                     if (successfulChars % 50 === 0 &amp;&amp; lives &lt; 3) {
                         lives++;
                         updateLives();
                         
                         // &#x986f;&#x793a;&#x6062;&#x5fa9;&#x751f;&#x547d;&#x503c;&#x52d5;&#x756b;&#x6548;&#x679c;
                         const healEffect = document.createElement('div');
                         healEffect.className = 'fixed inset-0 pointer-events-none z-50 flex items-center justify-center';
                         healEffect.innerHTML = `&lt;div class="bg-green-500 bg-opacity-30 p-4 rounded-full text-white text-2xl font-bold animate-pulse"&gt;+1 &#x2764;&#xfe0f;&lt;/div&gt;`;
                         document.body.appendChild(healEffect);
                         
                         setTimeout(() =&gt; {
                             healEffect.remove();
                         }, 1500);
                     }
                 }
                 
                 updateDisplay();
                 canSelect = true;
             }
             
             function handleIncorrectAnswer(btn) {
                 // &#x6dfb;&#x52a0;&#x9519;&#x8bef;&#x6548;&#x679c;
                 btn.classList.add('incorrect');
                 
                 // &#x6263;&#x9664;&#x751f;&#x547d;&#x503c;
                 lives--;
                 updateLives();
                 
                 // &#x589e;&#x52a0;&#x932f;&#x8aa4;&#x8a08;&#x6578;
                 wrongAnswersCount++;
                 
                 // &#x68c0;&#x67e5;&#x6e38;&#x620f;&#x662f;&#x5426;&#x7ed3;&#x675f;
                 if (lives &lt;= 0) {
                     gameOver();
                     return;
                 }
                 
                 // &#x4e0d;&#x518d;&#x986f;&#x793a;&#x53cd;&#x994b;&#x6587;&#x5b57;
                 if (feedback) {
                     feedback.textContent = '';
                     feedback.className = 'mt-0 text-center h-0 text-lg';
                 }
                 
                 // &#x6dfb;&#x52a0;&#x5c4f;&#x5e55;&#x9707;&#x52a8;&#x6548;&#x679c;
                 document.body.classList.add('screen-shake');
                 setTimeout(() =&gt; {
                     document.body.classList.remove('screen-shake');
                 }, 500);
                 
                 // &#x5ef6;&#x8fdf;&#x79fb;&#x9664;&#x6548;&#x679c;
                 setTimeout(() =&gt; {
                     btn.classList.remove('incorrect');
                 }, 1000);
             }
             
             function updateLives() {
                 const livesContainer = document.getElementById('lives');
                 if (!livesContainer) return;
                 
                 livesContainer.innerHTML = '';
                 
                 for (let i = 0; i &lt; lives; i++) {
                     const heart = document.createElement('i');
                     heart.className = 'fas fa-heart mx-0.5 animate-pulse';
                     livesContainer.appendChild(heart);
                 }
                 
                 for (let i = 0; i &lt; 3 - lives; i++) {
                     const emptyHeart = document.createElement('i');
                     emptyHeart.className = 'far fa-heart mx-0.5 text-gray-400 dark:text-gray-600';
                     livesContainer.appendChild(emptyHeart);
                 }
             }
             
             function gameOver() {
                 // &#x505c;&#x6b62;&#x904a;&#x6232;
                 canSelect = false;
                 stopStopwatch();
                 
                 // &#x66f4;&#x65b0;&#x6309;&#x9215;&#x72c0;&#x614b;&#x70ba;&#x300c;&#x5931;&#x6557;&#x300d;&#xff0c;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                 updateGameControlButtons('failed');
                 
                 // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x5167;&#x5bb9;
                 if (gameContent) {
                     gameContent.classList.add('hidden');
                 }
                 
                 // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;&#x4e26;&#x66f4;&#x65b0;&#x6210;&#x5c31;
                 const progressBar = document.getElementById('progress-bar');
                 if (progressBar) {
                     const progressWidth = progressBar.style.width || '0%';
                     const progressPercent = parseFloat(progressWidth);
                     
                     // &#x5982;&#x679c;&#x9032;&#x5ea6;&#x8d85;&#x904e;50%&#xff0c;&#x8a18;&#x9304;&#x70ba;&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;
                     if (progressPercent &gt;= 50) {
                         // &#x589e;&#x52a0;&#x5931;&#x6557;&#x8a08;&#x6578;
                         globalStats.failAfterHalfwayCount = (globalStats.failAfterHalfwayCount || 0) + 1;
                         
                         // &#x66f4;&#x65b0;&#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                         const failCount = globalStats.failAfterHalfwayCount;
                         
                         if (failCount &gt;= 100 &amp;&amp; globalStats.achievements.defeatLevel &lt; 5) {
                             globalStats.achievements.defeatLevel = 5; // &#x5fc3;&#x5982;&#x6b62;&#x6c34; (100&#x6b21;)
                         } else if (failCount &gt;= 50 &amp;&amp; globalStats.achievements.defeatLevel &lt; 4) {
                             globalStats.achievements.defeatLevel = 4; // &#x5c0f;&#x5f37;&#x662f;&#x6211; (50&#x6b21;)
                         } else if (failCount &gt;= 30 &amp;&amp; globalStats.achievements.defeatLevel &lt; 3) {
                             globalStats.achievements.defeatLevel = 3; // &#x92fc;&#x9435;&#x610f;&#x5fd7; (30&#x6b21;)
                         } else if (failCount &gt;= 5 &amp;&amp; globalStats.achievements.defeatLevel &lt; 2) {
                             globalStats.achievements.defeatLevel = 2; // &#x5805;&#x6bc5; (5&#x6b21;)
                         } else if (failCount &gt;= 1 &amp;&amp; globalStats.achievements.defeatLevel &lt; 1) {
                             globalStats.achievements.defeatLevel = 1; // &#x521d;&#x5617;&#x6557;&#x7e3e; (1&#x6b21;)
                         }
                         
                         console.log(`&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;&#xff0c;&#x7e3d;&#x8a08;: ${failCount}&#x6b21;&#xff0c;&#x6210;&#x5c31;&#x7b49;&#x7d1a;: ${globalStats.achievements.defeatLevel}`);
                         
                         // &#x4fdd;&#x5b58;&#x66f4;&#x65b0;&#x7684;&#x7d71;&#x8a08;&#x6578;&#x64da;
                         saveStats();
                     }
                 }
                 
                 // &#x8a08;&#x7b97;&#x5df2;&#x5b8c;&#x6210;&#x5b57;&#x7b26;&#x7684;&#x7d93;&#x9a57;&#x503c;&#x734e;&#x52f5;
                 const progressText = document.getElementById('progress-text');
                 if (progressText) {
                     const progressInfo = progressText.textContent.split('/');
                     if (progressInfo.length === 2) {
                         const completedChars = parseInt(progressInfo[0].trim());
                         if (!isNaN(completedChars) &amp;&amp; completedChars &gt; 0) {
                             const expGained = completedChars * 2;
                             addExperience(expGained);
                             console.log(`&#x904a;&#x6232;&#x5931;&#x6557;&#xff0c;&#x7372;&#x5f97;&#x7d93;&#x9a57;&#x503c;: ${expGained} (&#x5df2;&#x5b8c;&#x6210;${completedChars}&#x5b57;&#x7b26;)`);
                             
                             // &#x986f;&#x793a;&#x7372;&#x5f97;&#x7684;&#x7d93;&#x9a57;&#x503c;&#x8a0a;&#x606f;
                             const expNotification = document.createElement('div');
                             expNotification.className = 'fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 py-2 px-4 rounded-lg shadow-lg z-[9999] flex items-center';
                             expNotification.style.animation = 'fadeInOut 3s ease-in-out forwards';
                             expNotification.innerHTML = `
                                 &lt;i class="fas fa-star text-amber-500 dark:text-amber-300 mr-2"&gt;&lt;/i&gt;
                                 &lt;div&gt;&#x7372;&#x5f97; &lt;span class="font-bold"&gt;${expGained}&lt;/span&gt; &#x7d93;&#x9a57;&#x503c;&lt;/div&gt;
                             `;
                             document.body.appendChild(expNotification);
                             setTimeout(() =&gt; {
                                 expNotification.remove();
                             }, 3000);
                         }
                     }
                 }
                 
                 // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x5bb9;&#x5668;
                 if (!optionsContainer) {
                     console.error("&#x9078;&#x9805;&#x5bb9;&#x5668;&#x672a;&#x627e;&#x5230;&#xff0c;&#x7121;&#x6cd5;&#x986f;&#x793a;&#x904a;&#x6232;&#x7d50;&#x675f;&#x754c;&#x9762;");
                     return;
                 }
                 
                 // &#x91cd;&#x7f6e;&#x5bb9;&#x5668;&#x6a23;&#x5f0f;
                 optionsContainer.innerHTML = '';
                 optionsContainer.className = 'flex justify-center items-center mb-4';
                 
                 // &#x5275;&#x5efa;&#x904a;&#x6232;&#x7d50;&#x675f;&#x8996;&#x5716;&#x7684;&#x5bb9;&#x5668;
                 const gameOverContainer = document.createElement('div');
                 gameOverContainer.id = 'game-over-container';
                 gameOverContainer.className = 'text-center bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md w-4/5';
                 
                 // &#x8a2d;&#x7f6e;&#x7d50;&#x679c;&#x4fe1;&#x606f;
                 gameOverContainer.innerHTML = `
                     &lt;p class="text-2xl text-red-600 dark:text-red-500 mb-6 font-bold"&gt;&#x53ef;&#x60dc;&#xff01;&lt;/p&gt;
                     &lt;div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-5"&gt;
                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x6642;&#x9593;: ${timerElement ? timerElement.textContent : "00:00.0"}&lt;/p&gt;
                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x932f;&#x8aa4;&#x6b21;&#x6578;: ${wrongAnswersCount}&lt;/p&gt;
                     &lt;/div&gt;
                     &lt;div id="game-over-buttons" class="flex justify-center gap-6 mt-4"&gt;
                         &lt;!-- &#x6309;&#x9215;&#x5c07;&#x901a;&#x904e;JS&#x52d5;&#x614b;&#x6dfb;&#x52a0; --&gt;
                     &lt;/div&gt;
                 `;
                 
                 // &#x6dfb;&#x52a0;&#x5230;DOM
                 optionsContainer.appendChild(gameOverContainer);
                 
                 // &#x5275;&#x5efa;&#x6309;&#x9215;
                 const buttonsContainer = document.getElementById('game-over-buttons');
                 
                 // 1. &#x5206;&#x4eab;&#x6309;&#x9215;
                 const shareButton = document.createElement('button');
                 shareButton.id = 'share-failed-btn';
                 shareButton.className = 'w-12 h-12 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors flex items-center justify-center text-xl';
                 shareButton.innerHTML = '&lt;i class="fas fa-share-alt"&gt;&lt;/i&gt;';
                 buttonsContainer.appendChild(shareButton);
                 
                 // 2. &#x91cd;&#x4f86;&#x6309;&#x9215;
                 const restartButton = document.createElement('button');
                 restartButton.id = 'restart-failed-btn';
                 restartButton.className = 'w-12 h-12 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors flex items-center justify-center text-xl';
                 restartButton.innerHTML = '&lt;i class="fas fa-redo"&gt;&lt;/i&gt;';
                 buttonsContainer.appendChild(restartButton);
                
                 
                 // &#x6dfb;&#x52a0;&#x9707;&#x52d5;&#x6548;&#x679c;
                 document.body.classList.add('game-over-shake');
                 setTimeout(() =&gt; {
                     document.body.classList.remove('game-over-shake');
                 }, 1000);
                 
                 // &#x5b9a;&#x7fa9;&#x516c;&#x5171;&#x7684;&#x904a;&#x6232;&#x91cd;&#x7f6e;&#x908f;&#x8f2f;
                 function resetGameState() {
                     console.log("&#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;");
                     currentPosition = 0;
                     correctAnswers = 0;
                     lives = 3;
                     successfulChars = 0;
                     wrongAnswersCount = 0;
                     lastAnsweredChars = [];
                     
                     const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                     if (lastAnsweredCharsElem) {
                         lastAnsweredCharsElem.textContent = '';
                     }
                     
                     canSelect = true;
                     isPaused = false;
                     hasPaused = false;
                     updateLives();
                     
                     if (feedback) {
                         feedback.textContent = '';
                     }
                     
                     // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                     const progressText = document.getElementById('progress-text');
                     const progressBar = document.getElementById('progress-bar');
                     
                     if (progressText) {
                         progressText.textContent = `0 / ${totalNonPunctChars}`;
                     }
                     
                     if (progressBar) {
                         progressBar.style.width = '0%';
                     }
                     
                     // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x5bb9;&#x5668;
                     if (optionsContainer) {
                         optionsContainer.innerHTML = '';
                         optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                     }
                 }
                 
                 // === &#x76f4;&#x63a5;&#x6dfb;&#x52a0;&#x4e8b;&#x4ef6;&#x8655;&#x7406;&#x5668; ===
                 
                 // 1. &#x5206;&#x4eab;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                 shareButton.onclick = function() {
                     console.log("&#x5206;&#x4eab;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                     
                     // &#x986f;&#x793a;&#x52a0;&#x8f09;&#x4e2d;&#x52d5;&#x756b;
                     const loadingOverlay = document.createElement('div');
                     loadingOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[101]';
                     loadingOverlay.innerHTML = `
                         &lt;div class="bg-white dark:bg-gray-800 p-6 rounded-lg flex flex-col items-center"&gt;
                             &lt;i class="fas fa-spinner fa-spin text-3xl text-primary mb-3"&gt;&lt;/i&gt;
                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x6b63;&#x5728;&#x751f;&#x6210;&#x5206;&#x4eab;&#x5716;&#x7247;...&lt;/p&gt;
                         &lt;/div&gt;
                     `;
                     document.body.appendChild(loadingOverlay);
                     
                     // &#x7372;&#x53d6;&#x6bb5;&#x843d;&#x7d22;&#x5f15;
                     const paragraphInfo = window.selectedParagraphIndices || [];
                     
                     // &#x5275;&#x5efa;&#x5206;&#x4eab;&#x5361;&#x7247;
                     const selectedPassage = passages[currentPassageKey];
                     if (selectedPassage) {
                         createShareCard(
                             selectedPassage.title, 
                             selectedPassage.author, 
                             timerElement ? timerElement.textContent : "00:00.0", 
                             wrongAnswersCount, 
                             totalNonPunctChars, 
                             [], 
                             paragraphInfo
                         ).then(imageData =&gt; {
                             document.body.removeChild(loadingOverlay);
                             handleShare(imageData);
                         }).catch(err =&gt; {
                             console.error('&#x5275;&#x5efa;&#x5206;&#x4eab;&#x5361;&#x7247;&#x5931;&#x6557;:', err);
                             document.body.removeChild(loadingOverlay);
                             alert('&#x751f;&#x6210;&#x5206;&#x4eab;&#x5716;&#x7247;&#x5931;&#x6557;&#xff0c;&#x8acb;&#x7a0d;&#x5f8c;&#x518d;&#x8a66;&#x3002;');
                         });
                     } else {
                         document.body.removeChild(loadingOverlay);
                         alert('&#x7121;&#x6cd5;&#x7372;&#x53d6;&#x7576;&#x524d;&#x7bc7;&#x7ae0;&#x4fe1;&#x606f;&#xff0c;&#x5206;&#x4eab;&#x5931;&#x6557;&#x3002;');
                     }
                 };
                 
                 // 2. &#x91cd;&#x4f86;&#x6309;&#x9215;&#x4e8b;&#x4ef6; - &#x4fee;&#x5fa9;&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x529f;&#x80fd;
                 restartButton.onclick = async function() {
                     console.log("&#x91cd;&#x4f86;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                     
                     try {
                         // &#x986f;&#x793a;&#x8f09;&#x5165;&#x52d5;&#x756b;
                         await showLoadingAnimation();
                         
                         // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                         currentPosition = 0;
                         correctAnswers = 0;
                         wrongAnswersCount = 0;
                         lives = 3;
                         successfulChars = 0;
                         lastAnsweredChars = [];
                         
                         // &#x91cd;&#x7f6e;UI&#x5143;&#x7d20;
                         const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                         if (lastAnsweredCharsElem) {
                             lastAnsweredCharsElem.textContent = '';
                         }
                         
                         updateLives();
                         
                         if (completedText) {
                             completedText.textContent = '';
                         }
                         
                         if (feedback) {
                             feedback.textContent = '';
                             feedback.className = 'mt-4 text-center h-6 text-lg';
                         }
                         
                         // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                         const progressText = document.getElementById('progress-text');
                         const progressBar = document.getElementById('progress-bar');
                         
                         if (progressText) {
                             progressText.textContent = `0 / ${totalNonPunctChars}`;
                         }
                         
                         if (progressBar) {
                             progressBar.style.width = '0%';
                         }
                         
                         // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                         canSelect = true;
                         isPaused = false;
                         hasPaused = false; // &#x91cd;&#x7f6e;&#x66ab;&#x505c;&#x6a19;&#x8a18;
                         
                         // &#x91cd;&#x7f6e;&#x79d2;&#x8868;
                         stopStopwatch();
                         elapsedTimeBeforePause = 0; // &#x91cd;&#x7f6e;&#x7d2f;&#x8a08;&#x6642;&#x9593;
                         if (timerElement) {
                             timerElement.textContent = "00:00.0";
                         }
                         
                         // &#x986f;&#x793a;&#x958b;&#x59cb;&#x5c4f;&#x5e55;
                         if (gameContent &amp;&amp; gameStartScreen) {
                             gameContent.classList.add('hidden');
                             gameStartScreen.classList.remove('hidden');
                         }
                         
                         // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x4e26;&#x6062;&#x5fa9;&#x539f;&#x59cb;&#x7684;&#x7db2;&#x683c;&#x4f48;&#x5c40;
                         if (optionsContainer) {
                             optionsContainer.innerHTML = '';
                             optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                         }
                         
                         console.log("&#x904a;&#x6232;&#x5df2;&#x91cd;&#x7f6e;&#xff0c;&#x8fd4;&#x56de;&#x958b;&#x59cb;&#x754c;&#x9762;");
                     } catch (error) {
                         console.error("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x6642;&#x51fa;&#x932f;:", error);
                         alert("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                     }
                 };
                 
                 // 3. &#x8fd4;&#x56de;&#x6309;&#x9215;&#x4e8b;&#x4ef6; - &#x5fb9;&#x5e95;&#x91cd;&#x5beb;&#xff0c;&#x4e26;&#x6dfb;&#x52a0;&#x9801;&#x9762;&#x6efe;&#x52d5;&#x81f3;&#x9802;&#x90e8;&#x529f;&#x80fd;
                 returnButton.onclick = function() {
                     console.log("&#x8fd4;&#x56de;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                     
                     try {
                         // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                         resetGameState();
                         
                         // &#x7372;&#x53d6;&#x9700;&#x8981;&#x64cd;&#x4f5c;&#x7684;&#x5143;&#x7d20;
                         const userProfileContainer = document.getElementById('user-profile-container');
                         const gamePage = document.getElementById('game-page');
                         
                         // &#x7c21;&#x55ae;&#x5730;&#x6aa2;&#x67e5;&#x5143;&#x7d20;&#x662f;&#x5426;&#x5b58;&#x5728;
                         if (!userProfileContainer || !gamePage) {
                             console.error("&#x672a;&#x627e;&#x5230;&#x5fc5;&#x8981;&#x7684;DOM&#x5143;&#x7d20;");
                             alert("&#x8fd4;&#x56de;&#x5931;&#x6557;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                             return;
                         }
                         
                         // ===== &#x5f37;&#x5236;&#x5fb9;&#x5e95;&#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762; =====
                         console.log("&#x958b;&#x59cb;&#x57f7;&#x884c;&#x754c;&#x9762;&#x5207;&#x63db;");
                         
                         // &#x5148;&#x5fb9;&#x5e95;&#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762; - &#x4f7f;&#x7528;&#x591a;&#x91cd;&#x65b9;&#x5f0f;&#x78ba;&#x4fdd;&#x96b1;&#x85cf;
                         gamePage.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important;';
                         gamePage.classList.add('hidden');
                         
                         // &#x79fb;&#x9664;&#x4efb;&#x4f55;&#x53ef;&#x80fd;&#x986f;&#x793a;&#x904a;&#x6232;&#x754c;&#x9762;&#x7684;&#x985e;&#x540d;
                         gamePage.classList.remove('block', 'flex', 'visible', 'opacity-100');
                         
                         // ===== &#x5f37;&#x5236;&#x5fb9;&#x5e95;&#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868; =====
                         
                         // &#x78ba;&#x4fdd;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868;&#x986f;&#x793a;
                         userProfileContainer.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;';
                         userProfileContainer.classList.remove('hidden');
                         
                         // &#x6dfb;&#x52a0;&#x986f;&#x793a;&#x985e;&#x540d;
                         userProfileContainer.classList.add('block');
                         
                         // &#x78ba;&#x4fdd;&#x66f8;&#x672c;&#x9801;&#x9762;&#x56de;&#x5230;&#x521d;&#x59cb;&#x72c0;&#x614b;
                         const bookPage = document.querySelector('.page');
                         if (bookPage &amp;&amp; bookPage.classList.contains('turned')) {
                             bookPage.classList.remove('turned');
                         }
                         
                         // **&#x65b0;&#x529f;&#x80fd;** &#x6efe;&#x52d5;&#x9801;&#x9762;&#x81f3;&#x9802;&#x90e8;
                         window.scrollTo({
                             top: 0,
                             behavior: 'smooth'
                         });
                         
                         // &#x4f7f;&#x7528;&#x5ef6;&#x9072;&#x6aa2;&#x67e5;&#x5143;&#x7d20;&#x6700;&#x7d42;&#x72c0;&#x614b;
                         setTimeout(() =&gt; {
                             // &#x6aa2;&#x67e5;&#x72c0;&#x614b;&#x4e26;&#x8a18;&#x9304;
                             console.log("&#x754c;&#x9762;&#x5207;&#x63db;&#x7d50;&#x679c;&#x6aa2;&#x67e5;:");
                             console.log("- &#x904a;&#x6232;&#x754c;&#x9762;&#x986f;&#x793a;&#x72c0;&#x614b;:", window.getComputedStyle(gamePage).display);
                             console.log("- &#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868;&#x986f;&#x793a;&#x72c0;&#x614b;:", window.getComputedStyle(userProfileContainer).display);
                             
                             // &#x5f37;&#x5236;&#x518d;&#x6b21;&#x78ba;&#x8a8d;
                             if (window.getComputedStyle(gamePage).display !== 'none') {
                                 console.warn("&#x904a;&#x6232;&#x754c;&#x9762;&#x4ecd;&#x672a;&#x96b1;&#x85cf;&#xff0c;&#x518d;&#x6b21;&#x5617;&#x8a66;...");
                                 gamePage.style.cssText = 'display: none !important; visibility: hidden !important;';
                             }
                             
                             if (window.getComputedStyle(userProfileContainer).display !== 'block') {
                                 console.warn("&#x7528;&#x6236;&#x8cc7;&#x6599;&#x8868;&#x672a;&#x986f;&#x793a;&#xff0c;&#x518d;&#x6b21;&#x5617;&#x8a66;...");
                                 userProfileContainer.style.cssText = 'display: block !important; visibility: visible !important;';
                             }
                             
                             // &#x518d;&#x6b21;&#x78ba;&#x4fdd;&#x9801;&#x9762;&#x6efe;&#x52d5;&#x81f3;&#x9802;&#x90e8;
                             window.scrollTo({
                                 top: 0,
                                 behavior: 'smooth'
                             });
                         }, 50);
                         
                         console.log("&#x754c;&#x9762;&#x5207;&#x63db;&#x6307;&#x4ee4;&#x5df2;&#x57f7;&#x884c;");
                     } catch (error) {
                         console.error("&#x8fd4;&#x56de;&#x6309;&#x9215;&#x8655;&#x7406;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                         alert("&#x8fd4;&#x56de;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                     }
                 };
             }
             
             // &#x986f;&#x793a;&#x58a8;&#x6c34;&#x64f4;&#x6563;&#x8f09;&#x5165;&#x52d5;&#x756b;
             function showLoadingAnimation() {
                 // &#x5275;&#x5efa;&#x5168;&#x5c4f;&#x8986;&#x84cb;&#x5c64;&#x548c;&#x58a8;&#x9ede;&#x5bb9;&#x5668;
                 const loadingContainer = document.createElement('div');
                 loadingContainer.id = 'loading-container';
                 loadingContainer.style.position = 'fixed';
                 loadingContainer.style.top = '0';
                 loadingContainer.style.left = '0';
                 loadingContainer.style.width = '100%';
                 loadingContainer.style.height = '100%';
                 loadingContainer.style.backgroundColor = 'rgba(245, 242, 234, 1)'; // &#x5b8c;&#x5168;&#x4e0d;&#x900f;&#x660e;&#x80cc;&#x666f;
                 loadingContainer.style.zIndex = '9999'; // &#x78ba;&#x4fdd;&#x5728;&#x6700;&#x4e0a;&#x5c64;
                 loadingContainer.style.display = 'flex';
                 loadingContainer.style.justifyContent = 'center';
                 loadingContainer.style.alignItems = 'center';
                 loadingContainer.style.opacity = '0';
                 loadingContainer.style.animation = 'fadeIn 0.15s ease forwards';
                 loadingContainer.innerHTML = `
                     &lt;div id="main-splash"&gt;&lt;/div&gt;
                 `;
                 document.body.appendChild(loadingContainer);
         
                 // &#x52d5;&#x756b;&#x7d50;&#x675f;&#x5f8c;&#x8fd4;&#x56de;
                 return new Promise(resolve =&gt; {
                     setTimeout(function() {
                         hideLoadingAnimation();
                         resolve();
                     }, 900);
                 });
             }
         
             function hideLoadingAnimation() {
                 const container = document.getElementById('loading-container');
                 if (container) {
                     container.classList.add('fade-out');
                     // &#x52a0;&#x5feb;&#x6de1;&#x51fa;&#x6642;&#x9593;
                     setTimeout(function() {
                         container.remove();
                     }, 200);
                 }
             }            
         
             // &#x5275;&#x5efa;&#x7d19;&#x5c51;&#x6176;&#x795d;&#x6548;&#x679c;
             function createConfetti() {
                 // &#x52a0;&#x8f09; canvas-confetti &#x5eab;
                 const script = document.createElement('script');
                 script.src = 'https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js';
                 document.head.appendChild(script);
                 
                 // &#x5efa;&#x7acb; canvas &#x5143;&#x7d20;
                 const canvas = document.createElement('canvas');
                 canvas.id = 'confetti-canvas';
                 document.body.appendChild(canvas);
                 
                 script.onload = function() {
                     // &#x8a2d;&#x7f6e; confetti
                     const myConfetti = confetti.create(canvas, {
                         resize: true,
                         useWorker: true
                     });
                     
                     // &#x958b;&#x59cb;&#x7d19;&#x5c51;&#x6548;&#x679c;
                     
                     // &#x7b2c;&#x4e00;&#x6ce2;&#xff1a;&#x5f9e;&#x9802;&#x90e8;&#x5c04;&#x51fa;
                     myConfetti({
                         particleCount: 180,
                         spread: 100,
                         origin: { y: 0 },
                         colors: ['#5D5CDE', '#FF8C00', '#4CAF50', '#FF5252', '#FFC107', '#2196F3'],
                         startVelocity: 30,
                         gravity: 0.7,
                         scalar: 0.9
                     });
                     
                     // &#x5f9e;&#x5de6;&#x53f3;&#x5169;&#x5074;&#x5c04;&#x51fa;
                     setTimeout(() =&gt; {
                         // &#x5de6;&#x5074;&#x7d19;&#x5c51;
                         myConfetti({
                             particleCount: 100,
                             angle: 60,
                             spread: 55,
                             origin: { x: 0, y: 0.5 },
                             colors: ['#5D5CDE', '#4CAF50', '#FFC107', '#2196F3']
                         });
                         
                         // &#x53f3;&#x5074;&#x7d19;&#x5c51;
                         myConfetti({
                             particleCount: 100,
                             angle: 120,
                             spread: 55,
                             origin: { x: 1, y: 0.5 },
                             colors: ['#FF8C00', '#FF5252', '#E91E63', '#9C27B0']
                         });
                     }, 700);
                     
                     // &#x7b2c;&#x4e8c;&#x6ce2;&#x7d19;&#x5c51; - &#x5f9e;&#x5e95;&#x90e8;&#x5411;&#x4e0a;&#x5c04;&#x51fa;
                     setTimeout(() =&gt; {
                         myConfetti({
                             particleCount: 120,
                             spread: 120,
                             origin: { y: 0.9 },
                             startVelocity: 45,
                             gravity: 1,
                             scalar: 0.7
                         });
                     }, 1500);
                     
                     // &#x7b2c;&#x4e09;&#x6ce2; - &#x7206;&#x70b8;&#x6548;&#x679c;
                     setTimeout(() =&gt; {
                         myConfetti({
                             particleCount: 150,
                             spread: 180,
                             origin: { x: 0.5, y: 0.5 }
                         });
                     }, 2500);
                     
                     // &#x6e05;&#x7406;&#x8cc7;&#x6e90;
                     setTimeout(() =&gt; {
                         canvas.remove();
                     }, 8000);
                 };
             }
             
             // &#x5275;&#x5efa;&#x7d50;&#x679c;&#x5206;&#x4eab;&#x5361;&#x7247;
             function createShareCard(passageTitle, author, finalTime, wrongAnswersCount, totalNonPunctChars, achievements, paragraphIndices) {
                 return new Promise((resolve, reject) =&gt; {
                     try {
                         // &#x5275;&#x5efa;&#x4e00;&#x500b;&#x96e2;&#x5c4f;&#x7684;&#x5361;&#x7247;&#x5143;&#x7d20;&#x7528;&#x65bc;&#x622a;&#x5716;
                         const card = document.createElement('div');
                         card.id = 'share-card';
                         // &#x5f37;&#x5236;&#x4f7f;&#x7528;&#x6df1;&#x8272;&#x6a21;&#x5f0f;&#x6a23;&#x5f0f;&#xff0c;&#x7121;&#x8ad6;&#x7576;&#x524d;&#x61c9;&#x7528;&#x6a21;&#x5f0f;&#x5982;&#x4f55;
                         card.className = 'fixed top-0 left-0 bg-gray-800 border-8 border-amber-900 p-6 rounded-lg shadow-xl';
                         card.style.width = '350px';
                         card.style.zIndex = '-100'; // &#x78ba;&#x4fdd;&#x5728;&#x5c4f;&#x5e55;&#x5916;&#x4e0d;&#x53ef;&#x898b;
                         
                         // &#x8655;&#x7406;&#x6a19;&#x984c;&#xff0c;&#x6dfb;&#x52a0;&#x6bb5;&#x843d;&#x7bc4;&#x570d;&#x4fe1;&#x606f;
                         let displayTitle = passageTitle;
                         let rangeText = "";
                         
                         // &#x53d6;&#x5f97;&#x5168;&#x5c40;&#x4fdd;&#x5b58;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#xff0c;&#x5982;&#x679c;&#x63d0;&#x4f9b;&#x7684;&#x53c3;&#x6578;&#x7121;&#x6548;
                         let indicesToUse = [];
                         if (paragraphIndices &amp;&amp; Array.isArray(paragraphIndices) &amp;&amp; paragraphIndices.length &gt; 0) {
                             indicesToUse = paragraphIndices;
                             console.log("&#x4f7f;&#x7528;&#x63d0;&#x4f9b;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;:", indicesToUse);
                         } else if (window.selectedParagraphIndices &amp;&amp; Array.isArray(window.selectedParagraphIndices) &amp;&amp; window.selectedParagraphIndices.length &gt; 0) {
                             indicesToUse = window.selectedParagraphIndices;
                             console.log("&#x4f7f;&#x7528;&#x5168;&#x5c40;&#x4fdd;&#x5b58;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;:", indicesToUse);
                         } else {
                             console.log("&#x672a;&#x627e;&#x5230;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x8cc7;&#x8a0a;");
                         }
                         
                         // &#x5982;&#x679c;&#x6709;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x6578;&#x7d44;&#xff0c;&#x69cb;&#x5efa;&#x986f;&#x793a;&#x7bc4;&#x570d;
                         if (indicesToUse.length &gt; 0) {
                             const selectedPassage = passages[currentPassageKey];
                             if (selectedPassage) {
                                 // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x662f;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;
                                 const isFullPassage = indicesToUse.length &gt;= selectedPassage.paragraphs.length;
                                 
                                 if (!isFullPassage) {
                                     // &#x5c0d;&#x6bb5;&#x843d;&#x7d22;&#x5f15;&#x9032;&#x884c;&#x6392;&#x5e8f;
                                     indicesToUse.sort((a, b) =&gt; a - b);
                                     
                                     // &#x78ba;&#x5b9a;&#x662f;&#x5426;&#x662f;&#x9023;&#x7e8c;&#x7684;&#x6bb5;&#x843d;
                                     let isConsecutive = true;
                                     for (let i = 0; i &lt; indicesToUse.length - 1; i++) {
                                         if (indicesToUse[i + 1] !== indicesToUse[i] + 1) {
                                             isConsecutive = false;
                                             break;
                                         }
                                     }
                                     
                                     if (indicesToUse.length === 1) {
                                         rangeText = `&#x7b2c;${indicesToUse[0] + 1}&#x6bb5;`;
                                     } else if (isConsecutive) {
                                         rangeText = `&#x7b2c;${indicesToUse[0] + 1}-${indicesToUse[indicesToUse.length - 1] + 1}&#x6bb5;`;
                                     } else {
                                         rangeText = `&#x7b2c;${indicesToUse.map(idx =&gt; idx + 1).join('&#x3001;')}&#x6bb5;`;
                                     }
                                     
                                     displayTitle = `${passageTitle}&#xff08;${rangeText}&#xff09;`;
                                     console.log("&#x751f;&#x6210;&#x7684;&#x986f;&#x793a;&#x6a19;&#x984c;:", displayTitle);
                                 }
                             }
                         }
                         
                         // &#x751f;&#x6210;&#x6210;&#x5c31;&#x5fbd;&#x7ae0;HTML - &#x4fee;&#x6b63;&#x5370;&#x7ae0;&#x5167;&#x6587;&#x5b57;&#x5c45;&#x4e2d;&#x554f;&#x984c;
                         let achievementsHTML = '';
                         if (achievements &amp;&amp; achievements.length &gt; 0) {
                             achievementsHTML = `
                             &lt;div class="mt-4 mb-3 border-t border-gray-600 pt-3"&gt;
                                 &lt;p class="text-sm font-medium text-amber-400 mb-2"&gt;&#x7372;&#x5f97;&#x6210;&#x5c31;:&lt;/p&gt;
                                 &lt;div class="flex flex-wrap justify-center mb-2" style="margin: 0 -8px;"&gt;
                             `;
                             
                             // &#x6dfb;&#x52a0;&#x6bcf;&#x500b;&#x6210;&#x5c31;&#x5fbd;&#x7ae0; - &#x6539;&#x9032;&#x6587;&#x5b57;&#x5c45;&#x4e2d;&#x548c;&#x908a;&#x8ddd;
                             achievements.forEach(achievement =&gt; {
                                 // &#x63d0;&#x53d6;SVG
                                 const svg = achievement.svg;
                                 
                                 achievementsHTML += `
                                 &lt;div style="width: 70px; height: 70px; position: relative; display: inline-flex; justify-content: center; align-items: center; transform: rotate(-5deg); margin: 4px;"&gt;
                                     &lt;div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"&gt;
                                         ${svg}
                                     &lt;/div&gt;
                                     &lt;div style="position: relative; z-index: 10; font-family: 'Noto Serif TC', serif; font-weight: bold; color: #fff; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100%;"&gt;
                                         &lt;span style="font-size: 10px; line-height: 1.2; text-align: center; width: 80%; display: block;"&gt;${achievement.title}&lt;/span&gt;
                                     &lt;/div&gt;
                                 &lt;/div&gt;`;
                             });
                             
                             achievementsHTML += `&lt;/div&gt;&lt;/div&gt;`;
                         }
                         
                         // &#x5361;&#x7247;&#x5167;&#x5bb9; - &#x4f7f;&#x7528;&#x6df1;&#x8272;&#x6a21;&#x5f0f;&#x7684;&#x6587;&#x5b57;&#x984f;&#x8272;
                         card.innerHTML = `
                             &lt;div class="relative"&gt;
                                 &lt;div class="text-center mb-3"&gt;
                                     &lt;h2 class="text-xl font-bold text-gray-100"&gt;${displayTitle}&lt;/h2&gt;
                                     &lt;p class="text-gray-400 text-sm"&gt;${author}&lt;/p&gt;
                                 &lt;/div&gt;
                                 
                                 &lt;div class="bg-gray-700 p-3 rounded-lg"&gt;
                                     &lt;div class="flex justify-between mb-1"&gt;
                                         &lt;span class="text-gray-300 text-sm"&gt;&#x5b8c;&#x6210;&#x6642;&#x9593;:&lt;/span&gt;
                                         &lt;span class="font-medium text-gray-200"&gt;${finalTime}&lt;/span&gt;
                                     &lt;/div&gt;
                                     &lt;div class="flex justify-between mb-1"&gt;
                                         &lt;span class="text-gray-300 text-sm"&gt;&#x932f;&#x8aa4;&#x6b21;&#x6578;:&lt;/span&gt;
                                         &lt;span class="font-medium text-gray-200"&gt;${wrongAnswersCount}&lt;/span&gt;
                                     &lt;/div&gt;
                                     &lt;div class="flex justify-between"&gt;
                                         &lt;span class="text-gray-300 text-sm"&gt;&#x7e3d;&#x5b57;&#x6578;:&lt;/span&gt;
                                         &lt;span class="font-medium text-gray-200"&gt;${totalNonPunctChars}&lt;/span&gt;
                                     &lt;/div&gt;
                                 &lt;/div&gt;
                                 
                                 ${achievementsHTML}
                                 
                                 &lt;div class="mt-3 text-center text-xs text-gray-400"&gt;
                                     &#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5; &#x00a9; ${new Date().getFullYear()}
                                 &lt;/div&gt;
                             &lt;/div&gt;
                         `;
                         
                         document.body.appendChild(card);
                         
                         // &#x7d66;&#x5143;&#x7d20;&#x4e00;&#x4e9b;&#x6642;&#x9593;&#x6e32;&#x67d3;
                         setTimeout(() =&gt; {
                             html2canvas(card, {
                                 backgroundColor: '#181818', // &#x5f37;&#x5236;&#x4f7f;&#x7528;&#x6df1;&#x8272;&#x80cc;&#x666f;
                                 scale: 2, // &#x9ad8;&#x89e3;&#x6790;&#x5ea6;
                                 logging: false,
                                 allowTaint: true,
                                 useCORS: true
                             }).then(canvas =&gt; {
                                 const imageData = canvas.toDataURL('image/png');
                                 document.body.removeChild(card);
                                 resolve(imageData);
                             }).catch(err =&gt; {
                                 document.body.removeChild(card);
                                 reject(err);
                             });
                         }, 100);
                     } catch (error) {
                         reject(error);
                     }
                 });
             }
         
             // &#x8655;&#x7406;&#x5206;&#x4eab;&#x529f;&#x80fd;
             function handleShare(imageData) {
                 // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x652f;&#x6301; Web Share API
                 if (navigator.share &amp;&amp; navigator.canShare &amp;&amp; navigator.canShare({ files: [new File([dataURItoBlob(imageData)], 'result.png', { type: 'image/png' })] })) {
                     // &#x624b;&#x6a5f;&#x5206;&#x4eab;&#x65b9;&#x5f0f;
                     navigator.share({
                         files: [new File([dataURItoBlob(imageData)], 'result.png', { type: 'image/png' })],
                         title: '&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;',
                         text: '&#x6211;&#x525b;&#x525b;&#x5b8c;&#x6210;&#x4e86;&#x6587;&#x8a00;&#x6587;&#x80cc;&#x8aa6;&#x6311;&#x6230;&#xff01;'
                     }).catch(err =&gt; {
                         console.log('&#x5206;&#x4eab;&#x5931;&#x6557;:', err);
                         // &#x5982;&#x679c;Web Share API&#x5931;&#x6557;&#xff0c;&#x63d0;&#x4f9b;&#x5099;&#x7528;&#x9078;&#x9805;
                         showShareOptions(imageData);
                     });
                 } else {
                     // &#x684c;&#x9762;&#x7248;&#x6216;&#x4e0d;&#x652f;&#x6301;Web Share API&#x6642;&#x7684;&#x5206;&#x4eab;&#x9078;&#x9805;
                     showShareOptions(imageData);
                 }
             }
             
             // &#x986f;&#x793a;&#x5206;&#x4eab;&#x9078;&#x9805;
             function showShareOptions(imageData) {
                 const shareModal = document.createElement('div');
                 shareModal.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[100]';
                 shareModal.innerHTML = `
                 &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-4 max-w-md w-full mx-4"&gt;
                     &lt;div class="flex justify-between items-center mb-3"&gt;
                         &lt;h3 class="text-lg font-bold text-gray-800 dark:text-gray-100"&gt;&#x5206;&#x4eab;&#x60a8;&#x7684;&#x6210;&#x7e3e;&lt;/h3&gt;

                         &lt;button id="close-share-modal" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
                             &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                         &lt;/button&gt;
                     &lt;/div&gt;
                     &lt;div class="flex justify-center mb-4"&gt;
                         &lt;img src="${imageData}" alt="&#x6210;&#x7e3e;&#x5361;&#x7247;" class="max-h-[350px] border border-gray-200 dark:border-gray-700 rounded-lg shadow-md" /&gt;
                     &lt;/div&gt;
                     &lt;div class="flex justify-center gap-4"&gt;
                         &lt;button id="download-share-image" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90"&gt;
                             &lt;i class="fas fa-download mr-2"&gt;&lt;/i&gt;&#x4e0b;&#x8f09;&#x5716;&#x7247;
                         &lt;/button&gt;
                     &lt;/div&gt;
                     &lt;p class="text-center text-sm text-gray-500 mt-3"&gt;&#x4fdd;&#x5b58;&#x5716;&#x7247;&#x5f8c;&#x53ef;&#x4ee5;&#x5206;&#x4eab;&#x5230;&#x793e;&#x4ea4;&#x5a92;&#x9ad4;&lt;/p&gt;
                 &lt;/div&gt;
                 `;
                 
                 document.body.appendChild(shareModal);
                 
                 // &#x95dc;&#x9589;&#x6309;&#x9215;
                 document.getElementById('close-share-modal').addEventListener('click', () =&gt; {
                     document.body.removeChild(shareModal);
                 });
                 
                 // &#x4e0b;&#x8f09;&#x5716;&#x7247;
                 document.getElementById('download-share-image').addEventListener('click', () =&gt; {
                     const link = document.createElement('a');
                     link.href = imageData;
                     link.download = '&#x6587;&#x8a00;&#x6587;&#x80cc;&#x8aa6;&#x6210;&#x7e3e;.png';
                     document.body.appendChild(link);
                     link.click();
                     document.body.removeChild(link);
                 });
                 
                 // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;&#x6a21;&#x614b;&#x6846;
                 shareModal.addEventListener('click', (e) =&gt; {
                     if (e.target === shareModal) {
                         document.body.removeChild(shareModal);
                     }
                 });
             }
             
             // &#x5c07;DataURI&#x8f49;&#x63db;&#x70ba;Blob
             function dataURItoBlob(dataURI) {
                 const byteString = atob(dataURI.split(',')[1]);
                 const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
                 const ab = new ArrayBuffer(byteString.length);
                 const ia = new Uint8Array(ab);
                 
                 for (let i = 0; i &lt; byteString.length; i++) {
                     ia[i] = byteString.charCodeAt(i);
                 }
                 
                 return new Blob([ab], { type: mimeString });
             }
         
             function completePassage() {
                 // &#x505c;&#x6b62;&#x904a;&#x6232;&#x5185;&#x5bb9;&#x986f;&#x793a;
                 if (gameContent) {
                     gameContent.classList.add('hidden');
                 }
                 
                 // &#x66f4;&#x65b0;&#x6309;&#x9215;&#x72c0;&#x614b;&#x70ba;&#x300c;&#x5b8c;&#x6210;&#x300d;&#xff0c;&#x986f;&#x793a;&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6309;&#x9215;
                 updateGameControlButtons('completed');
                 
                 // &#x5982;&#x679c;&#x6307;&#x5b9a;&#x7684;DOM&#x5143;&#x7d20;&#x4e0d;&#x5b58;&#x5728;&#xff0c;&#x5247;&#x8a18;&#x9304;&#x932f;&#x8aa4;&#x4e26;&#x4e2d;&#x6b62;
                 if (!optionsContainer) {
                     console.error("optionsContainer&#x672a;&#x627e;&#x5230;&#xff0c;&#x7121;&#x6cd5;&#x986f;&#x793a;&#x904a;&#x6232;&#x5b8c;&#x6210;&#x754c;&#x9762;");
                     return;
                 }
                 
                 // &#x6e05;&#x7a7a;&#x5f53;&#x524d;&#x5b57;&#x7b26;&#x663e;&#x793a;
                 if (currentChar) {
                     currentChar.textContent = '';
                 }
                 
                 // &#x505c;&#x6b62;&#x79d2;&#x9336;
                 stopStopwatch();
                 const finalTime = timerElement ? timerElement.textContent : "00:00.0";
                 
                 // &#x8a08;&#x7b97;&#x7e3d;&#x5b8c;&#x6210;&#x6642;&#x9593;&#xff08;&#x79d2;&#xff09;
                 const totalSeconds = getCompletionTimeInSeconds();
                 
                 // &#x8a18;&#x9304;&#x901a;&#x95dc;&#x6210;&#x7e3e; - &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x70ba;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;
                 const selectedPassage = passages[currentPassageKey];
                 if (selectedPassage) {
                     // &#x78ba;&#x4fdd;&#x7528;&#x65bc;&#x6aa2;&#x67e5;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#x6642;&#x986f;&#x793a;&#x6b63;&#x78ba;&#x7684;&#x7d50;&#x679c;
                     let allParagraphsContent = selectedPassage.paragraphs.join('');
                     const isFullPassage = (content === allParagraphsContent);
                     
                     console.log("&#x5b8c;&#x6210;&#x6311;&#x6230;");
                     console.log("&#x7bc7;&#x7ae0;&#x9375;&#x503c;:", currentPassageKey);
                     console.log("&#x662f;&#x5426;&#x70ba;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;:", isFullPassage);
                     console.log("&#x5b8c;&#x6210;&#x6642;&#x9593;(&#x79d2;):", totalSeconds);
                     
                     // &#x53ea;&#x6709;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#x624d;&#x8a18;&#x9304;&#x6210;&#x7e3e;
                     recordCompletionStats(currentPassageKey, totalSeconds, isFullPassage);
                 }
                 
                 // &#x64ad;&#x653e;&#x7d19;&#x5c51;&#x6176;&#x795d;&#x6548;&#x679c;
                 createConfetti();
                 
                 // &#x5224;&#x65b7;&#x6210;&#x5c31;
                 const isPerfect = wrongAnswersCount === 0;
                 const isLightningFast = totalSeconds &lt;= totalNonPunctChars * 0.8; // &#x4f7f;&#x7528;&#x603b;&#x5b57;&#x6570;*0.8&#x79d2;&#x4f5c;&#x4e3a;&#x9583;&#x96fb;&#x4fe0;&#x9608;&#x503c;
                 const isMaster = totalNonPunctChars &gt;= 300; // &#x8a18;&#x61b6;&#x5927;&#x5e2b;&#xff08;&#x5b57;&#x6578;&#x8d85;&#x904e;300&#xff09;
                 const isSnail = totalSeconds &gt;= totalNonPunctChars * 3; // &#x8778;&#x725b;&#xff08;&#x6642;&#x9593;&#x8d85;&#x904e;&#x5b57;&#x6578;*3&#x79d2;&#xff09;
                 const isTireless = !hasPaused; // &#x4e0d;&#x77e5;&#x75b2;&#x5026;&#xff08;&#x5168;&#x7a0b;&#x4e0d;&#x66ab;&#x505c;&#xff09;
                 
                 // &#x6aa2;&#x67e5;&#x7279;&#x6b8a;&#x6642;&#x9593;&#x6210;&#x5c31; - &#x5728;&#x9019;&#x88e1;&#x4e5f;&#x6aa2;&#x67e5;&#x4e00;&#x6b21;&#xff0c;&#x78ba;&#x4fdd;&#x6210;&#x5c31;&#x53ca;&#x6642;&#x5c55;&#x793a;
                 // &#x5224;&#x65b7;&#x591c;&#x8c93;&#x6210;&#x5c31; (01:00-03:00)
                 const now = new Date();
                 const hours = now.getHours();
                 const minutes = now.getMinutes();
                 
                 // &#x5224;&#x65b7;&#x662f;&#x5426;&#x7b26;&#x5408;&#x591c;&#x8c93;&#x6642;&#x9593;&#x689d;&#x4ef6;
                 const isNightOwl = (hours &gt;= 1 &amp;&amp; hours &lt; 3);
                 
                 // &#x5224;&#x65b7;&#x662f;&#x5426;&#x7b26;&#x5408;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6642;&#x9593;&#x689d;&#x4ef6;
                 const isBadDigestion = ((hours == 11 &amp;&amp; minutes &gt;= 59) || (hours == 12 &amp;&amp; minutes &lt;= 45));
                 
                 // &#x66f4;&#x65b0;&#x6975;&#x901f;&#x4e4b;&#x8def;&#x548c;&#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 if (isLightningFast) {
                     // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x9583;&#x96fb;&#x4fe0;&#x6210;&#x5c31;&#x6b21;&#x6578;
                     globalStats.lightningAchievementCount = (globalStats.lightningAchievementCount || 0) + 1;
                     
                     // &#x66f4;&#x65b0;&#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                     const lightningCount = globalStats.lightningAchievementCount;
                     
                     if (lightningCount &gt;= 100 &amp;&amp; globalStats.achievements.speedRouteLevel &lt; 4) {
                         globalStats.achievements.speedRouteLevel = 4; // &#x4e16;&#x754c;&#x7b2c;&#x4e00;&#x675f;&#x5149; (100&#x6b21;)
                     } else if (lightningCount &gt;= 50 &amp;&amp; globalStats.achievements.speedRouteLevel &lt; 3) {
                         globalStats.achievements.speedRouteLevel = 3; // &#x7121;&#x5f71;&#x624b; (50&#x6b21;)
                     } else if (lightningCount &gt;= 10 &amp;&amp; globalStats.achievements.speedRouteLevel &lt; 2) {
                         globalStats.achievements.speedRouteLevel = 2; // &#x808c;&#x8089;&#x8a18;&#x61b6; (10&#x6b21;)
                     } else if (lightningCount &gt;= 1 &amp;&amp; globalStats.achievements.speedRouteLevel &lt; 1) {
                         globalStats.achievements.speedRouteLevel = 1; // &#x654f;&#x6377; (1&#x6b21;)
                     }
                     
                     console.log(`&#x7372;&#x5f97;&#x9583;&#x96fb;&#x4fe0;&#x6210;&#x5c31;&#xff0c;&#x7e3d;&#x8a08;: ${lightningCount}&#x6b21;&#xff0c;&#x6975;&#x901f;&#x4e4b;&#x8def;&#x7b49;&#x7d1a;: ${globalStats.achievements.speedRouteLevel}`);
                 }
                 
                 if (isPerfect) {
                     // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&#x6210;&#x5c31;&#x6b21;&#x6578;
                     globalStats.perfectAchievementCount = (globalStats.perfectAchievementCount || 0) + 1;
                     
                     // &#x66f4;&#x65b0;&#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                     const perfectCount = globalStats.perfectAchievementCount;
                     
                     if (perfectCount &gt;= 100 &amp;&amp; globalStats.achievements.perfectRouteLevel &lt; 4) {
                         globalStats.achievements.perfectRouteLevel = 4; // &#x81f3;&#x5584; (100&#x6b21;)
                     } else if (perfectCount &gt;= 50 &amp;&amp; globalStats.achievements.perfectRouteLevel &lt; 3) {
                         globalStats.achievements.perfectRouteLevel = 3; // &#x6eff;&#x6708; (50&#x6b21;)
                     } else if (perfectCount &gt;= 10 &amp;&amp; globalStats.achievements.perfectRouteLevel &lt; 2) {
                         globalStats.achievements.perfectRouteLevel = 2; // &#x5b8c;&#x7f8e;&#x4e3b;&#x7fa9; (10&#x6b21;)
                     } else if (perfectCount &gt;= 1 &amp;&amp; globalStats.achievements.perfectRouteLevel &lt; 1) {
                         globalStats.achievements.perfectRouteLevel = 1; // &#x5982;&#x6c90;&#x6625;&#x98a8; (1&#x6b21;)
                     }
                     
                     console.log(`&#x7372;&#x5f97;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&#x6210;&#x5c31;&#xff0c;&#x7e3d;&#x8a08;: ${perfectCount}&#x6b21;&#xff0c;&#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x7b49;&#x7d1a;: ${globalStats.achievements.perfectRouteLevel}`);
                 }
                 
                 // &#x5275;&#x5efa;&#x6210;&#x5c31;&#x5fbd;&#x7ae0;
                 const createSealSVG = (colors, borderColor) =&gt; {
                     // &#x78ba;&#x4fdd;&#x6bcf;&#x500b;SVG&#x6709;&#x552f;&#x4e00;ID
                     const uniqueId = 'seal_' + Math.random().toString(36).substr(2, 9);
                     return `
                     &lt;svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;
                         &lt;defs&gt;
                             &lt;radialGradient id="${uniqueId}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"&gt;
                                 &lt;stop offset="0%" style="stop-color:${colors.center}" /&gt;
                                 &lt;stop offset="70%" style="stop-color:${colors.middle}" /&gt;
                                 &lt;stop offset="100%" style="stop-color:${colors.outer}" /&gt;
                             &lt;/radialGradient&gt;
                         &lt;/defs&gt;
                         &lt;circle cx="50" cy="50" r="45" fill="url(#${uniqueId})" /&gt;
                         &lt;circle cx="50" cy="50" r="42" fill="none" stroke="${borderColor}" stroke-width="1" stroke-dasharray="2,1" /&gt;
                         &lt;circle cx="50" cy="50" r="38" fill="none" stroke="${borderColor}" stroke-width="0.5" /&gt;
                     &lt;/svg&gt;
                     `;
                 };
                 
                 // &#x5b9a;&#x7fa9;&#x5404;&#x6210;&#x5c31;&#x881f;&#x7ae0;&#x984f;&#x8272;
                 const perfectColors = { center: '#8B0000', middle: '#5C0000', outer: '#400000' };
                 const lightningColors = { center: '#4B0082', middle: '#2A004D', outer: '#1C0033' };
                 const masterColors = { center: '#006400', middle: '#004D00', outer: '#003300' };
                 const snailColors = { center: '#8B4513', middle: '#6B3100', outer: '#4A2100' };
                 const tirelessColors = { center: '#1E3A8A', middle: '#1E40AF', outer: '#1D4ED8' }; // &#x85cd;&#x8272;&#x8abf;&#x4ee3;&#x8868;&#x5c08;&#x6ce8;&#x548c;&#x5805;&#x6301;
                 const nightOwlColors = { center: '#3E2723', middle: '#33211B', outer: '#2E1B15' }; // &#x6df1;&#x5496;&#x5561;&#x8272;&#x4ee3;&#x8868;&#x591c;&#x665a;
                 const badDigestionColors = { center: '#E65100', middle: '#D84315', outer: '#BF360C' }; // &#x6a59;&#x7d05;&#x8272;&#x4ee3;&#x8868;&#x4e0d;&#x8212;&#x670d;
                 
                 // &#x683c;&#x5f0f;&#x5316;&#x6210;&#x5c31;&#x4fe1;&#x606f;
                 const achievements = [];
                 
                 if (isPerfect) {
                     achievements.push({
                         svg: createSealSVG(perfectColors, '#FFD700'),
                         title: '&#x5b8c;&#x7f8e;&#x7121;&#x7455;',
                         desc: '&#x96f6;&#x932f;&#x8aa4;&#x901a;&#x95dc;'
                     });
                 }
                 
                 if (isLightningFast) {
                     achievements.push({
                         svg: createSealSVG(lightningColors, '#00FFFF'),
                         title: '&#x9583;&#x96fb;&#x4fe0;',
                         desc: '&#x795e;&#x901f;&#x5b8c;&#x6210;'
                     });
                 }
                 
                 if (isMaster) {
                     // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&#x6210;&#x5c31;&#x6b21;&#x6578;
                     globalStats.memoryAchievementCount = (globalStats.memoryAchievementCount || 0) + 1;
                     
                     // &#x66f4;&#x65b0;&#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                     const memoryCount = globalStats.memoryAchievementCount;
                     
                     if (memoryCount &gt;= 50 &amp;&amp; globalStats.achievements.memoryRouteLevel &lt; 4) {
                         globalStats.achievements.memoryRouteLevel = 4; // &#x6d41;&#x5982;&#x80cc;&#x5012; (50&#x6b21;)
                     } else if (memoryCount &gt;= 30 &amp;&amp; globalStats.achievements.memoryRouteLevel &lt; 3) {
                         globalStats.achievements.memoryRouteLevel = 3; // &#x79fb;&#x52d5;&#x5716;&#x66f8;&#x9928; (30&#x6b21;)
                     } else if (memoryCount &gt;= 10 &amp;&amp; globalStats.achievements.memoryRouteLevel &lt; 2) {
                         globalStats.achievements.memoryRouteLevel = 2; // &#x8a18;&#x61b6;&#x9eb5;&#x5305; (10&#x6b21;)
                     } else if (memoryCount &gt;= 1 &amp;&amp; globalStats.achievements.memoryRouteLevel &lt; 1) {
                         globalStats.achievements.memoryRouteLevel = 1; // &#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de; (1&#x6b21;)
                     }
                     
                     console.log(`&#x7372;&#x5f97;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&#x6210;&#x5c31;&#xff0c;&#x7e3d;&#x8a08;: ${memoryCount}&#x6b21;&#xff0c;&#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x7b49;&#x7d1a;: ${globalStats.achievements.memoryRouteLevel}`);
                     
                     achievements.push({
                         svg: createSealSVG(masterColors, '#7CFC00'),
                         title: '&#x8a18;&#x61b6;&#x5927;&#x5e2b;',
                         desc: '&#x4e00;&#x53e3;&#x6c23;300&#x5b57;+'
                     });
                 }
                 
                 if (isSnail) {
                     achievements.push({
                         svg: createSealSVG(snailColors, '#DAA520'),
                         title: '&#x8778;&#x725b;',
                         desc: '&#x6162;&#x5de5;&#x51fa;&#x7d30;&#x6d3b;'
                     });
                 }
                 
                 // &#x6dfb;&#x52a0;&#x65b0;&#x6210;&#x5c31;&#xff1a;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&#xff0c;&#x4e26;&#x66f4;&#x65b0;&#x76f8;&#x95dc;&#x8a08;&#x6578;
                 if (isTireless) {
                     // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&#x6210;&#x5c31;&#x6b21;&#x6578;
                     globalStats.tirelessAchievementCount = (globalStats.tirelessAchievementCount || 0) + 1;
                     
                     // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x9054;&#x6210;&#x300c;&#x773c;&#x4e7e;&#x300d;&#x6210;&#x5c31;&#xff08;&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;30&#x6b21;&#xff09;
                     if (globalStats.tirelessAchievementCount &gt;= 30 &amp;&amp; !globalStats.achievements.dryEyes) {
                         globalStats.achievements.dryEyes = true;
                         console.log("&#x7372;&#x5f97;&#x7368;&#x7acb;&#x6210;&#x5c31;&#xff1a;&#x773c;&#x4e7e;&#xff08;&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;30&#x6b21;&#xff09;");
                     }
                     
                     achievements.push({
                         svg: createSealSVG(tirelessColors, '#38BDF8'),
                         title: '&#x4e0d;&#x77e5;&#x75b2;&#x5026;',
                         desc: '&#x5168;&#x7a0b;&#x4e0d;&#x66ab;&#x505c;'
                     });
                 }
                 
                 // &#x6dfb;&#x52a0;&#x591c;&#x8c93;&#x6210;&#x5c31; - &#x5728;&#x9019;&#x88e1;&#x76f4;&#x63a5;&#x6dfb;&#x52a0;&#xff0c;&#x78ba;&#x4fdd;&#x7528;&#x6236;&#x53ef;&#x4ee5;&#x770b;&#x5230;
                 if (isNightOwl) {
                     // &#x66f4;&#x65b0;&#x5168;&#x5c40;&#x7d71;&#x8a08;
                     globalStats.achievements.nightOwl = true;
                     globalStats.nightOwlAchievementCount = (globalStats.nightOwlAchievementCount || 0) + 1;
                     
                     // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x9054;&#x6210;&#x300c;&#x591c;&#x8c93;&#x738b;&#x300d;&#x6210;&#x5c31;
                     if (globalStats.nightOwlAchievementCount &gt;= 20 &amp;&amp; !globalStats.achievements.nightOwlKing) {
                         globalStats.achievements.nightOwlKing = true;
                         console.log("&#x7372;&#x5f97;&#x7368;&#x7acb;&#x6210;&#x5c31;&#xff1a;&#x591c;&#x8c93;&#x738b;&#xff08;&#x7372;&#x5f97;&#x591c;&#x8c93;20&#x6b21;&#xff09;");
                     }
                     
                     // &#x6dfb;&#x52a0;&#x5230;&#x6210;&#x5c31;&#x5217;&#x8868;
                     achievements.push({
                         svg: createSealSVG(nightOwlColors, '#4E342E'),
                         title: '&#x591c;&#x8c93;',
                         desc: '&#x591c;&#x6df1;&#x6642;&#x4ecd;&#x4e0d;&#x4f11;'
                     });
                     
                     console.log(`&#x7372;&#x5f97;&#x591c;&#x8c93;&#x6210;&#x5c31;&#xff0c;&#x7e3d;&#x8a08;: ${globalStats.nightOwlAchievementCount}&#x6b21;`);
                 }
                 
                 // &#x6dfb;&#x52a0;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6210;&#x5c31; - &#x5728;&#x9019;&#x88e1;&#x76f4;&#x63a5;&#x6dfb;&#x52a0;&#xff0c;&#x78ba;&#x4fdd;&#x7528;&#x6236;&#x53ef;&#x4ee5;&#x770b;&#x5230;
                 if (isBadDigestion) {
                     // &#x66f4;&#x65b0;&#x5168;&#x5c40;&#x7d71;&#x8a08;
                     globalStats.achievements.badDigestion = true;
                     globalStats.badDigestionAchievementCount = (globalStats.badDigestionAchievementCount || 0) + 1;
                     
                     // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x9054;&#x6210;&#x300c;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#x300d;&#x6210;&#x5c31;
                     if (globalStats.badDigestionAchievementCount &gt;= 20 &amp;&amp; !globalStats.achievements.focusOnEating) {
                         globalStats.achievements.focusOnEating = true;
                         console.log("&#x7372;&#x5f97;&#x7368;&#x7acb;&#x6210;&#x5c31;&#xff1a;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#xff08;&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;20&#x6b21;&#xff09;");
                     }
                     
                     // &#x6dfb;&#x52a0;&#x5230;&#x6210;&#x5c31;&#x5217;&#x8868;
                     achievements.push({
                         svg: createSealSVG(badDigestionColors, '#BF360C'),
                         title: '&#x8178;&#x80c3;&#x4e0d;&#x597d;',
                         desc: '&#x7528;&#x9910;&#x6642;&#x9593;&#x4ecd;&#x52e4;&#x5b78;'
                     });
                     
                     console.log(`&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6210;&#x5c31;&#xff0c;&#x7e3d;&#x8a08;: ${globalStats.badDigestionAchievementCount}&#x6b21;`);
                 }
                 
                 // &#x4fdd;&#x5b58;&#x66f4;&#x65b0;&#x7684;&#x7d71;&#x8a08;&#x548c;&#x6210;&#x5c31;
                 saveStats();
                 
                 // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x5bb9;&#x5668;&#x4e26;&#x4fee;&#x6539;&#x5e03;&#x5c40;&#x70ba;flex&#x5e03;&#x5c40;
                 optionsContainer.innerHTML = '';
                 optionsContainer.className = 'flex flex-col justify-center items-center mb-4';
                 
                 const completionMessage = document.createElement('div');
                 completionMessage.className = 'text-center bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md w-full sm:w-4/5';
                 completionMessage.id = 'completion-result';
                 
                 // &#x6dfb;&#x52a0;&#x7d93;&#x9a57;&#x503c;&#x734e;&#x52f5;
                 const expGained = totalNonPunctChars*3; // &#x7d93;&#x9a57;&#x503c; = &#x8a72;&#x904a;&#x6232;&#x5b57;&#x6578;
                 addExperience(expGained);
                 console.log(`&#x904a;&#x6232;&#x5b8c;&#x6210;&#xff0c;&#x7372;&#x5f97;&#x7d93;&#x9a57;&#x503c;: ${expGained}`);
                 
                 // &#x986f;&#x793a;&#x7372;&#x5f97;&#x7684;&#x7d93;&#x9a57;&#x503c;&#x8a0a;&#x606f;
                 const expNotification = document.createElement('div');
                 expNotification.className = 'fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 py-2 px-4 rounded-lg shadow-lg z-[9999] flex items-center';
                 expNotification.style.animation = 'fadeInOut 3s ease-in-out forwards';
                 
                 expNotification.innerHTML = `
                     &lt;i class="fas fa-star text-amber-500 dark:text-amber-300 mr-2"&gt;&lt;/i&gt;
                     &lt;div&gt;&#x7372;&#x5f97; &lt;span class="font-bold"&gt;${expGained}&lt;/span&gt; &#x7d93;&#x9a57;&#x503c;&lt;/div&gt;
                 `;
                 
                 document.body.appendChild(expNotification);
                 
                 setTimeout(() =&gt; {
                     expNotification.remove();
                 }, 3000);
                 
                 // &#x751f;&#x6210;&#x6210;&#x5c31;&#x5fbd;&#x7ae0;HTML
                 let achievementsHTML = '';
                 if (achievements.length &gt; 0) {
                     achievementsHTML = `
                     &lt;div class="mb-5 mt-4"&gt;
                         &lt;p class="text-lg font-medium text-amber-700 dark:text-amber-400 mb-3"&gt;&#x7372;&#x5f97;&#x6210;&#x5c31;:&lt;/p&gt;
                         &lt;div class="achievements-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0px;"&gt;
                     `;
                     
                     // &#x6dfb;&#x52a0;&#x6bcf;&#x500b;&#x6210;&#x5c31;&#x5fbd;&#x7ae0;&#xff0c;&#x8bbe;&#x7f6e;&#x4e3a;&#x4e00;&#x884c;&#x81f3;&#x5c11;&#x663e;&#x793a;&#x4e09;&#x4e2a;
                     achievements.forEach(achievement =&gt; {
                         achievementsHTML += `
                         &lt;div class="achievement-seal" style="width: calc(33.333% - 0px); min-width: 70px; max-width: 100px; flex-grow: 0; flex-shrink: 0;"&gt;
                             ${achievement.svg}
                             &lt;div class="seal-text"&gt;
                                 &lt;span class="seal-title"&gt;${achievement.title}&lt;/span&gt;
                                 &lt;span class="seal-desc"&gt;${achievement.desc}&lt;/span&gt;
                             &lt;/div&gt;
                         &lt;/div&gt;`;
                     });
                     
                     achievementsHTML += `&lt;/div&gt;&lt;/div&gt;`;
                 }
                 
                 // &#x6e96;&#x5099;&#x6309;&#x9215;HTML&#xff0c;&#x5148;&#x4e0d;&#x5305;&#x542b;onClick&#x4e8b;&#x4ef6;&#xff0c;&#x7a0d;&#x5f8c;&#x6703;&#x76f4;&#x63a5;&#x5728;DOM&#x5143;&#x7d20;&#x4e0a;&#x8a2d;&#x7f6e;
                 const buttonsHTML = `
                     &lt;div class="flex justify-center gap-6 mt-4"&gt;
                         &lt;button id="share-result-btn" class="w-12 h-12 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors flex items-center justify-center text-xl"&gt;
                             &lt;i class="fas fa-share-alt"&gt;&lt;/i&gt;
                         &lt;/button&gt;
                         &lt;button id="restart-result-btn" class="w-12 h-12 bg-amber-500 text-white rounded-full hover:bg-amber-600 transition-colors flex items-center justify-center text-xl"&gt;
                             &lt;i class="fas fa-redo"&gt;&lt;/i&gt;
                         &lt;/button&gt;
                     &lt;/div&gt;
                 `;
                 
                 // &#x751f;&#x6210;&#x5b8c;&#x6574;&#x4fe1;&#x606f;HTML
                 completionMessage.innerHTML = `
                     &lt;p class="text-2xl text-green-600 dark:text-green-400 mb-6 font-bold"&gt;&#x606d;&#x559c;&#x5b8c;&#x6210;&#xff01;&lt;/p&gt;
                     &lt;div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-4"&gt;
                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x5b8c;&#x6210;&#x6642;&#x9593;: ${finalTime}&lt;/p&gt;
                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x932f;&#x8aa4;&#x6b21;&#x6578;: ${wrongAnswersCount}&lt;/p&gt;
                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x7e3d;&#x5b57;&#x6578;: ${totalNonPunctChars}&lt;/p&gt;
                     &lt;/div&gt;
                     ${achievementsHTML}
                     ${buttonsHTML}
                 `;
                 
                 optionsContainer.appendChild(completionMessage);
                 
                 // &#x5b9a;&#x7fa9;&#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;&#x7684;&#x51fd;&#x6578;
                 function resetGameState() {
                     console.log("&#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;");
                     currentPosition = 0;
                     correctAnswers = 0;
                     lives = 3;
                     successfulChars = 0;
                     wrongAnswersCount = 0;
                     lastAnsweredChars = [];
                     
                     const lastAnsweredCharsElem = document.getElementById('last-answered-chars');
                     if (lastAnsweredCharsElem) {
                         lastAnsweredCharsElem.textContent = '';
                     }
                     
                     canSelect = true;
                     isPaused = false;
                     hasPaused = false;
                     updateLives();
                     
                     if (feedback) {
                         feedback.textContent = '';
                     }
                     
                     // &#x66f4;&#x65b0;&#x9032;&#x5ea6;&#x689d;
                     const progressText = document.getElementById('progress-text');
                     const progressBar = document.getElementById('progress-bar');
                     
                     if (progressText) {
                         progressText.textContent = `0 / ${totalNonPunctChars}`;
                     }
                     
                     if (progressBar) {
                         progressBar.style.width = '0%';
                     }
                     
                     // &#x6e05;&#x7a7a;&#x9078;&#x9805;&#x5bb9;&#x5668;
                     if (optionsContainer) {
                         optionsContainer.innerHTML = '';
                         optionsContainer.className = 'grid grid-cols-3 gap-3 md:gap-4 mb-4';
                     }
                 }
                 
                 // &#x7372;&#x53d6;&#x6309;&#x9215;&#x5143;&#x7d20;
                 const shareResultBtn = document.getElementById('share-result-btn');
                 const restartResultBtn = document.getElementById('restart-result-btn');
                 const completionReturnBtn = document.getElementById('completion-return-btn');
                 
                 // &#x7acb;&#x5373;&#x70ba;&#x6309;&#x9215;&#x6dfb;&#x52a0;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 if (shareResultBtn) {
                     shareResultBtn.onclick = function() {
                         console.log("&#x5206;&#x4eab;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                         
                         // &#x986f;&#x793a;&#x52a0;&#x8f09;&#x4e2d;&#x52d5;&#x756b;
                         const loadingOverlay = document.createElement('div');
                         loadingOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[101]';
                         loadingOverlay.innerHTML = `
                             &lt;div class="bg-white dark:bg-gray-800 p-6 rounded-lg flex flex-col items-center"&gt;
                                 &lt;i class="fas fa-spinner fa-spin text-3xl text-primary mb-3"&gt;&lt;/i&gt;
                                 &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x6b63;&#x5728;&#x751f;&#x6210;&#x5206;&#x4eab;&#x5716;&#x7247;...&lt;/p&gt;
                             &lt;/div&gt;
                         `;
                         document.body.appendChild(loadingOverlay);
                         
                         // &#x7372;&#x53d6;&#x7576;&#x524d;&#x9078;&#x64c7;&#x7684;&#x6bb5;&#x843d;&#x7d22;&#x5f15;
                         const paragraphInfo = window.selectedParagraphIndices || [];
                         
                         // &#x5275;&#x5efa;&#x5206;&#x4eab;&#x5361;&#x7247;
                         createShareCard(
                             selectedPassage.title, 
                             selectedPassage.author, 
                             finalTime, 
                             wrongAnswersCount, 
                             totalNonPunctChars, 
                             achievements,
                             paragraphInfo
                         ).then(imageData =&gt; {
                             document.body.removeChild(loadingOverlay);
                             handleShare(imageData);
                         }).catch(err =&gt; {
                             console.error('&#x5275;&#x5efa;&#x5206;&#x4eab;&#x5361;&#x7247;&#x5931;&#x6557;:', err);
                             document.body.removeChild(loadingOverlay);
                             alert('&#x751f;&#x6210;&#x5206;&#x4eab;&#x5716;&#x7247;&#x5931;&#x6557;&#xff0c;&#x8acb;&#x7a0d;&#x5f8c;&#x518d;&#x8a66;&#x3002;');
                         });
                     };
                     console.log("&#x5df2;&#x70ba;&#x5206;&#x4eab;&#x6309;&#x9215;&#x8a2d;&#x7f6e;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;");
                 }
                 
                 if (restartResultBtn) {
                     restartResultBtn.addEventListener('click', async function() {
                         console.log("&#x91cd;&#x4f86;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                         
                         try {
                             // &#x986f;&#x793a;&#x8f09;&#x5165;&#x52d5;&#x756b;
                             await showLoadingAnimation();
                             
                             // &#x4f7f;&#x7528;&#x5168;&#x5c40;&#x91cd;&#x7f6e;&#x51fd;&#x6578;
                             resetGameState();
                             
                             // &#x78ba;&#x4fdd;&#x904a;&#x6232;&#x9801;&#x9762;&#x986f;&#x793a;
                             if (gamePage &amp;&amp; gamePage.classList.contains('hidden')) {
                                 gamePage.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                                 gamePage.classList.remove('hidden');
                             }
                             
                             // &#x5148;&#x96b1;&#x85cf;&#x904a;&#x6232;&#x5167;&#x5bb9;&#xff0c;&#x78ba;&#x4fdd;&#x5207;&#x63db;&#x5230;&#x958b;&#x59cb;&#x756b;&#x9762;
                             if (gameContent) {
                                 gameContent.classList.add('hidden');
                             }
                             
                             // &#x78ba;&#x4fdd;&#x958b;&#x59cb;&#x756b;&#x9762;&#x986f;&#x793a;
                             if (gameStartScreen) {
                                 gameStartScreen.classList.remove('hidden');
                                 console.log("&#x6210;&#x529f;&#x5207;&#x63db;&#x5230;&#x958b;&#x59cb;&#x5c4f;&#x5e55;");
                             } else {
                                 console.error("&#x627e;&#x4e0d;&#x5230;&#x958b;&#x59cb;&#x5c4f;&#x5e55;&#x5143;&#x7d20;");
                             }
                             
                             // &#x91cd;&#x7f6e;&#x79d2;&#x8868;
                             stopStopwatch();
                             elapsedTimeBeforePause = 0;
                             if (timerElement) {
                                 timerElement.textContent = "00:00.0";
                             }
                             
                             console.log("&#x904a;&#x6232;&#x5df2;&#x91cd;&#x7f6e;&#xff0c;&#x6e96;&#x5099;&#x91cd;&#x65b0;&#x958b;&#x59cb;");
                         } catch (error) {
                             console.error("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x6642;&#x51fa;&#x932f;:", error);
                             alert("&#x91cd;&#x65b0;&#x958b;&#x59cb;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;: " + error.message);
                         }
                     });
                     console.log("&#x5df2;&#x70ba;&#x91cd;&#x4f86;&#x6309;&#x9215;&#x8a2d;&#x7f6e;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;(addEventListener)");
                 }
                 
                 if (completionReturnBtn) {
                     completionReturnBtn.onclick = function() {
                         console.log("&#x8fd4;&#x56de;&#x6309;&#x9215;&#x88ab;&#x9ede;&#x64ca;");
                         
                         try {
                             // &#x91cd;&#x7f6e;&#x904a;&#x6232;&#x72c0;&#x614b;
                             resetGameState();
                             
                             // &#x7372;&#x53d6;&#x9700;&#x8981;&#x64cd;&#x4f5c;&#x7684;&#x5143;&#x7d20;
                             const userProfileContainer = document.getElementById('user-profile-container');
                             const gamePage = document.getElementById('game-page');
                             
                             if (!userProfileContainer || !gamePage) {
                                 console.error("&#x672a;&#x627e;&#x5230;&#x5fc5;&#x8981;&#x7684;DOM&#x5143;&#x7d20;");
                                 alert("&#x8fd4;&#x56de;&#x5931;&#x6557;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                                 return;
                             }
                             
                             // &#x96b1;&#x85cf;&#x904a;&#x6232;&#x754c;&#x9762;
                             gamePage.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important;';
                             gamePage.classList.add('hidden');
                             gamePage.classList.remove('block', 'flex', 'visible', 'opacity-100');
                             
                             // &#x986f;&#x793a;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x754c;&#x9762;
                             userProfileContainer.style.cssText = 'display: block !important; visibility: visible !important; opacity: 1 !important;';
                             userProfileContainer.classList.remove('hidden');
                             userProfileContainer.classList.add('block');
                             
                             // &#x78ba;&#x4fdd;&#x66f8;&#x672c;&#x9801;&#x9762;&#x56de;&#x5230;&#x521d;&#x59cb;&#x72c0;&#x614b;
                             const bookPage = document.querySelector('.page');
                             if (bookPage &amp;&amp; bookPage.classList.contains('turned')) {
                                 bookPage.classList.remove('turned');
                             }
                             
                             // &#x6efe;&#x52d5;&#x5230;&#x9801;&#x9762;&#x9802;&#x90e8;
                             window.scrollTo(0, 0);
                             
                             console.log("&#x8fd4;&#x56de;&#x4e3b;&#x9801;&#x6210;&#x529f;");
                         } catch (error) {
                             console.error("&#x8fd4;&#x56de;&#x6309;&#x9215;&#x8655;&#x7406;&#x767c;&#x751f;&#x932f;&#x8aa4;:", error);
                             alert("&#x8fd4;&#x56de;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x91cd;&#x65b0;&#x8f09;&#x5165;&#x9801;&#x9762;");
                         }
                     };
                     console.log("&#x5df2;&#x70ba;&#x8fd4;&#x56de;&#x6309;&#x9215;&#x8a2d;&#x7f6e;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;");
                 }
                 
                 // &#x4ee5;&#x9632;&#x842c;&#x4e00;&#xff0c;&#x6dfb;&#x52a0;&#x984d;&#x5916;&#x7684;&#x4e8b;&#x4ef6;&#x4ee3;&#x7406;
                 optionsContainer.addEventListener('click', function(event) {
                     const target = event.target;
                     
                     // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x662f;&#x6309;&#x9215;&#x6216;&#x6309;&#x9215;&#x5167;&#x7684;&#x5143;&#x7d20;
                     if (target.closest('#restart-result-btn')) {
                         console.log("&#x901a;&#x904e;&#x4ee3;&#x7406;&#x5075;&#x6e2c;&#x5230;&#x91cd;&#x4f86;&#x6309;&#x9215;&#x9ede;&#x64ca;");
                         const btn = document.getElementById('restart-result-btn');
                         if (btn &amp;&amp; typeof btn.onclick === 'function') {
                             btn.onclick();
                         }
                     }
                     
                     if (target.closest('#completion-return-btn')) {
                         console.log("&#x901a;&#x904e;&#x4ee3;&#x7406;&#x5075;&#x6e2c;&#x5230;&#x8fd4;&#x56de;&#x6309;&#x9215;&#x9ede;&#x64ca;");
                         const btn = document.getElementById('completion-return-btn');
                         if (btn &amp;&amp; typeof btn.onclick === 'function') {
                             btn.onclick();
                         }
                     }
                     
                     if (target.closest('#share-result-btn')) {
                         console.log("&#x901a;&#x904e;&#x4ee3;&#x7406;&#x5075;&#x6e2c;&#x5230;&#x5206;&#x4eab;&#x6309;&#x9215;&#x9ede;&#x64ca;");
                         const btn = document.getElementById('share-result-btn');
                         if (btn &amp;&amp; typeof btn.onclick === 'function') {
                             btn.onclick();
                         }
                     }
                 });
             }
             
             // &#x521b;&#x5efa;&#x58a8;&#x6ef4;&#x6548;&#x679c;
             function createInkDrop(element) {
                 if (!element) return;
                 
                 const inkDrop = document.createElement('div');
                 inkDrop.className = 'ink-drop';
                 
                 // &#x8ba1;&#x7b97;&#x70b9;&#x51fb;&#x4f4d;&#x7f6e;
                 const rect = element.getBoundingClientRect();
                 const x = Math.random() * (rect.width - 10);
                 const y = Math.random() * (rect.height - 10);
                 
                 inkDrop.style.left = `${x}px`;
                 inkDrop.style.top = `${y}px`;
                 
                 // &#x4e0d;&#x518d;&#x8a2d;&#x7f6e;position&#x548c;overflow&#xff0c;&#x56e0;&#x70ba;&#x5df2;&#x7d93;&#x5728;CSS&#x4e2d;&#x9810;&#x8a2d;&#x4e86;
                 element.appendChild(inkDrop);
                 
                 // &#x79fb;&#x9664;&#x5143;&#x7d20;
                 setTimeout(() =&gt; {
                     if (inkDrop.parentNode === element) {
                         inkDrop.remove();
                     }
                 }, 2000);
             }
             
             // &#x8f85;&#x52a9;&#x51fd;&#x6570;
             function isPunctuation(char) {
                 // &#x6aa2;&#x67e5;&#x6240;&#x6709;&#x53ef;&#x80fd;&#x7684;&#x5192;&#x865f;&#x8b8a;&#x9ad4;&#x548c;&#x5176;&#x4ed6;&#x6a19;&#x9ede;
                 if (!char) return false;
                 
                 const charCode = char.charCodeAt(0);
                 // &#x5168;&#x5f62;&#x5192;&#x865f;(U+FF1A)&#x548c;&#x534a;&#x5f62;&#x5192;&#x865f;(U+003A)
                 if (charCode === 0xFF1A || charCode === 0x003A) {
                     return true;
                 }
                 // &#x6aa2;&#x67e5;&#x5176;&#x4ed6;&#x6a19;&#x9ede;&#x7b26;&#x865f;
                 return '&#x300c;&#x300d;&#xff1a;&#xfe30;&#xff01;&#xff0c;&#x3002;&#xff1b;!?----&#x2026;&#x2026;&#x300e;&#x300f;&#x3001;&#xff1f;:'.includes(char);
             }
             
             function shuffleArray(array) {
                 const newArray = [...array];
                 for (let i = newArray.length - 1; i &gt; 0; i--) {
                     const j = Math.floor(Math.random() * (i + 1));
                     [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                 }
                 return newArray;
             }
             
             // &#x521d;&#x59cb;&#x5316;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x53ca;&#x76f8;&#x95dc;&#x529f;&#x80fd;
             initializeSettings();
             
             // &#x9996;&#x5148;&#x58f0;&#x660e;&#x5168;&#x5c40;&#x53d8;&#x91cf;&#xff0c;&#x786e;&#x4fdd;&#x5b83;&#x4eec;&#x5728;&#x4f7f;&#x7528;&#x4e4b;&#x524d;&#x5df2;&#x5b8c;&#x6210;&#x521d;&#x59cb;&#x5316;
             // &#x7528;&#x65bc;&#x66ff;&#x4ee3;localStorage&#x7684;&#x5167;&#x5b58;&#x5b58;&#x5132;
             let userRecordsMemory = {};
             
             // &#x5168;&#x5c40;&#x6210;&#x5c31;&#x548c;&#x7d71;&#x8a08;&#x8ddf;&#x8e2a;
             let globalStats = {
                 totalCompletionCount: 0,      // &#x7e3d;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                 failAfterHalfwayCount: 0,     // &#x904a;&#x6232;&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;&#x6b21;&#x6578;
                 lightningAchievementCount: 0, // &#x7372;&#x5f97;&#x9583;&#x96fb;&#x4fe0;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 perfectAchievementCount: 0,   // &#x7372;&#x5f97;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 memoryAchievementCount: 0,    // &#x7372;&#x5f97;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 tirelessAchievementCount: 0,  // &#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 nightOwlAchievementCount: 0,  // &#x7372;&#x5f97;&#x591c;&#x8c93;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 badDigestionAchievementCount: 0, // &#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6210;&#x5c31;&#x6b21;&#x6578;
                 achievements: {
                     // &#x7279;&#x6b8a;&#x6642;&#x9593;&#x6210;&#x5c31;
                     nightOwl: false,         // &#x591c;&#x8c93;&#xff08;01:00-03:00&#x5b8c;&#x6210;&#xff09;
                     badDigestion: false,     // &#x8178;&#x80c3;&#x4e0d;&#x597d;&#xff08;11:59-12:45&#x5b8c;&#x6210;&#xff09;
                     
                     // &#x7279;&#x6b8a;&#x7d2f;&#x7a4d;&#x6210;&#x5c31;
                     dryEyes: false,          // &#x773c;&#x4e7e;&#xff08;&#x7372;&#x5f97;&#x300c;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&#x300d;30&#x6b21;&#xff09;
                     nightOwlKing: false,     // &#x591c;&#x8c93;&#x738b;&#xff08;&#x7372;&#x5f97;&#x300c;&#x591c;&#x8c93;&#x300d;20&#x6b21;&#xff09;
                     focusOnEating: false,    // &#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#xff08;&#x7372;&#x5f97;&#x300c;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x300d;20&#x6b21;&#xff09;
                     
                     // &#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     adventureLevel: 0,       // 0:&#x672a;&#x7372;&#x5f97; 1:&#x521d;&#x5fc3;&#x8005; 2:&#x52c7;&#x8005; 3:&#x5927;&#x5e2b; 4:&#x504f;&#x57f7;&#x72c2; 5:&#x6383;&#x5730;&#x50e7;
                     
                     // &#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     defeatLevel: 0,          // 0:&#x672a;&#x7372;&#x5f97; 1:&#x521d;&#x5617;&#x6557;&#x7e3e; 2:&#x5805;&#x6bc5; 3:&#x92fc;&#x9435;&#x610f;&#x5fd7; 4:&#x5c0f;&#x5f37;&#x662f;&#x6211; 5:&#x5fc3;&#x5982;&#x6b62;&#x6c34;
                     
                     // &#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     speedRouteLevel: 0,      // 0:&#x672a;&#x7372;&#x5f97; 1:&#x654f;&#x6377; 2:&#x808c;&#x8089;&#x8a18;&#x61b6; 3:&#x7121;&#x5f71;&#x624b; 4:&#x4e16;&#x754c;&#x7b2c;&#x4e00;&#x675f;&#x5149;
                     
                     // &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     perfectRouteLevel: 0,     // 0:&#x672a;&#x7372;&#x5f97; 1:&#x5982;&#x6c90;&#x6625;&#x98a8; 2:&#x5b8c;&#x7f8e;&#x4e3b;&#x7fa9; 3:&#x6eff;&#x6708; 4:&#x81f3;&#x5584;
                     
                     // &#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     memoryRouteLevel: 0       // 0:&#x672a;&#x7372;&#x5f97; 1:&#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de; 2:&#x8a18;&#x61b6;&#x9eb5;&#x5305; 3:&#x79fb;&#x52d5;&#x5716;&#x66f8;&#x9928; 4:&#x6d41;&#x5982;&#x80cc;&#x5012;
                 }
             };
             
             // &#x7528;&#x6236;&#x8cc7;&#x6599;&#x548c;&#x7d93;&#x9a57;&#x503c;&#x7cfb;&#x7d71;
             let userProfile = {
                 name: "&#x6587;&#x8a00;&#x5927;&#x5e2b;",
                 level: 1,
                 exp: 0,
                 nextLevelExp: 100
             };
             
             // &#x8a08;&#x7b97;&#x5347;&#x7d1a;&#x6240;&#x9700;&#x7d93;&#x9a57;&#x503c;
             function calculateExpForNextLevel(level) {
                 if (level &lt;= 10) return 100;
                 if (level &lt;= 20) return 180;
                 if (level &lt;= 30) return 260;
                 if (level &lt;= 40) return 320;
                 if (level &lt;= 50) return 400;
                 if (level &lt;= 60) return 480;
                 if (level &lt;= 70) return 560;
                 if (level &lt;= 80) return 640;
                 if (level &lt;= 90) return 720;
                 if (level &lt;= 100) return 800;
                 if (level &lt;= 999) return 500;             
                 return Infinity; // 1000&#x7d1a;&#x70ba;&#x6eff;&#x7d1a;
             }
             
             // &#x6dfb;&#x52a0;&#x7d93;&#x9a57;&#x503c;
             function addExperience(amount) {
                 if (userProfile.level &gt;= 1000) return; // &#x5df2;&#x9054;&#x5230;&#x6eff;&#x7d1a;
                 
                 userProfile.exp += amount;
                 console.log(`&#x6dfb;&#x52a0;&#x7d93;&#x9a57;&#x503c;: ${amount}, &#x7576;&#x524d;&#x7d93;&#x9a57;&#x503c;: ${userProfile.exp}/${userProfile.nextLevelExp}`);
                 
                 // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x5347;&#x7d1a;
                 while (userProfile.exp &gt;= userProfile.nextLevelExp &amp;&amp; userProfile.level &lt; 1000) {
                     userProfile.level++;
                     userProfile.exp -= userProfile.nextLevelExp;
                     userProfile.nextLevelExp = calculateExpForNextLevel(userProfile.level);
                     
                     console.log(`&#x5347;&#x7d1a;! &#x65b0;&#x7b49;&#x7d1a;: ${userProfile.level}, &#x4e0b;&#x4e00;&#x7d1a;&#x6240;&#x9700;&#x7d93;&#x9a57;: ${userProfile.nextLevelExp}`);
                     
                     // &#x986f;&#x793a;&#x5347;&#x7d1a;&#x63d0;&#x793a;
                     showLevelUpNotification(userProfile.level);
                 }
                 
                 // &#x66f4;&#x65b0;&#x7d93;&#x9a57;&#x503c;&#x986f;&#x793a;
                 updateExpDisplay();
                 
                 // &#x4fdd;&#x5b58;&#x7528;&#x6236;&#x8cc7;&#x6599;
                 saveUserProfile();
             }
             
             // &#x986f;&#x793a;&#x5347;&#x7d1a;&#x63d0;&#x793a;
             function showLevelUpNotification(newLevel) {
                 const notification = document.createElement('div');
                 notification.className = 'fixed top-1/4 left-1/2 transform -translate-x-1/2 bg-amber-100 dark:bg-amber-800 text-amber-900 dark:text-amber-100 py-3 px-6 rounded-lg shadow-lg z-[9999] flex flex-col items-center';
                 notification.style.animation = 'fadeInOut 3s ease-in-out forwards';
                 
                 notification.innerHTML = `
                     &lt;div class="text-2xl font-bold mb-1"&gt;&#x606d;&#x559c;&#x5347;&#x7d1a;!&lt;/div&gt;
                     &lt;div class="text-3xl font-bold text-primary"&gt;Lv.${newLevel}&lt;/div&gt;
                 `;
                 
                 document.body.appendChild(notification);
                 
                 // &#x6dfb;&#x52a0;&#x6de1;&#x5165;&#x6de1;&#x51fa;&#x52d5;&#x756b;&#x6a23;&#x5f0f;
                 const style = document.createElement('style');
                 style.textContent = `
                     @keyframes fadeInOut {
                         0% { opacity: 0; transform: translate(-50%, -20px); }
                         15% { opacity: 1; transform: translate(-50%, 0); }
                         85% { opacity: 1; transform: translate(-50%, 0); }
                         100% { opacity: 0; transform: translate(-50%, -20px); }
                     }
                 `;
                 document.head.appendChild(style);
                 
                 // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x6709;&#x65b0;&#x89e3;&#x9396;&#x7684;&#x982d;&#x50cf;
                 checkNewUnlockedAvatars(newLevel);
                 
                 // &#x522a;&#x9664;&#x901a;&#x77e5;
                 setTimeout(() =&gt; {
                     notification.remove();
                     style.remove();
                 }, 3000);
             }
             
             // &#x6aa2;&#x67e5;&#x65b0;&#x89e3;&#x9396;&#x7684;&#x982d;&#x50cf;&#x4e26;&#x986f;&#x793a;&#x901a;&#x77e5;
             function checkNewUnlockedAvatars(newLevel) {
                 // &#x7372;&#x53d6;&#x6240;&#x6709;&#x7b49;&#x7d1a;&#x70ba;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x7684;&#x982d;&#x50cf;
                 const newUnlockedAvatars = [];
                 
                 Object.keys(window.avatarUnlockLevels).forEach(avatarKey =&gt; {
                     const requiredLevel = window.avatarUnlockLevels[avatarKey];
                     if (requiredLevel &lt;= newLevel) {
                         // &#x627e;&#x5230;&#x6b64;&#x7b49;&#x7d1a;&#x89e3;&#x9396;&#x7684;&#x982d;&#x50cf;
                         const avatarData = avatarPixelData[avatarKey];
                         if (avatarData) {
                             newUnlockedAvatars.push({
                                 key: avatarKey,
                                 name: avatarData.name
                             });
                         }
                     }
                 });
                 
                 if (newUnlockedAvatars.length &gt; 0) {
                     // &#x5ef6;&#x9072;&#x986f;&#x793a;&#x89e3;&#x9396;&#x901a;&#x77e5;&#xff0c;&#x8b93;&#x5347;&#x7d1a;&#x901a;&#x77e5;&#x5148;&#x986f;&#x793a;
                     setTimeout(() =&gt; {
                         showAvatarUnlockNotification(newUnlockedAvatars);
                         
                         // &#x5982;&#x679c;&#x982d;&#x50cf;&#x9078;&#x64c7;&#x5668;&#x662f;&#x6253;&#x958b;&#x7684;&#xff0c;&#x5247;&#x91cd;&#x65b0;&#x751f;&#x6210;&#x982d;&#x50cf;&#x9078;&#x9805;
                         const avatarSelector = document.getElementById('avatar-selector-modal');
                         if (avatarSelector &amp;&amp; !avatarSelector.classList.contains('hidden')) {
                             const avatarGrid = document.getElementById('avatar-grid');
                             if (avatarGrid) {
                                 generateAvatarOptions(avatarGrid);
                             }
                         }
                     }, 1000);
                 }
             }
             
             // &#x986f;&#x793a;&#x982d;&#x50cf;&#x89e3;&#x9396;&#x901a;&#x77e5;
             function showAvatarUnlockNotification(avatars) {
                 const notification = document.createElement('div');
                 notification.className = 'fixed top-1/3 left-1/2 transform -translate-x-1/2 bg-blue-100 dark:bg-blue-800 text-blue-900 dark:text-blue-100 py-3 px-6 rounded-lg shadow-lg z-[9999] flex flex-col items-center max-w-sm';
                 notification.style.animation = 'fadeInOut 4s ease-in-out forwards';
                 
                 // &#x5275;&#x5efa;&#x901a;&#x77e5;&#x5167;&#x5bb9;
                 let avatarsList = '';
                 avatars.forEach(avatar =&gt; {
                     avatarsList += `&lt;li class="mb-1"&gt;${avatar.name}&lt;/li&gt;`;
                 });
                 
                 notification.innerHTML = `
                     &lt;div class="text-xl font-bold mb-2"&gt;&#x65b0;&#x982d;&#x50cf;&#x89e3;&#x9396;!&lt;/div&gt;
                     &lt;div class="text-m mt-2"&gt;&#x5237;&#x65b0;&#x9801;&#x9762;&#x5f8c;&#x5728;&#x300c;&#x982d;&#x50cf;&#x300d;&#x9801;&#x9762;&#x67e5;&#x770b;&#xff01;&lt;/div&gt;
                 `;
                 
                 document.body.appendChild(notification);
                 
                 // &#x522a;&#x9664;&#x901a;&#x77e5;
                 setTimeout(() =&gt; {
                     notification.remove();
                 }, 4000);
             }
             
             // &#x66f4;&#x65b0;&#x7d93;&#x9a57;&#x503c;&#x986f;&#x793a;
             function updateExpDisplay() {
                 const expBar = document.getElementById('exp-bar');
                 const expText = document.getElementById('exp-text');
                 const userLevel = document.getElementById('user-level');
                 
                 if (expBar &amp;&amp; expText &amp;&amp; userLevel) {
                     const percentage = userProfile.level &gt;= 100 ? 100 : (userProfile.exp / userProfile.nextLevelExp * 100);
                     expBar.style.width = `${percentage}%`;
                     expText.textContent = userProfile.level &gt;= 100 
                         ? "&#x6eff;&#x7d1a;" 
                         : `${userProfile.exp} / ${userProfile.nextLevelExp}`;
                     userLevel.textContent = `Lv.${userProfile.level}`;
                 }
             }
             
             // &#x5f9e;localStorage&#x52a0;&#x8f09;&#x7528;&#x6236;&#x8cc7;&#x6599;
             function loadUserProfile() {
                 try {
                     const savedProfile = localStorage.getItem('MemoryMaster_userProfile');
                     if (savedProfile) {
                         userProfile = JSON.parse(savedProfile);
                         console.log("&#x52a0;&#x8f09;&#x7528;&#x6236;&#x8cc7;&#x6599;:", userProfile);
                         updateExpDisplay();
                         
                         // &#x66f4;&#x65b0;&#x986f;&#x793a;&#x7684;&#x7528;&#x6236;&#x540d;&#x7a31;
                         const userNameElement = document.getElementById('user-name');
                         if (userNameElement &amp;&amp; userProfile.name) {
                             userNameElement.textContent = userProfile.name;
                         }
                     }
                 } catch (error) {
                     console.error("&#x52a0;&#x8f09;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x51fa;&#x932f;:", error);
                 }
             }
             
             // &#x4fdd;&#x5b58;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x5230;localStorage
             function saveUserProfile() {
                 try {
                     localStorage.setItem('MemoryMaster_userProfile', JSON.stringify(userProfile));
                     console.log("&#x4fdd;&#x5b58;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x6210;&#x529f;");
                 } catch (error) {
                     console.error("&#x4fdd;&#x5b58;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x51fa;&#x932f;:", error);
                 }
             }
             
             // &#x7528;&#x6236;&#x540d;&#x7a31;&#x7de8;&#x8f2f;&#x529f;&#x80fd;
             function initializeNameEditor() {
                 const editNameBtn = document.getElementById('edit-name-btn');
                 const saveNameBtn = document.getElementById('save-name-btn');
                 const cancelNameBtn = document.getElementById('cancel-name-btn');
                 const nameDisplayMode = document.getElementById('name-display-mode');
                 const nameEditMode = document.getElementById('name-edit-mode');
                 const userNameElement = document.getElementById('user-name');
                 const userNameInput = document.getElementById('user-name-input');
                 const charCounter = document.getElementById('char-counter');
                 
                 // &#x6aa2;&#x67e5;&#x5fc5;&#x8981;&#x5143;&#x7d20;&#x662f;&#x5426;&#x5b58;&#x5728;
                 if (!editNameBtn || !saveNameBtn || !cancelNameBtn || !nameDisplayMode || !nameEditMode || !userNameElement || !userNameInput || !charCounter) {
                     console.error("&#x7528;&#x6236;&#x540d;&#x7a31;&#x7de8;&#x8f2f;&#x5668;&#x521d;&#x59cb;&#x5316;&#x5931;&#x6557;&#xff1a;&#x7f3a;&#x5c11;&#x5fc5;&#x8981;&#x5143;&#x7d20;");
                     return;
                 }
                 
                 // &#x66f4;&#x65b0;&#x5b57;&#x7b26;&#x8a08;&#x6578;&#x5668;
                 function updateCharCounter() {
                     const currentLength = userNameInput.value.length;
                     const maxLength = userNameInput.maxLength;
                     charCounter.textContent = `${currentLength}/${maxLength}`;
                     
                     // &#x7576;&#x63a5;&#x8fd1;&#x5b57;&#x7b26;&#x4e0a;&#x9650;&#x6642;&#x6539;&#x8b8a;&#x8a08;&#x6578;&#x5668;&#x984f;&#x8272;
                     if (currentLength &gt;= maxLength) {
                         charCounter.classList.add('text-red-500');
                         charCounter.classList.remove('text-gray-500', 'text-amber-500');
                     } else if (currentLength &gt;= maxLength * 0.75) {
                         charCounter.classList.add('text-amber-500');
                         charCounter.classList.remove('text-gray-500', 'text-red-500');
                     } else {
                         charCounter.classList.add('text-gray-500');
                         charCounter.classList.remove('text-amber-500', 'text-red-500');
                     }
                 }
                 
                 // &#x7de8;&#x8f2f;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 editNameBtn.addEventListener('click', function() {
                     // &#x5c07;&#x76ee;&#x524d;&#x7684;&#x7528;&#x6236;&#x540d;&#x586b;&#x5165;&#x8f38;&#x5165;&#x6846;
                     userNameInput.value = userNameElement.textContent;
                     
                     // &#x66f4;&#x65b0;&#x5b57;&#x7b26;&#x8a08;&#x6578;
                     updateCharCounter();
                     
                     // &#x5207;&#x63db;&#x5230;&#x7de8;&#x8f2f;&#x6a21;&#x5f0f;
                     nameDisplayMode.classList.add('hidden');
                     nameEditMode.classList.remove('hidden');
                     
                     // &#x81ea;&#x52d5;&#x805a;&#x7126;&#x8f38;&#x5165;&#x6846;
                     userNameInput.focus();
                 });
                 
                 // &#x8f38;&#x5165;&#x6642;&#x66f4;&#x65b0;&#x5b57;&#x7b26;&#x8a08;&#x6578;
                 userNameInput.addEventListener('input', updateCharCounter);
                 
                 // &#x4fdd;&#x5b58;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 saveNameBtn.addEventListener('click', function() {
                     // &#x7372;&#x53d6;&#x8f38;&#x5165;&#x7684;&#x65b0;&#x540d;&#x7a31;
                     const newName = userNameInput.value.trim();
                     
                     // &#x540d;&#x7a31;&#x4e0d;&#x80fd;&#x70ba;&#x7a7a;
                     if (newName === '') {
                         alert('&#x7528;&#x6236;&#x540d;&#x7a31;&#x4e0d;&#x80fd;&#x70ba;&#x7a7a;');
                         return;
                     }
                     
                     // &#x66f4;&#x65b0;&#x7528;&#x6236;&#x540d;&#x7a31;
                     userNameElement.textContent = newName;
                     
                     // &#x66f4;&#x65b0;&#x7528;&#x6236;&#x8cc7;&#x6599;
                     userProfile.name = newName;
                     
                     // &#x4fdd;&#x5b58;&#x5230;localStorage
                     saveUserProfile();
                     
                     // &#x5207;&#x63db;&#x56de;&#x986f;&#x793a;&#x6a21;&#x5f0f;
                     nameEditMode.classList.add('hidden');
                     nameDisplayMode.classList.remove('hidden');
                     
                     // &#x986f;&#x793a;&#x6210;&#x529f;&#x63d0;&#x793a;
                     const notification = document.createElement('div');
                     notification.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 py-2 px-4 rounded-lg shadow-lg z-50';
                     notification.innerHTML = '&lt;i class="fas fa-check-circle mr-2"&gt;&lt;/i&gt;&#x7528;&#x6236;&#x540d;&#x7a31;&#x5df2;&#x4fdd;&#x5b58;';
                     document.body.appendChild(notification);
                     
                     // 3&#x79d2;&#x5f8c;&#x79fb;&#x9664;&#x63d0;&#x793a;
                     setTimeout(() =&gt; {
                         notification.remove();
                     }, 3000);
                 });
                 
                 // &#x53d6;&#x6d88;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 cancelNameBtn.addEventListener('click', function() {
                     // &#x4e0d;&#x505a;&#x4efb;&#x4f55;&#x66f4;&#x6539;&#xff0c;&#x5207;&#x63db;&#x56de;&#x986f;&#x793a;&#x6a21;&#x5f0f;
                     nameEditMode.classList.add('hidden');
                     nameDisplayMode.classList.remove('hidden');
                 });
                 
                 // &#x652f;&#x6301;&#x6309;Enter&#x9375;&#x4fdd;&#x5b58;
                 userNameInput.addEventListener('keydown', function(event) {
                     if (event.key === 'Enter') {
                         saveNameBtn.click();
                     } else if (event.key === 'Escape') {
                         cancelNameBtn.click();
                     }
                 });
                 
                 console.log("&#x7528;&#x6236;&#x540d;&#x7a31;&#x7de8;&#x8f2f;&#x5668;&#x521d;&#x59cb;&#x5316;&#x5b8c;&#x6210;");
             }
             
             // &#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x5b58;&#x5132;&#x529f;&#x80fd; - &#x7528;&#x65bc;&#x8a18;&#x9304;&#x7528;&#x6236;&#x6210;&#x7e3e;
             initializeLocalStorage();
             
             // &#x52a0;&#x8f09;&#x7528;&#x6236;&#x8cc7;&#x6599;
             loadUserProfile();
             
             // &#x5728;&#x904a;&#x6232;&#x521d;&#x59cb;&#x5316;&#x6642;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x72c0;&#x614b;&#x70ba;&#x300c;&#x672a;&#x958b;&#x59cb;&#x300d;
             updateGameControlButtons('not-started');
             
             // &#x8a2d;&#x7f6e;&#x529f;&#x80fd;&#x521d;&#x59cb;&#x5316;
             function initializeSettings() {
                 const settingsButton = document.getElementById('settings-button');
                 const settingsMenu = document.getElementById('settings-menu');
                 const closeSettings = document.getElementById('close-settings');
                 const settingsOptions = document.querySelectorAll('.settings-option');
                 const infoModal = document.getElementById('info-modal');
                 const closeInfoModal = document.getElementById('close-info-modal');
                 const infoModalTitle = document.getElementById('info-modal-title');
                 const infoModalContent = document.getElementById('info-modal-content');
                 
                 if (!settingsButton || !settingsMenu || !closeSettings || !infoModal || !closeInfoModal || !infoModalTitle || !infoModalContent) {
                     console.error('&#x8a2d;&#x7f6e;&#x76f8;&#x95dc;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;');
                     return;
                 }
                 
                 // &#x6dfb;&#x52a0;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x72c0;&#x614b;&#x63a7;&#x5236;&#x529f;&#x80fd; - &#x8a2d;&#x70ba;&#x5168;&#x5c40;&#x51fd;&#x6578;&#x4ee5;&#x4fbf;&#x5728;&#x5176;&#x4ed6;&#x5730;&#x65b9;&#x8abf;&#x7528;
                 window.disableSettingsButton = function() {
                     settingsButton.classList.add('disabled');
                     settingsButton.style.opacity = '0.5';
                     settingsButton.style.cursor = 'not-allowed';
                     settingsButton.style.pointerEvents = 'none'; // &#x963b;&#x6b62;&#x6240;&#x6709;&#x9ede;&#x64ca;
                 }
                 
                 window.enableSettingsButton = function() {
                     settingsButton.classList.remove('disabled');
                     settingsButton.style.opacity = '1';
                     settingsButton.style.cursor = 'pointer';
                     settingsButton.style.pointerEvents = 'auto';
                 }
                 
                 // &#x6253;&#x958b;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;
                 settingsButton.addEventListener('click', function() {
                     settingsMenu.classList.remove('hidden');
                     // &#x7981;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;&#x76f4;&#x5230;&#x95dc;&#x9589;&#x83dc;&#x55ae;
                     disableSettingsButton();
                 });
                 
                 // &#x95dc;&#x9589;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;&#x4e26;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 closeSettings.addEventListener('click', function() {
                     settingsMenu.classList.add('hidden');
                     enableSettingsButton();
                 });
                 
                 // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;&#x4e26;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 settingsMenu.addEventListener('click', function(e) {
                     if (e.target === settingsMenu) {
                         settingsMenu.classList.add('hidden');
                         enableSettingsButton();
                     }
                 });
                 
                 // &#x95dc;&#x9589;&#x4fe1;&#x606f;&#x6a21;&#x614b;&#x6846;&#x6642;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 closeInfoModal.addEventListener('click', function() {
                     infoModal.classList.add('hidden');
                     enableSettingsButton();
                 });
                 
                 // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;&#x4fe1;&#x606f;&#x6a21;&#x614b;&#x6846;&#x6642;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 infoModal.addEventListener('click', function(e) {
                     if (e.target === infoModal) {
                         infoModal.classList.add('hidden');
                         enableSettingsButton();
                     }
                 });
                 
                 // &#x8a2d;&#x7f6e;&#x9078;&#x9805;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6; - &#x4fee;&#x6b63;&#x7248;&#x672c;&#xff0c;&#x9644;&#x5e36;&#x8abf;&#x8a66;&#x8f38;&#x51fa;
                 settingsOptions.forEach(option =&gt; {
                     option.addEventListener('click', function() {
                         const section = this.dataset.section;
                         console.log(`&#x9ede;&#x64ca;&#x4e86;&#x8a2d;&#x7f6e;&#x9078;&#x9805;: ${section}`);
                         
                         try {
                             // &#x95dc;&#x9589;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;
                             settingsMenu.classList.add('hidden');
                             
                             // &#x78ba;&#x4fdd;&#x6a21;&#x614b;&#x6846;&#x5143;&#x7d20;&#x53ca;&#x5176;&#x5167;&#x5bb9;&#x5340;&#x57df;&#x53ef;&#x7528;
                             if (!infoModal || !infoModalTitle || !infoModalContent) {
                                 console.error("&#x6a21;&#x614b;&#x6846;&#x5143;&#x7d20;&#x672a;&#x627e;&#x5230;:", {
                                     infoModal: !!infoModal,
                                     infoModalTitle: !!infoModalTitle,
                                     infoModalContent: !!infoModalContent
                                 });
                                 alert("&#x7cfb;&#x7d71;&#x932f;&#x8aa4;&#xff1a;&#x7121;&#x6cd5;&#x986f;&#x793a;&#x4fe1;&#x606f;&#x8996;&#x7a97;");
                                 return;
                             }
                             
                             // &#x6839;&#x64da;&#x9078;&#x9805;&#x986f;&#x793a;&#x4e0d;&#x540c;&#x5167;&#x5bb9;
                             if (section === 'help') {
                                 // &#x904a;&#x73a9;&#x8aaa;&#x660e; - &#x986f;&#x793a;&#x904a;&#x73a9;&#x8aaa;&#x660e;&#x5167;&#x5bb9;
                                 infoModalTitle.textContent = '&#x904a;&#x73a9;&#x8aaa;&#x660e;';
                                 infoModalContent.innerHTML = `
                                     &lt;div class="space-y-4"&gt;
                                         &lt;ol class="list-decimal pl-5 space-y-1"&gt;
                                             &lt;li&gt;&lt;strong&gt;&#x87a2;&#x5e55;&#x5c07;&#x986f;&#x793a;&#x6587;&#x7ae0;&#x80cc;&#x8aa6;&#x9032;&#x5ea6;&#xff1b;&lt;/strong&gt;&lt;/li&gt;
                                             &lt;li&gt;&lt;strong&gt;&#x5f9e;&#x4e09;&#x500b;&#x9078;&#x9805;&#x4e2d;&#x9078;&#x64c7;&#x6b63;&#x78ba;&#x7b54;&#x6848;&#xff1b;&lt;/strong&gt;&lt;/li&gt;
                                             &lt;li&gt;&lt;strong&gt;&#x521d;&#x59cb;&#x64c1;&#x6709;3&#x9ede;&#x751f;&#x547d;&#x503c;&#xff0c;&#x6bcf;&#x6b21;&#x932f;&#x8aa4;&#x6263;&#x9664;1&#x9ede;&#xff1b;&lt;/strong&gt;&lt;/li&gt;
                                             &lt;li&gt;&lt;strong&gt;&#x6bcf;&#x5b8c;&#x6210;50&#x500b;&#x5b57;&#x6062;&#x5fa9;1&#x9ede;&#x751f;&#x547d;&#x503c;&#xff08;&#x6700;&#x591a;3&#x9ede;&#xff09;&#xff1b;&lt;/strong&gt;&lt;/li&gt;
                                             &lt;li&gt;&lt;strong&gt;&#x4ee5;&#x6700;&#x5feb;&#x7684;&#x6642;&#x9593;&#x5b8c;&#x6210;&#x6311;&#x6230;&#xff0c;&#x722d;&#x53d6;&#x7372;&#x5f97;&#x6210;&#x5c31;&#xff01;&lt;/strong&gt;&lt;/li&gt;
                                         &lt;/ol&gt;
                                         &lt;div class="mt-4 p-3 bg-amber-50 dark:bg-amber-900/30 rounded-lg"&gt;
                                             &lt;p class="text-amber-800 dark:text-amber-400 font-medium"&gt;&#x6210;&#x5c31;&#x7cfb;&#x7d71;&#xff1a;&lt;/p&gt;
                                             &lt;ul class="list-disc pl-5 mt-2 text-gray-700 dark:text-gray-300"&gt;
                                                 &lt;li&gt;&lt;strong&gt;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&lt;/strong&gt;&lt;/li&gt;
                                                 &lt;li&gt;&lt;strong&gt;&#x9583;&#x96fb;&#x4fe0;&lt;/strong&gt;&lt;/li&gt;
                                                 &lt;li&gt;&lt;strong&gt;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&lt;/strong&gt;&lt;/li&gt;
                                                 &lt;li&gt;&lt;strong&gt;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&lt;/strong&gt;&lt;/li&gt;
                                                 &lt;li&gt;&lt;strong&gt;&#x66f4;&#x591a;&#x96b1;&#x85cf;&#x6210;&#x5c31;&#xff01;&lt;/strong&gt;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                         &lt;p class="mt-2"&gt;&#x66f4;&#x591a;&#x529f;&#x80fd;&#xff0c;&#x656c;&#x8acb;&#x671f;&#x5f85;&#xff01;&lt;/p&gt;
                                     &lt;/div&gt;
                                 `;
                                 infoModal.classList.remove('hidden');
                                 console.log("&#x5df2;&#x986f;&#x793a;&#x904a;&#x73a9;&#x8aaa;&#x660e;");
                                 
                             } else if (section === 'records') {
                                 try {
                                     // &#x6211;&#x7684;&#x8a18;&#x9304; - &#x986f;&#x793a;&#x7528;&#x6236;&#x7684;&#x8a18;&#x9304;
                                     infoModalTitle.textContent = '&#x6211;&#x7684;&#x8a18;&#x9304;&#xff08;&#x53ea;&#x8a08;&#x7b97;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff09;';
                                     
                                     // &#x6aa2;&#x67e5;userRecordsMemory&#x662f;&#x5426;&#x5df2;&#x521d;&#x59cb;&#x5316;
                                     if (typeof userRecordsMemory !== 'object' || userRecordsMemory === null) {
                                         userRecordsMemory = {};
                                         console.log("&#x5728;&#x9ede;&#x64ca;&#x8655;&#x7406;&#x51fd;&#x6578;&#x4e2d;&#x521d;&#x59cb;&#x5316;userRecordsMemory");
                                     }
                                     
                                     // &#x6aa2;&#x67e5;displayUserRecords&#x51fd;&#x6578;&#x662f;&#x5426;&#x5b58;&#x5728;
                                     if (typeof displayUserRecords !== 'function') {
                                         console.error("displayUserRecords&#x51fd;&#x6578;&#x672a;&#x5b9a;&#x7fa9;");
                                         infoModalContent.innerHTML = `
                                             &lt;div class="text-center p-4"&gt;
                                                 &lt;i class="fas fa-exclamation-triangle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                                 &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x7cfb;&#x7d71;&#x932f;&#x8aa4;&#xff1a;&#x7121;&#x6cd5;&#x986f;&#x793a;&#x8a18;&#x9304;&#x529f;&#x80fd;&lt;/p&gt;
                                             &lt;/div&gt;
                                         `;
                                     } else {
                                         // &#x5148;&#x986f;&#x793a;&#x52a0;&#x8f09;&#x8a0a;&#x606f;
                                         infoModalContent.innerHTML = `
                                             &lt;div class="text-center p-4"&gt;
                                                 &lt;i class="fas fa-spinner fa-spin text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                                 &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x8f09;&#x5165;&#x8a18;&#x9304;&#x4e2d;...&lt;/p&gt;
                                             &lt;/div&gt;
                                         `;
                                         
                                         // &#x78ba;&#x4fdd;&#x6a21;&#x614b;&#x6846;&#x5148;&#x986f;&#x793a;
                                         infoModal.classList.remove('hidden');
                                         
                                         // &#x4f7f;&#x7528;setTimeout&#x8b93;UI&#x5148;&#x66f4;&#x65b0;&#xff0c;&#x518d;&#x8abf;&#x7528;&#x986f;&#x793a;&#x8a18;&#x9304;&#x51fd;&#x6578;
                                         setTimeout(() =&gt; {
                                             try {
                                                 displayUserRecords();
                                                 console.log("&#x5df2;&#x986f;&#x793a;&#x7528;&#x6236;&#x8a18;&#x9304;");
                                             } catch (err) {
                                                 console.error("&#x986f;&#x793a;&#x8a18;&#x9304;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", err);
                                                 infoModalContent.innerHTML = `
                                                     &lt;div class="text-center p-4"&gt;
                                                         &lt;i class="fas fa-exclamation-triangle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x8f09;&#x5165;&#x8a18;&#x9304;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&lt;/p&gt;
                                                         &lt;p class="text-gray-500 dark:text-gray-400 text-sm mt-2"&gt;${err.message}&lt;/p&gt;
                                                     &lt;/div&gt;
                                                 `;
                                             }
                                         }, 50);
                                     }
                                 } catch (err) {
                                     console.error("&#x8655;&#x7406;&#x8a18;&#x9304;&#x9078;&#x9805;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", err);
                                     infoModalContent.innerHTML = `
                                         &lt;div class="text-center p-4"&gt;
                                             &lt;i class="fas fa-exclamation-triangle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x8655;&#x7406;&#x8a18;&#x9304;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&lt;/p&gt;
                                             &lt;p class="text-gray-500 dark:text-gray-400 text-sm mt-2"&gt;${err.message}&lt;/p&gt;
                                         &lt;/div&gt;
                                     `;
                                     infoModal.classList.remove('hidden');
                                 }
                                 
                             } else if (section === 'saveload') {
                                 // &#x4fdd;&#x5b58;&#x53ca;&#x8f09;&#x5165;&#x9032;&#x5ea6; - &#x986f;&#x793a;&#x4fdd;&#x5b58;&#x53ca;&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x754c;&#x9762;
                                 infoModalTitle.textContent = '&#x4fdd;&#x5b58;&#x53ca;&#x8f09;&#x5165;&#x9032;&#x5ea6;';
                                 infoModalContent.innerHTML = `
                                     &lt;div class="space-y-6"&gt;
                                         &lt;div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-5"&gt;
                                             &lt;h4 class="text-lg font-medium text-amber-700 dark:text-amber-400 mb-3"&gt;&#x4fdd;&#x5b58;&#x9032;&#x5ea6;&lt;/h4&gt;
                                             &lt;p class="text-gray-700 dark:text-gray-300 mb-4"&gt;&#x9ede;&#x64ca;&#x4e0b;&#x65b9;&#x6309;&#x9215;&#x7372;&#x53d6;&#x7576;&#x524d;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x3002;&#x4fdd;&#x5b58;&#x6b64;&#x4ee3;&#x78bc;&#x4ee5;&#x4fbf;&#x65e5;&#x5f8c;&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x3002;&lt;/p&gt;
                                             &lt;div class="text-center"&gt;
                                                 &lt;button id="generate-save-code-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90"&gt;
                                                     &lt;i class="fas fa-save mr-2"&gt;&lt;/i&gt;&#x751f;&#x6210;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;
                                                 &lt;/button&gt;
                                             &lt;/div&gt;
                                             &lt;div id="save-code-container" class="mt-4 hidden"&gt;
                                                 &lt;p class="text-gray-600 dark:text-gray-400 text-sm mb-2"&gt;&#x60a8;&#x7684;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#xff08;&#x8acb;&#x4fdd;&#x5b58;&#x6b64;&#x4ee3;&#x78bc;&#xff09;&#xff1a;&lt;/p&gt;
                                                 &lt;div class="relative"&gt;
                                                     &lt;textarea id="save-code" class="w-full h-24 p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 text-sm font-mono" readonly&gt;&lt;/textarea&gt;
                                                     &lt;button id="copy-save-code-btn" class="absolute top-2 right-2 p-2 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-lg text-gray-700 dark:text-gray-300"&gt;
                                                         &lt;i class="fas fa-copy"&gt;&lt;/i&gt;
                                                     &lt;/button&gt;
                                                 &lt;/div&gt;
                                             &lt;/div&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-5"&gt;
                                             &lt;h4 class="text-lg font-medium text-amber-700 dark:text-amber-400 mb-3"&gt;&#x8f09;&#x5165;&#x9032;&#x5ea6;&lt;/h4&gt;
                                             &lt;p class="text-gray-700 dark:text-gray-300 mb-4"&gt;&#x5c07;&#x4fdd;&#x5b58;&#x7684;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x7c98;&#x8cbc;&#x5230;&#x4e0b;&#x65b9;&#x8f38;&#x5165;&#x6846;&#xff0c;&#x7136;&#x5f8c;&#x9ede;&#x64ca;&#x8f09;&#x5165;&#x6309;&#x9215;&#x3002;&lt;/p&gt;
                                             &lt;textarea id="load-code-input" class="w-full h-24 p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-800 dark:text-gray-200 text-sm font-mono" placeholder="&#x5728;&#x6b64;&#x8655;&#x7c98;&#x8cbc;&#x60a8;&#x7684;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;..."&gt;&lt;/textarea&gt;
                                             &lt;div class="text-center mt-4"&gt;
                                                 &lt;button id="load-save-code-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90"&gt;
                                                     &lt;i class="fas fa-upload mr-2"&gt;&lt;/i&gt;&#x8f09;&#x5165;&#x9032;&#x5ea6;
                                                 &lt;/button&gt;
                                             &lt;/div&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;div class="p-4 bg-amber-50 dark:bg-amber-900/30 rounded-lg"&gt;
                                             &lt;p class="text-amber-800 dark:text-amber-400 font-medium"&gt;&#x63d0;&#x793a;&lt;/p&gt;
                                             &lt;ul class="list-disc pl-5 mt-2 text-gray-700 dark:text-gray-300 text-sm space-y-1"&gt;
                                                 &lt;li&gt;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x5305;&#x542b;&#x60a8;&#x7684;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x548c;&#x6b77;&#x53f2;&#x6210;&#x5c31;&lt;/li&gt;
                                                 &lt;li&gt;&#x8f09;&#x5165;&#x65b0;&#x9032;&#x5ea6;&#x5c07;&#x8986;&#x84cb;&#x7576;&#x524d;&#x9032;&#x5ea6;&#xff0c;&#x8acb;&#x8b39;&#x614e;&#x64cd;&#x4f5c;&lt;/li&gt;
                                                 &lt;li&gt;&#x5efa;&#x8b70;&#x5b9a;&#x671f;&#x4fdd;&#x5b58;&#x9032;&#x5ea6;&#xff0c;&#x907f;&#x514d;&#x8cc7;&#x6599;&#x4e1f;&#x5931;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                     &lt;/div&gt;
                                 `;
                                 
                                 // &#x78ba;&#x4fdd;&#x6a21;&#x614b;&#x6846;&#x5148;&#x986f;&#x793a;
                                 infoModal.classList.remove('hidden');
                                 
                                 // &#x4f7f;&#x7528;setTimeout&#x8b93;UI&#x5148;&#x66f4;&#x65b0;&#xff0c;&#x518d;&#x6dfb;&#x52a0;&#x4e8b;&#x4ef6;&#x76e3;&#x807d;&#x5668;
                                 setTimeout(() =&gt; {
                                     // &#x751f;&#x6210;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                                     const generateSaveCodeBtn = document.getElementById('generate-save-code-btn');
                                     const saveCodeContainer = document.getElementById('save-code-container');
                                     const saveCodeTextarea = document.getElementById('save-code');
                                     const copySaveCodeBtn = document.getElementById('copy-save-code-btn');
                                     
                                     if (generateSaveCodeBtn &amp;&amp; saveCodeContainer &amp;&amp; saveCodeTextarea) {
                                         generateSaveCodeBtn.addEventListener('click', function() {
                                             try {
                                                 // &#x6536;&#x96c6;&#x9700;&#x8981;&#x4fdd;&#x5b58;&#x7684;&#x6578;&#x64da;
                                                 const saveData = {
                                                     userProfile: userProfile,
                                                     userRecordsMemory: userRecordsMemory,
                                                     globalStats: globalStats,
                                                     userAvatar: userSelectedAvatar,
                                                     selectedAchievements: []
                                                 };
                                                 
                                                 // &#x5617;&#x8a66;&#x5f9e;localStorage&#x7372;&#x53d6;&#x5df2;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;
                                                 try {
                                                     const saved = localStorage.getItem('MemoryMaster_selectedAchievements');
                                                     if (saved) {
                                                         saveData.selectedAchievements = JSON.parse(saved);
                                                     }
                                                 } catch (e) {
                                                     console.error("&#x8b80;&#x53d6;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;&#x51fa;&#x932f;:", e);
                                                 }
                                                 
                                                 // &#x5c07;&#x6578;&#x64da;&#x8f49;&#x63db;&#x70ba;JSON&#x5b57;&#x7b26;&#x4e32;
                                                 const jsonData = JSON.stringify(saveData);
                                                 
                                                 // &#x7c21;&#x55ae;&#x52a0;&#x5bc6;&#x6578;&#x64da;&#xff08;&#x50c5;&#x70ba;&#x6df7;&#x6dc6;&#xff0c;&#x975e;&#x771f;&#x6b63;&#x52a0;&#x5bc6;&#xff09;
                                                 const encodedData = btoa(jsonData);
                                                 
                                                 // &#x751f;&#x6210;&#x96a8;&#x6a5f;&#x5b57;&#x7b26;&#x524d;&#x7db4;&#x548c;&#x5f8c;&#x7db4;&#xff0c;&#x589e;&#x52a0;&#x4ee3;&#x78bc;&#x8907;&#x96dc;&#x5ea6;
                                                 const prefix = Math.random().toString(36).substring(2, 8);
                                                 const suffix = Math.random().toString(36).substring(2, 8);
                                                 
                                                 // &#x7d44;&#x5408;&#x6700;&#x7d42;&#x4ee3;&#x78bc;
                                                 const finalCode = `WY-${prefix}-${encodedData}-${suffix}`;
                                                 
                                                 // &#x986f;&#x793a;&#x4ee3;&#x78bc;
                                                 saveCodeTextarea.value = finalCode;
                                                 saveCodeContainer.classList.remove('hidden');
                                                 
                                                 // &#x986f;&#x793a;&#x6210;&#x529f;&#x63d0;&#x793a;
                                                 const notification = document.createElement('div');
                                                 notification.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 py-2 px-4 rounded-lg shadow-lg z-50';
                                                 notification.innerHTML = '&lt;i class="fas fa-check-circle mr-2"&gt;&lt;/i&gt;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x5df2;&#x751f;&#x6210;';
                                                 document.body.appendChild(notification);
                                                 
                                                 // 3&#x79d2;&#x5f8c;&#x79fb;&#x9664;&#x63d0;&#x793a;
                                                 setTimeout(() =&gt; {
                                                     notification.remove();
                                                 }, 3000);
                                                 
                                             } catch (error) {
                                                 console.error("&#x751f;&#x6210;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x6642;&#x51fa;&#x932f;:", error);
                                                 alert("&#x751f;&#x6210;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x5931;&#x6557;: " + error.message);
                                             }
                                         });
                                     }
                                     
                                     // &#x8907;&#x88fd;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                                     if (copySaveCodeBtn &amp;&amp; saveCodeTextarea) {
                                         copySaveCodeBtn.addEventListener('click', function() {
                                             // &#x9078;&#x4e2d;&#x6587;&#x672c;
                                             saveCodeTextarea.select();
                                             saveCodeTextarea.setSelectionRange(0, 99999); // &#x5c0d;&#x65bc;&#x79fb;&#x52d5;&#x8a2d;&#x5099;
                                             
                                             try {
                                                 // &#x8907;&#x88fd;&#x5230;&#x526a;&#x8cbc;&#x677f;
                                                 const successful = document.execCommand('copy');
                                                 
                                                 // &#x986f;&#x793a;&#x6210;&#x529f;&#x63d0;&#x793a;
                                                 const notification = document.createElement('div');
                                                 notification.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 py-2 px-4 rounded-lg shadow-lg z-50';
                                                 notification.innerHTML = '&lt;i class="fas fa-check-circle mr-2"&gt;&lt;/i&gt;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x5df2;&#x8907;&#x88fd;&#x5230;&#x526a;&#x8cbc;&#x677f;';
                                                 document.body.appendChild(notification);
                                                 
                                                 // 3&#x79d2;&#x5f8c;&#x79fb;&#x9664;&#x63d0;&#x793a;
                                                 setTimeout(() =&gt; {
                                                     notification.remove();
                                                 }, 3000);
                                             } catch (err) {
                                                 console.error("&#x8907;&#x88fd;&#x6587;&#x672c;&#x6642;&#x51fa;&#x932f;:", err);
                                                 alert("&#x8907;&#x88fd;&#x5931;&#x6557;: " + err.message);
                                             }
                                         });
                                     }
                                     
                                     // &#x8f09;&#x5165;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                                     const loadSaveCodeBtn = document.getElementById('load-save-code-btn');
                                     const loadCodeInput = document.getElementById('load-code-input');
                                     
                                     if (loadSaveCodeBtn &amp;&amp; loadCodeInput) {
                                         loadSaveCodeBtn.addEventListener('click', function() {
                                             try {
                                                 const inputCode = loadCodeInput.value.trim();
                                                 
                                                 if (!inputCode) {
                                                     alert("&#x8acb;&#x8f38;&#x5165;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;");
                                                     return;
                                                 }
                                                 
                                                 // &#x9a57;&#x8b49;&#x4ee3;&#x78bc;&#x683c;&#x5f0f;
                                                 if (!inputCode.startsWith('WY-') || inputCode.split('-').length &lt; 4) {
                                                     alert("&#x7121;&#x6548;&#x7684;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x683c;&#x5f0f;");
                                                     return;
                                                 }
                                                 
                                                 // &#x78ba;&#x8a8d;&#x7528;&#x6236;&#x662f;&#x5426;&#x78ba;&#x5be6;&#x8981;&#x52a0;&#x8f09;&#x9032;&#x5ea6;
                                                 if (!confirm("&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x5c07;&#x8986;&#x84cb;&#x7576;&#x524d;&#x6240;&#x6709;&#x6578;&#x64da;&#xff0c;&#x78ba;&#x5b9a;&#x8981;&#x7e7c;&#x7e8c;&#x55ce;&#xff1f;")) {
                                                     return;
                                                 }
                                                 
                                                 // &#x63d0;&#x53d6;&#x7de8;&#x78bc;&#x90e8;&#x5206;
                                                 const parts = inputCode.split('-');
                                                 const encodedData = parts.slice(2, -1).join('-');
                                                 
                                                 // &#x89e3;&#x78bc;&#x6578;&#x64da;
                                                 const jsonData = atob(encodedData);
                                                 
                                                 // &#x89e3;&#x6790;JSON
                                                 const saveData = JSON.parse(jsonData);
                                                 
                                                 // &#x61c9;&#x7528;&#x6578;&#x64da;
                                                 if (saveData.userProfile) {
                                                     userProfile = saveData.userProfile;
                                                     // &#x66f4;&#x65b0;UI&#x986f;&#x793a;
                                                     const userNameElement = document.getElementById('user-name');
                                                     if (userNameElement &amp;&amp; userProfile.name) {
                                                         userNameElement.textContent = userProfile.name;
                                                     }
                                                     
                                                     // &#x66f4;&#x65b0;&#x7d93;&#x9a57;&#x503c;&#x548c;&#x7b49;&#x7d1a;&#x986f;&#x793a;
                                                     updateExpDisplay();
                                                 }
                                                 
                                                 if (saveData.userRecordsMemory) {
                                                     userRecordsMemory = saveData.userRecordsMemory;
                                                 }
                                                 
                                                 if (saveData.globalStats) {
                                                     globalStats = saveData.globalStats;
                                                 }
                                                 
                                                 if (saveData.userAvatar !== undefined) {
                                                     userSelectedAvatar = saveData.userAvatar;
                                                     // &#x66f4;&#x65b0;&#x982d;&#x50cf;&#x986f;&#x793a;
                                                     const userAvatarElement = document.getElementById('user-avatar');
                                                     if (userAvatarElement) {
                                                         renderUserAvatar(userAvatarElement, userSelectedAvatar);
                                                     }
                                                 }
                                                 
                                                 if (saveData.selectedAchievements) {
                                                     // &#x66f4;&#x65b0;&#x6210;&#x5c31;&#x5c55;&#x793a;
                                                     updateAchievementsDisplay(saveData.selectedAchievements);
                                                 }
                                                 
                                                 // &#x4fdd;&#x5b58;&#x5230;localStorage
                                                 try {
                                                     localStorage.setItem('MemoryMaster_userProfile', JSON.stringify(userProfile));
                                                     localStorage.setItem('MemoryMaster_userRecords', JSON.stringify(userRecordsMemory));
                                                     localStorage.setItem('MemoryMaster_globalStats', JSON.stringify(globalStats));
                                                     
                                                     if (userSelectedAvatar === null) {
                                                         localStorage.removeItem('MemoryMaster_userAvatar');
                                                     } else {
                                                         localStorage.setItem('MemoryMaster_userAvatar', userSelectedAvatar);
                                                     }
                                                     
                                                     localStorage.setItem('MemoryMaster_selectedAchievements', JSON.stringify(saveData.selectedAchievements || []));
                                                 } catch (e) {
                                                     console.error("&#x4fdd;&#x5b58;&#x6578;&#x64da;&#x5230;localStorage&#x6642;&#x51fa;&#x932f;:", e);
                                                 }
                                                 
                                                 // &#x986f;&#x793a;&#x6210;&#x529f;&#x63d0;&#x793a;
                                                 const notification = document.createElement('div');
                                                 notification.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 py-2 px-4 rounded-lg shadow-lg z-50';
                                                 notification.innerHTML = '&lt;i class="fas fa-check-circle mr-2"&gt;&lt;/i&gt;&#x9032;&#x5ea6;&#x5df2;&#x6210;&#x529f;&#x8f09;&#x5165;';
                                                 document.body.appendChild(notification);
                                                 
                                                 // 3&#x79d2;&#x5f8c;&#x79fb;&#x9664;&#x63d0;&#x793a;
                                                 setTimeout(() =&gt; {
                                                     notification.remove();
                                                 }, 3000);
                                                 
                                                 // &#x95dc;&#x9589;&#x6a21;&#x614b;&#x6846;
                                                 infoModal.classList.add('hidden');
                                                 
                                                 // &#x5728;&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x5f8c;&#xff0c;&#x7a0d;&#x5fae;&#x5ef6;&#x9072;&#x5237;&#x65b0;&#x9801;&#x9762;
                                                 setTimeout(() =&gt; {
                                                     window.location.reload();
                                                 }, 2000);
                                                 
                                             } catch (error) {
                                                 console.error("&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x4ee3;&#x78bc;&#x6642;&#x51fa;&#x932f;:", error);
                                                 alert("&#x8f09;&#x5165;&#x9032;&#x5ea6;&#x5931;&#x6557;: " + error.message);
                                             }
                                         });
                                     }
                                 }, 100);
                                 
                             } else if (section === 'version') {
                                 // &#x7248;&#x672c;&#x8cc7;&#x8a0a; - &#x986f;&#x793a;&#x7248;&#x672c;&#x66f4;&#x65b0;&#x5167;&#x5bb9;
                                 infoModalTitle.textContent = '&#x7248;&#x672c;&#x8cc7;&#x8a0a;&#xff08;&#x53ea;&#x986f;&#x793a;&#x4e3b;&#x8981;&#x66f4;&#x65b0;&#xff09;';
                                 infoModalContent.innerHTML = `
                                     &lt;div class="space-y-4"&gt;
         
                                         &lt;div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;h4 class="text-lg font-medium text-primary mb-3"&gt;v1.4 &#x66f4;&#x65b0;&#x8cc7;&#x8a0a;&lt;/h4&gt;
                                             &lt;ul class="list-disc pl-4 text-gray-700 dark:text-gray-300 space-y-2"&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x982d;&#x50cf;&lt;/li&gt;
                                                 &lt;li&gt;&#x6e1b;&#x5c11;&#x5347;&#x7d1a;&#x6240;&#x9700;&#x7d93;&#x9a57;&#xff0c;&#x8abf;&#x6574;&#x90e8;&#x5206;&#x6210;&#x5c31;&#x689d;&#x4ef6;&lt;/li&gt;
                                                 &lt;li&gt;&#x5b8c;&#x5584;&#x6210;&#x5c31;&#x8a2d;&#x8a08;&#x53ca;&#x5c55;&#x793a;&#x529f;&#x80fd;&lt;/li&gt;
                                                 &lt;li&gt;&#x6dfb;&#x52a0;&#x66f4;&#x591a;&#x7bc7;&#x7ae0;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;h4 class="text-lg font-medium text-primary mb-3"&gt;v1.3 &#x66f4;&#x65b0;&#x8cc7;&#x8a0a;&lt;/h4&gt;
                                             &lt;ul class="list-disc pl-4 text-gray-700 dark:text-gray-300 space-y-2"&gt;
                                                 &lt;li&gt;&#x6dfb;&#x52a0;&#x672c;&#x5730;&#x5132;&#x5b58;&#x529f;&#x80fd;&#xff0c;&#x5132;&#x5b58;&#x7528;&#x6236;&#x8cc7;&#x6599;&#x548c;&#x6210;&#x5c31;&lt;/li&gt;
                                                 &lt;li&gt;&#x8a18;&#x9304;&#x529f;&#x80fd;&#x6539;&#x9032;&#xff1a;&#x53ea;&#x5728;&#x5b8c;&#x6210;&#x5168;&#x6587;&#x6642;&#x624d;&#x8a08;&#x5165;&#x8a18;&#x9304;&lt;/li&gt;
                                                 &lt;li&gt;&#x4fee;&#x5fa9;&#x5df2;&#x77e5;&#x554f;&#x984c;&#xff0c;&#x63d0;&#x5347;&#x904a;&#x6232;&#x7a69;&#x5b9a;&#x6027;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
         
                                         &lt;div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;h4 class="text-lg font-medium text-primary mb-3"&gt;v1.2 &#x66f4;&#x65b0;&#x8cc7;&#x8a0a;&lt;/h4&gt;
                                             &lt;ul class="list-disc pl-5 text-gray-700 dark:text-gray-300 space-y-2"&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x8a2d;&#x7f6e;&#x4e2d;&#x5fc3;&#xff0c;&#x5305;&#x542b;&#x904a;&#x73a9;&#x8aaa;&#x660e;&#x3001;&#x8a18;&#x9304;&#x548c;&#x6210;&#x5c31;&#x67e5;&#x8a62;&#x3001;&#x7248;&#x672c;&#x8cc7;&#x8a0a;&#x7b49;&lt;/li&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x7528;&#x6236;&#x8a18;&#x9304;&#x529f;&#x80fd;&#xff0c;&#x53ef;&#x67e5;&#x770b;&#x5404;&#x7bc7;&#x7ae0;&#x901a;&#x95dc;&#x6b21;&#x6578;&#x548c;&#x6700;&#x4f73;&#x6210;&#x7e3e;&lt;/li&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x82e5;&#x5e72;&#x6210;&#x5c31;&lt;/li&gt;
                                                 &lt;li&gt;&#x6539;&#x5584;&#x904a;&#x6232;&#x4ecb;&#x9762;&#xff0c;&#x63d0;&#x5347;&#x8996;&#x89ba;&#x6548;&#x679c;&#x548c;&#x7528;&#x6236;&#x9ad4;&#x9a57;&lt;/li&gt;
                                                 &lt;li&gt;&#x4fee;&#x5fa9;&#x5df2;&#x77e5;&#x554f;&#x984c;&#xff0c;&#x63d0;&#x5347;&#x904a;&#x6232;&#x7a69;&#x5b9a;&#x6027;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;h4 class="text-lg font-medium text-primary mb-3"&gt;v1.1 &#x66f4;&#x65b0;&#x8cc7;&#x8a0a;&lt;/h4&gt;
                                             &lt;ul class="list-disc pl-5 text-gray-700 dark:text-gray-300 space-y-2"&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x66ab;&#x505c;&#x529f;&#x80fd;&lt;/li&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x591a;&#x7a2e;&#x6210;&#x5c31;&#x734e;&#x52f5;&lt;/li&gt;
                                                 &lt;li&gt;&#x6539;&#x5584;&#x9078;&#x64c7;&#x7bc7;&#x7ae0;&#x754c;&#x9762;&lt;/li&gt;
                                                 &lt;li&gt;&#x65b0;&#x589e;&#x751f;&#x547d;&#x6062;&#x5fa9;&#x6a5f;&#x5236;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;h4 class="text-lg font-medium text-primary mb-3"&gt;v1.0 &#x521d;&#x59cb;&#x7248;&#x672c;&lt;/h4&gt;
                                             &lt;ul class="list-disc pl-5 text-gray-700 dark:text-gray-300 space-y-2"&gt;
                                                 &lt;li&gt;&#x57fa;&#x790e;&#x904a;&#x6232;&#x529f;&#x80fd;&#x4e0a;&#x7dda;&lt;/li&gt;
                                                 &lt;li&gt;&#x652f;&#x6301;&#x591a;&#x7bc7;&#x6587;&#x8a00;&#x6587;&#x80cc;&#x8aa6;&lt;/li&gt;
                                                 &lt;li&gt;&#x652f;&#x6301;&#x5206;&#x6bb5;&#x7df4;&#x7fd2;&lt;/li&gt;
                                             &lt;/ul&gt;
                                         &lt;/div&gt;
                                         
                                     &lt;/div&gt;
                                 `;
                                 infoModal.classList.remove('hidden');
                                 console.log("&#x5df2;&#x986f;&#x793a;&#x7248;&#x672c;&#x8cc7;&#x8a0a;");
                                 
                             } else if (section === 'achievements') {
                                 // &#x986f;&#x793a;&#x6b77;&#x53f2;&#x6210;&#x5c31;
                                 infoModalTitle.textContent = '&#x6b77;&#x53f2;&#x6210;&#x5c31;';
                                 
                                 // &#x78ba;&#x4fdd;&#x986f;&#x793a;&#x6210;&#x5c31;&#x51fd;&#x6578;&#x5df2;&#x5b9a;&#x7fa9;
                                 if (typeof displayAchievements !== 'function') {
                                     console.error("displayAchievements&#x51fd;&#x6578;&#x672a;&#x5b9a;&#x7fa9;");
                                     infoModalContent.innerHTML = `
                                         &lt;div class="text-center p-4"&gt;
                                             &lt;i class="fas fa-exclamation-triangle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x7cfb;&#x7d71;&#x932f;&#x8aa4;&#xff1a;&#x7121;&#x6cd5;&#x986f;&#x793a;&#x6210;&#x5c31;&#x529f;&#x80fd;&lt;/p&gt;
                                         &lt;/div&gt;
                                     `;
                                 } else {
                                     // &#x5148;&#x986f;&#x793a;&#x52a0;&#x8f09;&#x8a0a;&#x606f;
                                     infoModalContent.innerHTML = `
                                         &lt;div class="text-center p-4"&gt;
                                             &lt;i class="fas fa-spinner fa-spin text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x8f09;&#x5165;&#x6210;&#x5c31;&#x4e2d;...&lt;/p&gt;
                                         &lt;/div&gt;
                                     `;
                                     
                                     // &#x78ba;&#x4fdd;&#x6a21;&#x614b;&#x6846;&#x5148;&#x986f;&#x793a;
                                     infoModal.classList.remove('hidden');
                                     
                                     // &#x4f7f;&#x7528;setTimeout&#x8b93;UI&#x5148;&#x66f4;&#x65b0;&#xff0c;&#x518d;&#x8abf;&#x7528;&#x986f;&#x793a;&#x6210;&#x5c31;&#x51fd;&#x6578;
                                     setTimeout(() =&gt; {
                                         try {
                                             displayAchievements();
                                             console.log("&#x5df2;&#x986f;&#x793a;&#x6b77;&#x53f2;&#x6210;&#x5c31;");
                                         } catch (err) {
                                             console.error("&#x986f;&#x793a;&#x6210;&#x5c31;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;:", err);
                                             infoModalContent.innerHTML = `
                                                 &lt;div class="text-center p-4"&gt;
                                                     &lt;i class="fas fa-exclamation-triangle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                                                     &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x8f09;&#x5165;&#x6210;&#x5c31;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;&lt;/p&gt;
                                                     &lt;p class="text-gray-500 dark:text-gray-400 text-sm mt-2"&gt;${err.message}&lt;/p&gt;
                                                 &lt;/div&gt;
                                             `;
                                         }
                                     }, 50);
                                 }
                             } else if (section === 'about') {
                                 // &#x95dc;&#x65bc;&#x88fd;&#x4f5c;&#x8005; - &#x986f;&#x793a;&#x88fd;&#x4f5c;&#x8005;&#x76f8;&#x95dc;&#x4fe1;&#x606f;
                                 infoModalTitle.textContent = '&#x95dc;&#x65bc;&#x88fd;&#x4f5c;&#x8005;';
                                 infoModalContent.innerHTML = `
                                     &lt;div class="space-y-4"&gt;
                                         &lt;div class="flex flex-col items-center mb-4"&gt;
                                             &lt;div class="w-20 h-20 bg-amber-100 dark:bg-amber-800 rounded-full flex items-center justify-center text-2xl text-amber-800 dark:text-amber-100 mb-2"&gt;
                                                 &lt;i class="fas fa-user"&gt;&lt;/i&gt;
                                             &lt;/div&gt;
                                             &lt;h3 class="text-lg font-medium"&gt;IG&#xff1a;@dse.chinese.meme&lt;/h3&gt;
                                             &lt;p class="text-gray-500 dark:text-gray-400 text-sm"&gt;&#x701d;&#x6e90;&#x90a8;&#x6821; &#x4e2d;&#x6587;&#x79d1;&#x8001;&#x5e2b;&lt;/p&gt;
                                         &lt;/div&gt;
                                         
                                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;
                                             &#x6700;&#x8fd1;&#x6c89;&#x8ff7;&#x7528;POE&#x88fd;&#x4f5c;&#x6559;&#x5b78;&#x5de5;&#x5177;&#x3002;&#x65e9;&#x524d;&#x8ddf;&#x540c;&#x4e8b;&#x5c55;&#x793a;&#x6587;&#x8a00;&#x6587;&#x7ffb;&#x8b6f;bot&#x6642;&#xff0c;&#x6709;&#x540c;&#x4e8b;&#x63d0;&#x4e86;&#x4e00;&#x53e5;&#xff1a;&#x300c;&#x6211;&#x5011;&#x662f;&#x4e0d;&#x662f;&#x8b93;&#x5b78;&#x7fd2;&#x6587;&#x8a00;&#x6587;&#x8b8a;&#x5f97;&#x67af;&#x71e5;&#x4e86;&#xff1f;&#x300d;&#x6211;&#x9a40;&#x7136;&#x60f3;&#x8d77;&#x300a;&#x7bc4;&#x6587;&#x722d;&#x9738;&#x6230;&#x300b;&#xff0c;&#x4e00;&#x6b3e;&#x6211;&#x4e2d;&#x5b78;&#x6642;&#x98a8;&#x9761;&#x4e00;&#x6642;&#xff0c;&#x537b;&#x4e0d;&#x77e5;&#x4f55;&#x6642;&#x6d88;&#x5931;&#x65bc;&#x6b77;&#x53f2;&#x7684;&#x904a;&#x6232;&#x3002;&#x65bc;&#x662f;&#xff0c;&#x6211;&#x7528;&#x76f8;&#x540c;&#x7684;&#x6982;&#x5ff5;&#x505a;&#x4e86;&#x300a;&#x6587;&#x8a00;&#x5927;&#x5e2b;&#x4e4b;&#x65c5;&#x300b;&#x3002;
                                         &lt;/p&gt;
                                         
                                         &lt;p class="text-gray-700 dark:text-gray-300"&gt;
                                             &#x77e5;&#x4e4b;&#x8005;&#x4e0d;&#x5982;&#x597d;&#x4e4b;&#x8005;&#xff0c;&#x597d;&#x4e4b;&#x8005;&#x4e0d;&#x5982;&#x6a02;&#x4e4b;&#x8005;&#x3002;&#x6211;&#x60f3;&#xff0c;&#x5982;&#x679c;&#x71b1;&#x611b;&#x4e00;&#x4ef6;&#x4e8b;&#xff0c;&#x7e3d;&#x80fd;&#x628a;&#x5b83;&#x505a;&#x597d;&#x7684;&#x3002;
                                         &lt;/p&gt;
                                         
                                         &lt;div class="mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"&gt;
                                             &lt;p class="text-gray-600 dark:text-gray-400 text-sm text-center"&gt;
                                                 &#x6c92;&#x4ec0;&#x9ebc;&#x4e8b;&#x60c5;&#x662f;&#x505a;&#x4e0d;&#x5230;&#x7684;&#xff0c;&#x9664;&#x4e86;&#x6578;&#x5b78;&#x3002;
                                             &lt;/p&gt;
                                         &lt;/div&gt;
                                     &lt;/div&gt;
                                 `;
                                 infoModal.classList.remove('hidden');
                                 console.log("&#x5df2;&#x986f;&#x793a;&#x95dc;&#x65bc;&#x88fd;&#x4f5c;&#x8005;");
                             }
                         } catch (err) {
                             console.error("&#x8a2d;&#x7f6e;&#x9078;&#x9805;&#x9ede;&#x64ca;&#x8655;&#x7406;&#x767c;&#x751f;&#x932f;&#x8aa4;:", err);
                             alert("&#x767c;&#x751f;&#x932f;&#x8aa4;&#xff0c;&#x8acb;&#x6aa2;&#x67e5;&#x63a7;&#x5236;&#x53f0;&#x4ee5;&#x7372;&#x53d6;&#x8a73;&#x7d30;&#x4fe1;&#x606f;");
                         }
                     });
                 });
             }
             
             // &#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x5b58;&#x5132;&#x529f;&#x80fd;
             function initializeLocalStorage() {
                 console.log("&#x521d;&#x59cb;&#x5316;&#x672c;&#x5730;&#x5b58;&#x5132;&#x529f;&#x80fd;...");
                 
                 // &#x9996;&#x5148;&#x6aa2;&#x67e5;&#x700f;&#x89bd;&#x5668;&#x662f;&#x5426;&#x652f;&#x6301;localStorage
                 try {
                     // &#x9032;&#x884c;&#x6e2c;&#x8a66;&#x5beb;&#x5165;&#x548c;&#x8b80;&#x53d6;&#x4ee5;&#x78ba;&#x8a8d;localStorage&#x53ef;&#x7528;&#x6027;
                     localStorage.setItem('test', 'test');
                     if (localStorage.getItem('test') !== 'test') {
                         throw new Error("localStorage&#x8b80;&#x5beb;&#x6e2c;&#x8a66;&#x5931;&#x6557;");
                     }
                     localStorage.removeItem('test');
                     console.log("localStorage&#x53ef;&#x7528;&#x6027;&#x6e2c;&#x8a66;&#x901a;&#x904e;");
                 } catch (e) {
                     console.error("localStorage&#x4e0d;&#x53ef;&#x7528;:", e);
                     // &#x5132;&#x5b58;&#x529f;&#x80fd;&#x4e0d;&#x53ef;&#x7528;&#x6642;&#x7e7c;&#x7e8c;&#x4f7f;&#x7528;&#x5167;&#x5b58;&#x5b58;&#x5132;
                     userRecordsMemory = {};
                     initializeDefaultStats();
                     alert("&#x6ce8;&#x610f;&#xff1a;&#x672c;&#x5730;&#x5132;&#x5b58;&#x529f;&#x80fd;&#x4e0d;&#x53ef;&#x7528;&#xff0c;&#x60a8;&#x7684;&#x8a18;&#x9304;&#x5c07;&#x4e0d;&#x6703;&#x88ab;&#x4fdd;&#x5b58;&#x3002;&#x53ef;&#x80fd;&#x539f;&#x56e0;&#xff1a;&#x79c1;&#x96b1;&#x6a21;&#x5f0f;&#x700f;&#x89bd;&#x6216;&#x700f;&#x89bd;&#x5668;&#x9650;&#x5236;&#x3002;");
                     return;
                 }
                 
                 try {
                     // &#x5f9e;localStorage&#x8f09;&#x5165;&#x7528;&#x6236;&#x8a18;&#x9304;
                     let rawUserRecords = localStorage.getItem('MemoryMaster_userRecords');
                     // &#x95dc;&#x9375;&#x9ede;&#xff1a;&#x4fee;&#x6b63;&#x4e86;localStorage&#x7684;&#x9375;&#x540d;&#xff0c;&#x6dfb;&#x52a0;&#x4e86;&#x61c9;&#x7528;&#x524d;&#x7db4;&#x907f;&#x514d;&#x547d;&#x540d;&#x885d;&#x7a81;
                     
                     console.log("&#x539f;&#x59cb;&#x7528;&#x6236;&#x8a18;&#x9304;&#x6578;&#x64da;:", rawUserRecords);
                     
                     if (rawUserRecords) {
                         try {
                             userRecordsMemory = JSON.parse(rawUserRecords);
                             console.log("&#x89e3;&#x6790;&#x5f8c;&#x7684;&#x7528;&#x6236;&#x8a18;&#x9304;:", userRecordsMemory);
                             console.log("&#x5f9e;localStorage&#x8f09;&#x5165;&#x8a18;&#x9304;&#x6210;&#x529f;:", Object.keys(userRecordsMemory).length, "&#x500b;&#x8a18;&#x9304;");
                         } catch (e) {
                             console.error("&#x89e3;&#x6790;userRecords&#x6642;&#x51fa;&#x932f;:", e);
                             console.log("&#x7121;&#x6548;&#x7684;JSON&#x683c;&#x5f0f;:", rawUserRecords);
                             userRecordsMemory = {};
                             localStorage.setItem('MemoryMaster_userRecords', JSON.stringify({}));
                         }
                     } else {
                         console.log("&#x672a;&#x627e;&#x5230;&#x73fe;&#x6709;&#x8a18;&#x9304;&#xff0c;&#x5275;&#x5efa;&#x65b0;&#x7684;&#x7a7a;&#x8a18;&#x9304;");
                         userRecordsMemory = {};
                         localStorage.setItem('MemoryMaster_userRecords', JSON.stringify({}));
                         console.log("&#x521d;&#x59cb;&#x5316;userRecords&#x672c;&#x5730;&#x5b58;&#x5132;");
                     }
                     
                     // &#x5f9e;localStorage&#x8f09;&#x5165;&#x5168;&#x5c40;&#x7d71;&#x8a08;&#x6578;&#x64da;
                     let rawGlobalStats = localStorage.getItem('MemoryMaster_globalStats');
                     console.log("&#x539f;&#x59cb;&#x5168;&#x5c40;&#x7d71;&#x8a08;&#x6578;&#x64da;:", rawGlobalStats);
                     
                     if (rawGlobalStats) {
                         try {
                             globalStats = JSON.parse(rawGlobalStats);
                             console.log("&#x89e3;&#x6790;&#x5f8c;&#x7684;&#x5168;&#x5c40;&#x7d71;&#x8a08;:", globalStats);
                             console.log("&#x5f9e;localStorage&#x8f09;&#x5165;&#x7d71;&#x8a08;&#x6578;&#x64da;&#x6210;&#x529f;");
                         } catch (e) {
                             console.error("&#x89e3;&#x6790;globalStats&#x6642;&#x51fa;&#x932f;:", e);
                             console.log("&#x7121;&#x6548;&#x7684;JSON&#x683c;&#x5f0f;:", rawGlobalStats);
                             initializeDefaultStats();
                         }
                     } else {
                         console.log("&#x672a;&#x627e;&#x5230;&#x73fe;&#x6709;&#x5168;&#x5c40;&#x7d71;&#x8a08;&#xff0c;&#x5275;&#x5efa;&#x9ed8;&#x8a8d;&#x7d71;&#x8a08;&#x6578;&#x64da;");
                         initializeDefaultStats();
                         console.log("&#x521d;&#x59cb;&#x5316;globalStats&#x672c;&#x5730;&#x5b58;&#x5132;");
                     }
                     
                     // &#x7acb;&#x5373;&#x4fdd;&#x5b58;&#x4e00;&#x6b21;&#xff0c;&#x78ba;&#x8a8d;&#x6578;&#x64da;&#x80fd;&#x5920;&#x6b63;&#x78ba;&#x5beb;&#x5165;
                     saveStats(true);
                 } catch (error) {
                     console.error("&#x8f09;&#x5165;&#x672c;&#x5730;&#x5b58;&#x5132;&#x6578;&#x64da;&#x6642;&#x51fa;&#x932f;:", error);
                     // &#x521d;&#x59cb;&#x5316;&#x9ed8;&#x8a8d;&#x6578;&#x64da;
                     userRecordsMemory = {};
                     initializeDefaultStats();
                 }
             }
             
             // &#x521d;&#x59cb;&#x5316;&#x9ed8;&#x8a8d;&#x7d71;&#x8a08;&#x6578;&#x64da;
             function initializeDefaultStats() {
                 console.log("&#x521d;&#x59cb;&#x5316;&#x9ed8;&#x8a8d;&#x7d71;&#x8a08;&#x6578;&#x64da;");
                 globalStats = {
                     totalCompletionCount: 0,
                     failAfterHalfwayCount: 0,
                     lightningAchievementCount: 0,
                     perfectAchievementCount: 0,
                     memoryAchievementCount: 0,
                     tirelessAchievementCount: 0,
                     nightOwlAchievementCount: 0,
                     badDigestionAchievementCount: 0,
                     // &#x8a18;&#x9304;&#x5404;&#x5206;&#x985e;&#x7bc7;&#x7ae0;&#x5b8c;&#x6210;&#x60c5;&#x6cc1;
                     specifiedTextCompletions: {}, // &#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                     literatureCompletions: {},   // &#x6587;&#x5b78;&#x7bc7;&#x7ae0;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                     achievements: {
                         nightOwl: false,
                         badDigestion: false,
                         dryEyes: false,
                         nightOwlKing: false,
                         focusOnEating: false,
                         adventureLevel: 0,
                         defeatLevel: 0,
                         speedRouteLevel: 0,
                         perfectRouteLevel: 0,
                         memoryRouteLevel: 0,
                         specifiedTextRouteLevel: 0, // &#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;
                         literatureRouteLevel: 0     // &#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;
                     }
                 };
                 
                 try {
                     localStorage.setItem('MemoryMaster_globalStats', JSON.stringify(globalStats));
                     console.log("&#x9ed8;&#x8a8d;&#x7d71;&#x8a08;&#x6578;&#x64da;&#x5df2;&#x4fdd;&#x5b58;&#x5230;localStorage");
                 } catch (e) {
                     console.error("&#x4fdd;&#x5b58;&#x9ed8;&#x8a8d;&#x7d71;&#x8a08;&#x6578;&#x64da;&#x6642;&#x51fa;&#x932f;:", e);
                 }
             }
             
             // &#x4fdd;&#x5b58;&#x7d71;&#x8a08;&#x6578;&#x64da;&#x5230;localStorage
             function saveStats(isInitial = false) {
                 if (!isInitial) {
                     console.log("&#x4fdd;&#x5b58;&#x7d71;&#x8a08;&#x6578;&#x64da;&#x5230;localStorage...");
                 }
                 
                 // &#x6e2c;&#x8a66;localStorage&#x53ef;&#x7528;&#x6027;
                 try {
                     localStorage.setItem('test', 'test');
                     localStorage.removeItem('test');
                 } catch (e) {
                     console.error("localStorage&#x4e0d;&#x53ef;&#x7528;&#xff0c;&#x7121;&#x6cd5;&#x4fdd;&#x5b58;&#x6578;&#x64da;:", e);
                     return false;
                 }
                 
                 try {
                     // &#x5c07;&#x8981;&#x4fdd;&#x5b58;&#x7684;&#x6578;&#x64da;&#x8f49;&#x70ba;JSON&#x5b57;&#x7b26;&#x4e32;
                     const userRecordsJson = JSON.stringify(userRecordsMemory);
                     const globalStatsJson = JSON.stringify(globalStats);
                     
                     // &#x6aa2;&#x67e5;&#x6578;&#x64da;&#x5927;&#x5c0f;&#x662f;&#x5426;&#x8d85;&#x904e;&#x700f;&#x89bd;&#x5668;&#x9650;&#x5236;(&#x901a;&#x5e38;&#x7d04;5MB)
                     const totalSize = userRecordsJson.length + globalStatsJson.length;
                     if (totalSize &gt; 4 * 1024 * 1024) { // 4MB&#x8b66;&#x544a;&#x95be;&#x503c;
                         console.warn("&#x6578;&#x64da;&#x5927;&#x5c0f;&#x63a5;&#x8fd1;localStorage&#x9650;&#x5236;:", totalSize, "bytes");
                     }
                     
                     // &#x4fdd;&#x5b58;&#x7528;&#x6236;&#x8a18;&#x9304;&#x548c;&#x5168;&#x5c40;&#x7d71;&#x8a08;
                     localStorage.setItem('MemoryMaster_userRecords', userRecordsJson);
                     localStorage.setItem('MemoryMaster_globalStats', globalStatsJson);
                     
                     // &#x9a57;&#x8b49;&#x4fdd;&#x5b58;&#x662f;&#x5426;&#x6210;&#x529f;
                     const savedUserRecords = localStorage.getItem('MemoryMaster_userRecords');
                     const savedGlobalStats = localStorage.getItem('MemoryMaster_globalStats');
                     
                     if (savedUserRecords !== userRecordsJson || savedGlobalStats !== globalStatsJson) {
                         console.error("&#x6578;&#x64da;&#x9a57;&#x8b49;&#x5931;&#x6557;&#xff0c;&#x4fdd;&#x5b58;&#x7684;&#x6578;&#x64da;&#x8207;&#x539f;&#x59cb;&#x6578;&#x64da;&#x4e0d;&#x4e00;&#x81f4;");
                         return false;
                     }
                     
                     if (!isInitial) {
                         console.log("&#x6578;&#x64da;&#x5df2;&#x6210;&#x529f;&#x4fdd;&#x5b58;&#x4e26;&#x9a57;&#x8b49;");
                     }
                     return true;
                 } catch (error) {
                     console.error("&#x4fdd;&#x5b58;&#x6578;&#x64da;&#x5230;localStorage&#x6642;&#x51fa;&#x932f;:", error);
                     return false;
                 }
             }
             
             // &#x986f;&#x793a;&#x7528;&#x6236;&#x8a18;&#x9304; - &#x6539;&#x826f;&#x7248; (&#x5305;&#x542b;&#x672a;&#x5b8c;&#x6210;&#x7bc7;&#x7ae0;)
             function displayUserRecords() {
                 const infoModalContent = document.getElementById('info-modal-content');
                 if (!infoModalContent) return;
                 
                 // &#x4f7f;&#x7528;&#x5167;&#x5b58;&#x4e2d;&#x7684;&#x8a18;&#x9304;
                 const hasRecords = Object.keys(userRecordsMemory).length &gt; 0;
                 
                 // &#x5b9a;&#x7fa9;&#x5206;&#x985e;&#x9806;&#x5e8f;
                 const categoryOrder = ['&#x4e2d;&#x4e00;', '&#x4e2d;&#x4e8c;', '&#x4e2d;&#x4e09;', '&#x6307;&#x5b9a;&#x6587;&#x8a00;', '&#x6587;&#x5b78;', '&#x5176;&#x4ed6;'];
                 
                 // &#x5206;&#x985e;&#x9078;&#x64c7;&#x5668;
                 let recordsHTML = `
                 &lt;div class="mb-6"&gt;
                     &lt;div class="flex items-center justify-between mb-3"&gt;
                         &lt;h4 class="text-lg font-medium text-amber-800 dark:text-amber-400"&gt;&#x6309;&#x5206;&#x985e;&#x67e5;&#x770b;&lt;/h4&gt;
                     &lt;/div&gt;
                     &lt;div class="flex flex-wrap gap-2"&gt;
                         &lt;button class="category-filter py-1 px-3 bg-primary text-white rounded-lg hover:bg-opacity-90 text-sm" data-category="all"&gt;&#x5168;&#x90e8;&lt;/button&gt;
                 `;
                 
                 // &#x5206;&#x985e;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#xff0c;&#x5305;&#x62ec;&#x5c1a;&#x672a;&#x5b8c;&#x6210;&#x7684;
                 const categorizedPassages = {};
                 
                 // &#x5148;&#x5c07;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x6309;&#x5206;&#x985e;&#x6574;&#x7406;
                 Object.keys(passages).forEach(passageKey =&gt; {
                     const passage = passages[passageKey];
                     const category = passage.category || '&#x5176;&#x4ed6;';
                     
                     if (!categorizedPassages[category]) {
                         categorizedPassages[category] = [];
                     }
                     
                     // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x6709;&#x8a18;&#x9304;
                     const record = userRecordsMemory[passageKey] || null;
                     
                     categorizedPassages[category].push({
                         passageKey,
                         title: passage.title,
                         author: passage.author,
                         category: category,
                         record: record,
                         hasRecord: !!record
                     });
                 });
                 
                 // &#x70ba;&#x6bcf;&#x500b;&#x6709;&#x7bc7;&#x7ae0;&#x7684;&#x5206;&#x985e;&#x5275;&#x5efa;&#x7be9;&#x9078;&#x6309;&#x9215;
                 categoryOrder.forEach(category =&gt; {
                     if (categorizedPassages[category] &amp;&amp; categorizedPassages[category].length &gt; 0) {
                         recordsHTML += `
                             &lt;button class="category-filter py-1 px-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 text-sm" data-category="${category}"&gt;
                                 ${category}
                             &lt;/button&gt;
                         `;
                     }
                 });
                 
                 recordsHTML += `&lt;/div&gt;&lt;/div&gt;`;
                 
                 // &#x5982;&#x679c;&#x5b8c;&#x5168;&#x6c92;&#x6709;&#x7bc7;&#x7ae0;&#x8a18;&#x9304;
                 if (Object.keys(categorizedPassages).length === 0) {
                     recordsHTML += `
                         &lt;div class="text-center p-4"&gt;
                             &lt;i class="fas fa-info-circle text-amber-500 text-3xl mb-3"&gt;&lt;/i&gt;
                             &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x5c1a;&#x672a;&#x52a0;&#x8f09;&#x4efb;&#x4f55;&#x7bc7;&#x7ae0;&lt;/p&gt;
                         &lt;/div&gt;
                     `;
                     infoModalContent.innerHTML = recordsHTML;
                     return;
                 }
                 
                 recordsHTML += `&lt;div class="space-y-4 records-container"&gt;`;
                 
                 // &#x6309;&#x7167;&#x9810;&#x5b9a;&#x7fa9;&#x9806;&#x5e8f;&#x8655;&#x7406;&#x5206;&#x985e;
                 categoryOrder.forEach(category =&gt; {
                     if (categorizedPassages[category] &amp;&amp; categorizedPassages[category].length &gt; 0) {
                         recordsHTML += `
                             &lt;div class="category-section mb-4" data-category="${category}"&gt;
                                 &lt;h4 class="text-lg font-medium text-amber-800 dark:text-amber-400 mb-2"&gt;${category}&lt;/h4&gt;
                                 &lt;div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg overflow-hidden"&gt;
                         `;
                         
                         // &#x5c0d;&#x8a72;&#x5206;&#x985e;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x6309;&#x6a19;&#x984c;&#x6392;&#x5e8f;
                         categorizedPassages[category].sort((a, b) =&gt; {
                             if (a.title &lt; b.title) return -1;
                             if (a.title &gt; b.title) return 1;
                             return 0;
                         });
                         
                         // &#x751f;&#x6210;&#x8a72;&#x5206;&#x985e;&#x4e0b;&#x7684;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x8a18;&#x9304; (&#x5305;&#x62ec;&#x672a;&#x5b8c;&#x6210;&#x7684;)
                         categorizedPassages[category].forEach((item, index) =&gt; {
                             // &#x5224;&#x65b7;&#x662f;&#x5426;&#x6709;&#x8a18;&#x9304;
                             if (item.hasRecord) {
                                 // &#x683c;&#x5f0f;&#x5316;&#x6700;&#x4f73;&#x6642;&#x9593;
                                 let bestTimeFormatted = "&#x672a;&#x6709;&#x8a18;&#x9304;";
                                 if (item.record.bestTime) {
                                     const minutes = Math.floor(item.record.bestTime / 60);
                                     const seconds = (item.record.bestTime % 60).toFixed(1);
                                     bestTimeFormatted = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(4, '0')}`;
                                 }
                                 
                                 recordsHTML += `
                                     &lt;div class="p-3 ${index &gt; 0 ? 'border-t border-gray-200 dark:border-gray-600' : ''}"&gt;
                                         &lt;div class="flex justify-between items-start"&gt;
                                             &lt;div&gt;
                                                 &lt;p class="font-medium text-gray-800 dark:text-gray-200"&gt;${item.title}&lt;/p&gt;
                                                 &lt;p class="text-sm text-gray-500 dark:text-gray-400"&gt;${item.author}&lt;/p&gt;
                                             &lt;/div&gt;
                                             &lt;div class="text-right"&gt;
                                                 &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x5b8c;&#x6210;&#xff1a;&lt;span class="font-medium"&gt;${item.record.completionCount || 0}&lt;/span&gt; &#x6b21;&lt;/p&gt;
                                                 &lt;p class="text-gray-700 dark:text-gray-300"&gt;&#x6700;&#x4f73;&#xff1a;&lt;span class="font-medium"&gt;${bestTimeFormatted}&lt;/span&gt;&lt;/p&gt;
                                             &lt;/div&gt;
                                         &lt;/div&gt;
                                     &lt;/div&gt;
                                 `;
                             } else {
                                 // &#x986f;&#x793a;&#x672a;&#x5b8c;&#x6210;&#x7684;&#x7bc7;&#x7ae0;
                                 recordsHTML += `
                                     &lt;div class="p-3 ${index &gt; 0 ? 'border-t border-gray-200 dark:border-gray-600' : ''} bg-gray-50 dark:bg-gray-800/30"&gt;
                                         &lt;div class="flex justify-between items-start"&gt;
                                             &lt;div&gt;
                                                 &lt;p class="font-medium text-gray-600 dark:text-gray-400"&gt;${item.title}&lt;/p&gt;
                                                 &lt;p class="text-sm text-gray-500 dark:text-gray-500"&gt;${item.author}&lt;/p&gt;
                                             &lt;/div&gt;
                                             &lt;div class="text-right"&gt;
                                                 &lt;p class="text-amber-600 dark:text-amber-500 italic text-sm"&gt;&#x672a;&#x6709;&#x8a18;&#x9304;&lt;/p&gt;
                                             &lt;/div&gt;
                                         &lt;/div&gt;
                                     &lt;/div&gt;
                                 `;
                             }
                         });
                         
                         recordsHTML += `&lt;/div&gt;&lt;/div&gt;`;
                     }
                 });
                 
                 recordsHTML += `&lt;/div&gt;`;
                 
                 infoModalContent.innerHTML = recordsHTML;
                 
                 // &#x70ba;&#x5206;&#x985e;&#x7be9;&#x9078;&#x6309;&#x9215;&#x6dfb;&#x52a0;&#x4e8b;&#x4ef6;&#x76e3;&#x807d;&#x5668;
                 setTimeout(() =&gt; {
                     const categoryFilters = infoModalContent.querySelectorAll('.category-filter');
                     const categorySections = infoModalContent.querySelectorAll('.category-section');
                     
                     categoryFilters.forEach(filter =&gt; {
                         filter.addEventListener('click', function() {
                             // &#x79fb;&#x9664;&#x6240;&#x6709;&#x6309;&#x9215;&#x7684;&#x9ad8;&#x4eae;&#x6a23;&#x5f0f;
                             categoryFilters.forEach(btn =&gt; {
                                 btn.classList.remove('bg-primary', 'text-white');
                                 btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
                             });
                             
                             // &#x9ad8;&#x4eae;&#x7576;&#x524d;&#x9078;&#x4e2d;&#x7684;&#x6309;&#x9215;
                             this.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
                             this.classList.add('bg-primary', 'text-white');
                             
                             // &#x7372;&#x53d6;&#x9078;&#x4e2d;&#x7684;&#x5206;&#x985e;
                             const selectedCategory = this.dataset.category;
                             
                             // &#x986f;&#x793a;/&#x96b1;&#x85cf;&#x76f8;&#x61c9;&#x7684;&#x5206;&#x985e;&#x677f;&#x584a;
                             if (selectedCategory === 'all') {
                                 // &#x986f;&#x793a;&#x6240;&#x6709;&#x5206;&#x985e;
                                 categorySections.forEach(section =&gt; {
                                     section.style.display = 'block';
                                 });
                             } else {
                                 // &#x53ea;&#x986f;&#x793a;&#x9078;&#x4e2d;&#x7684;&#x5206;&#x985e;
                                 categorySections.forEach(section =&gt; {
                                     if (section.dataset.category === selectedCategory) {
                                         section.style.display = 'block';
                                     } else {
                                         section.style.display = 'none';
                                     }
                                 });
                             }
                         });
                     });
                     
                     // &#x9ed8;&#x8a8d;&#x9078;&#x4e2d;"&#x5168;&#x90e8;"&#x6309;&#x9215;
                     const allFilter = infoModalContent.querySelector('.category-filter[data-category="all"]');
                     if (allFilter) {
                         allFilter.click();
                     }
                 }, 100);
             }
             
             // &#x5b8c;&#x5168;&#x79fb;&#x9664;&#x91cd;&#x8907;&#x7684;&#x5ba3;&#x544a;&#x548c;&#x5c0d;&#x8c61;&#x5b9a;&#x7fa9;&#xff0c;&#x56e0;&#x70ba;&#x9019;&#x4e9b;&#x5df2;&#x7d93;&#x5728;&#x524d;&#x9762;&#x5b9a;&#x7fa9;&#x904e;&#x4e86;
             
             // &#x8a18;&#x9304;&#x901a;&#x95dc;&#x6210;&#x7e3e;
             function recordCompletionStats(passageKey, completionTime, isFullPassage) {
                 // &#x53ea;&#x8a18;&#x9304;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#x7684;&#x6210;&#x7e3e;
                 if (!isFullPassage) {
                     console.log("&#x975e;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff0c;&#x4e0d;&#x8a18;&#x9304;&#x6210;&#x7e3e;");
                     return;
                 }
                 
                 try {
                     // &#x78ba;&#x4fdd;userRecordsMemory&#x5df2;&#x521d;&#x59cb;&#x5316;
                     if (typeof userRecordsMemory !== 'object' || userRecordsMemory === null) {
                         userRecordsMemory = {};
                         console.log("&#x521d;&#x59cb;&#x5316;userRecordsMemory");
                     }
                     
                     // &#x78ba;&#x4fdd;globalStats&#x5df2;&#x521d;&#x59cb;&#x5316;
                     if (typeof globalStats !== 'object' || globalStats === null) {
                         initializeDefaultStats();
                     }
                     
                     // &#x78ba;&#x4fdd;&#x5206;&#x985e;&#x5b8c;&#x6210;&#x60c5;&#x6cc1;&#x8a18;&#x9304;&#x5df2;&#x521d;&#x59cb;&#x5316;
                     if (!globalStats.specifiedTextCompletions) {
                         globalStats.specifiedTextCompletions = {};
                     }
                     if (!globalStats.literatureCompletions) {
                         globalStats.literatureCompletions = {};
                     }
                     
                     // &#x66f4;&#x65b0;&#x8a18;&#x9304;
                     if (!userRecordsMemory[passageKey]) {
                         userRecordsMemory[passageKey] = {
                             completionCount: 0,
                             bestTime: null
                         };
                     }
                     
                     // &#x589e;&#x52a0;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                     userRecordsMemory[passageKey].completionCount = (userRecordsMemory[passageKey].completionCount || 0) + 1;
                     
                     // &#x66f4;&#x65b0;&#x5168;&#x5c40;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                     globalStats.totalCompletionCount = (globalStats.totalCompletionCount || 0) + 1;
                     
                     // &#x7372;&#x53d6;&#x7576;&#x524d;&#x7bc7;&#x7ae0;&#x8cc7;&#x8a0a;
                     const passage = passages[passageKey];
                     if (passage) {
                         const category = passage.category || '&#x5176;&#x4ed6;';
                         
                         // &#x66f4;&#x65b0;&#x5206;&#x985e;&#x5b8c;&#x6210;&#x7d71;&#x8a08;
                         if (category === '&#x6307;&#x5b9a;&#x6587;&#x8a00;') {
                             if (!globalStats.specifiedTextCompletions[passageKey]) {
                                 globalStats.specifiedTextCompletions[passageKey] = 0;
                             }
                             globalStats.specifiedTextCompletions[passageKey]++;
                             
                             // &#x6aa2;&#x67e5;&#x66f4;&#x65b0;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                             updateSpecifiedTextAchievement();
                         } else if (category === '&#x6587;&#x5b78;') {
                             if (!globalStats.literatureCompletions[passageKey]) {
                                 globalStats.literatureCompletions[passageKey] = 0;
                             }
                             globalStats.literatureCompletions[passageKey]++;
                             
                             // &#x6aa2;&#x67e5;&#x66f4;&#x65b0;&#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                             updateLiteratureAchievement();
                         }
                     }
                     
                     // &#x66f4;&#x65b0;&#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                     if (globalStats.totalCompletionCount &gt;= 300 &amp;&amp; globalStats.achievements.adventureLevel &lt; 5) {
                         globalStats.achievements.adventureLevel = 5; // &#x6383;&#x5730;&#x50e7;
                     } else if (globalStats.totalCompletionCount &gt;= 150 &amp;&amp; globalStats.achievements.adventureLevel &lt; 4) {
                         globalStats.achievements.adventureLevel = 4; // &#x504f;&#x57f7;&#x72c2;
                     } else if (globalStats.totalCompletionCount &gt;= 50 &amp;&amp; globalStats.achievements.adventureLevel &lt; 3) {
                         globalStats.achievements.adventureLevel = 3; // &#x5927;&#x5e2b;
                     } else if (globalStats.totalCompletionCount &gt;= 10 &amp;&amp; globalStats.achievements.adventureLevel &lt; 2) {
                         globalStats.achievements.adventureLevel = 2; // &#x52c7;&#x8005;
                     } else if (globalStats.totalCompletionCount &gt;= 1 &amp;&amp; globalStats.achievements.adventureLevel &lt; 1) {
                         globalStats.achievements.adventureLevel = 1; // &#x521d;&#x5fc3;&#x8005;
                     }
                     
                     // &#x6aa2;&#x67e5;&#x7279;&#x6b8a;&#x6642;&#x9593;&#x6210;&#x5c31;
                     const now = new Date();
                     const hours = now.getHours();
                     const minutes = now.getMinutes();
                     
                     // &#x5224;&#x65b7;&#x591c;&#x8c93;&#x6210;&#x5c31; (01:00-03:00)
                     if (hours &gt;= 1 &amp;&amp; hours &lt; 3) {
                         globalStats.achievements.nightOwl = true;
                         
                         // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x591c;&#x8c93;&#x6210;&#x5c31;&#x6b21;&#x6578;
                         globalStats.nightOwlAchievementCount = (globalStats.nightOwlAchievementCount || 0) + 1;
                         
                         // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x9054;&#x6210;&#x300c;&#x591c;&#x8c93;&#x738b;&#x300d;&#x6210;&#x5c31;&#xff08;&#x7372;&#x5f97;&#x591c;&#x8c93;20&#x6b21;&#xff09;
                         if (globalStats.nightOwlAchievementCount &gt;= 20 &amp;&amp; !globalStats.achievements.nightOwlKing) {
                             globalStats.achievements.nightOwlKing = true;
                             console.log("&#x7372;&#x5f97;&#x7368;&#x7acb;&#x6210;&#x5c31;&#xff1a;&#x591c;&#x8c93;&#x738b;&#xff08;&#x7372;&#x5f97;&#x591c;&#x8c93;20&#x6b21;&#xff09;");
                         }
                     }
                     
                     // &#x5224;&#x65b7;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6210;&#x5c31; (11:59-12:45)
                     if ((hours == 11 &amp;&amp; minutes &gt;= 59) || (hours == 12 &amp;&amp; minutes &lt;= 45)) {
                         globalStats.achievements.badDigestion = true;
                         
                         // &#x589e;&#x52a0;&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x6210;&#x5c31;&#x6b21;&#x6578;
                         globalStats.badDigestionAchievementCount = (globalStats.badDigestionAchievementCount || 0) + 1;
                         
                         // &#x6aa2;&#x67e5;&#x662f;&#x5426;&#x9054;&#x6210;&#x300c;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#x300d;&#x6210;&#x5c31;&#xff08;&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;20&#x6b21;&#xff09;
                         if (globalStats.badDigestionAchievementCount &gt;= 20 &amp;&amp; !globalStats.achievements.focusOnEating) {
                             globalStats.achievements.focusOnEating = true;
                             console.log("&#x7372;&#x5f97;&#x7368;&#x7acb;&#x6210;&#x5c31;&#xff1a;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#xff08;&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;20&#x6b21;&#xff09;");
                         }
                     }
                     
                     // &#x66f4;&#x65b0;&#x6700;&#x4f73;&#x6642;&#x9593;&#xff08;&#x5982;&#x679c;&#x6bd4;&#x73fe;&#x6709;&#x8a18;&#x9304;&#x66f4;&#x597d;&#x6216;&#x6c92;&#x6709;&#x8a18;&#x9304;&#xff09;
                     if (userRecordsMemory[passageKey].bestTime === null || completionTime &lt; userRecordsMemory[passageKey].bestTime) {
                         userRecordsMemory[passageKey].bestTime = completionTime;
                     }
                     
                     // &#x4fdd;&#x5b58;&#x66f4;&#x65b0;&#x5f8c;&#x7684;&#x6578;&#x64da;&#x5230;localStorage
                     saveStats();
                     
                     console.log(`&#x66f4;&#x65b0;&#x8a18;&#x9304;&#xff1a;${passageKey}&#xff0c;&#x5b8c;&#x6210;&#x6b21;&#x6578;: ${userRecordsMemory[passageKey].completionCount}, &#x6700;&#x4f73;&#x6642;&#x9593;: ${userRecordsMemory[passageKey].bestTime}`);
                     console.log("&#x7576;&#x524d;&#x8a18;&#x9304;&#x6578;&#x64da;&#xff1a;", JSON.stringify(userRecordsMemory));
                     console.log("&#x5168;&#x5c40;&#x7d71;&#x8a08;&#xff1a;", JSON.stringify(globalStats));
                 } catch (e) {
                     console.error('&#x8a18;&#x9304;&#x6210;&#x7e3e;&#x6642;&#x767c;&#x751f;&#x932f;&#x8aa4;', e);
                 }
             }
             
             // &#x6aa2;&#x67e5;&#x4e26;&#x66f4;&#x65b0;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#x6210;&#x5c31;
             function updateSpecifiedTextAchievement() {
                 // &#x8981;&#x6c42;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#x5c0d;&#x61c9;&#x6bcf;&#x500b;&#x7b49;&#x7d1a;
                 const requirements = [1, 3, 10, 20];
                 
                 // &#x7372;&#x53d6;&#x6240;&#x6709;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x985e;&#x5225;&#x7684;&#x7bc7;&#x7ae0;
                 const specifiedTextPassages = Object.keys(passages).filter(key =&gt; 
                     passages[key].category === '&#x6307;&#x5b9a;&#x6587;&#x8a00;'
                 );
                 
                 // &#x5982;&#x679c;&#x6c92;&#x6709;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#xff0c;&#x5247;&#x9000;&#x51fa;
                 if (specifiedTextPassages.length === 0) return;
                 
                 // &#x7372;&#x53d6;&#x6bcf;&#x500b;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                 const completionCounts = specifiedTextPassages.map(key =&gt; 
                     globalStats.specifiedTextCompletions[key] || 0
                 );
                 
                 // &#x627e;&#x51fa;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#xff08;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x4e2d;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#x6700;&#x5c11;&#x7684;&#xff09;
                 const minCompletions = Math.min(...completionCounts);
                 
                 // &#x66f4;&#x65b0;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                 for (let i = requirements.length - 1; i &gt;= 0; i--) {
                     if (minCompletions &gt;= requirements[i]) {
                         // &#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x81f3;&#x5c11;&#x90fd;&#x5b8c;&#x6210;&#x4e86;&#x9019;&#x500b;&#x7b49;&#x7d1a;&#x7684;&#x8981;&#x6c42;&#x6b21;&#x6578;
                         if (globalStats.achievements.specifiedTextRouteLevel &lt; i + 1) {
                             globalStats.achievements.specifiedTextRouteLevel = i + 1;
                             console.log(`&#x66f4;&#x65b0;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;: ${i + 1}`);
                         }
                         break;
                     }
                 }
             }
             
             // &#x6aa2;&#x67e5;&#x4e26;&#x66f4;&#x65b0;&#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#x6210;&#x5c31;
             function updateLiteratureAchievement() {
                 // &#x8981;&#x6c42;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#x5c0d;&#x61c9;&#x6bcf;&#x500b;&#x7b49;&#x7d1a;
                 const requirements = [1, 3, 10, 20];
                 
                 // &#x7372;&#x53d6;&#x6240;&#x6709;&#x6587;&#x5b78;&#x985e;&#x5225;&#x7684;&#x7bc7;&#x7ae0;
                 const literaturePassages = Object.keys(passages).filter(key =&gt; 
                     passages[key].category === '&#x6587;&#x5b78;'
                 );
                 
                 // &#x5982;&#x679c;&#x6c92;&#x6709;&#x6587;&#x5b78;&#x7bc7;&#x7ae0;&#xff0c;&#x5247;&#x9000;&#x51fa;
                 if (literaturePassages.length === 0) return;
                 
                 // &#x7372;&#x53d6;&#x6bcf;&#x500b;&#x6587;&#x5b78;&#x7bc7;&#x7ae0;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;
                 const completionCounts = literaturePassages.map(key =&gt; 
                     globalStats.literatureCompletions[key] || 0
                 );
                 
                 // &#x627e;&#x51fa;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#xff08;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x4e2d;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#x6700;&#x5c11;&#x7684;&#xff09;
                 const minCompletions = Math.min(...completionCounts);
                 
                 // &#x66f4;&#x65b0;&#x6210;&#x5c31;&#x7b49;&#x7d1a;
                 for (let i = requirements.length - 1; i &gt;= 0; i--) {
                     if (minCompletions &gt;= requirements[i]) {
                         // &#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x81f3;&#x5c11;&#x90fd;&#x5b8c;&#x6210;&#x4e86;&#x9019;&#x500b;&#x7b49;&#x7d1a;&#x7684;&#x8981;&#x6c42;&#x6b21;&#x6578;
                         if (globalStats.achievements.literatureRouteLevel &lt; i + 1) {
                             globalStats.achievements.literatureRouteLevel = i + 1;
                             console.log(`&#x66f4;&#x65b0;&#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;: ${i + 1}`);
                         }
                         break;
                     }
                 }
             }
             
             // &#x986f;&#x793a;&#x6b77;&#x53f2;&#x6210;&#x5c31;
         function displayAchievements() {
         const infoModalContent = document.getElementById('info-modal-content');
         if (!infoModalContent) return;
         
         // &#x78ba;&#x4fdd;globalStats&#x5df2;&#x521d;&#x59cb;&#x5316;
         if (typeof globalStats !== 'object' || globalStats === null) {
         initializeDefaultStats();
         }
         
         // &#x5275;&#x5efa;SVG&#x5fbd;&#x7ae0;
         const createAchievementSVG = (colors, borderColor) =&gt; {
         const uniqueId = 'seal_' + Math.random().toString(36).substr(2, 9);
         return `
         &lt;svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;
             &lt;defs&gt;
                 &lt;radialGradient id="${uniqueId}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"&gt;
                     &lt;stop offset="0%" style="stop-color:${colors.center}" /&gt;
                     &lt;stop offset="70%" style="stop-color:${colors.middle}" /&gt;
                     &lt;stop offset="100%" style="stop-color:${colors.outer}" /&gt;
                 &lt;/radialGradient&gt;
             &lt;/defs&gt;
             &lt;circle cx="50" cy="50" r="45" fill="url(#${uniqueId})" /&gt;
             &lt;circle cx="50" cy="50" r="42" fill="none" stroke="${borderColor}" stroke-width="1" stroke-dasharray="2,1" /&gt;
             &lt;circle cx="50" cy="50" r="38" fill="none" stroke="${borderColor}" stroke-width="0.5" /&gt;
         &lt;/svg&gt;
         `;
         };
         
         // &#x5404;&#x6210;&#x5c31;&#x984f;&#x8272;&#x5b9a;&#x7fa9;
         // &#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x984f;&#x8272;
         const adventureColors = [
         { center: '#B3E5FC', middle: '#4FC3F7', outer: '#0288D1' }, // &#x521d;&#x5fc3;&#x8005;
         { center: '#EF5350', middle: '#E53935', outer: '#C62828' }, // &#x52c7;&#x8005;
         { center: '#FFD54F', middle: '#FFC107', outer: '#FFA000' }, // &#x5927;&#x5e2b;
         { center: '#BA68C8', middle: '#AB47BC', outer: '#8E24AA' }, // &#x504f;&#x57f7;&#x72c2;
         { center: '#A5D6A7', middle: '#81C784', outer: '#4CAF50' }  // &#x6383;&#x5730;&#x50e7;
         ];
         
         // &#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x984f;&#x8272;
         const defeatColors = [
         { center: '#D7CCC8', middle: '#8D6E63', outer: '#4E342E' }, // &#x521d;&#x5617;&#x6557;&#x7e3e;
         { center: '#E3F2FD', middle: '#90CAF9', outer: '#1565C0' }, // &#x5805;&#x6bc5;
         { center: '#80DEEA', middle: '#26A69A', outer: '#004D40' }, // &#x92fc;&#x9435;&#x610f;&#x5fd7;
         { center: '#FFE0B2', middle: '#FFB74D', outer: '#E65100' }, // &#x5c0f;&#x5f37;&#x662f;&#x6211;
         { center: '#E0F7FA', middle: '#80DEEA', outer: '#00838F' }  // &#x5fc3;&#x5982;&#x6b62;&#x6c34;
         ];
         
         // &#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x984f;&#x8272;
         const speedColors = [
         { center: '#FF5252', middle: '#D50000', outer: '#B71C1C' }, // &#x654f;&#x6377;
         { center: '#FF9800', middle: '#F57C00', outer: '#E65100' }, // &#x808c;&#x8089;&#x8a18;&#x61b6;
         { center: '#00B4D8', middle: '#0096C7', outer: '#023E8A' }, // &#x7121;&#x5f71;&#x624b;
         { center: '#FFEE58', middle: '#FFD600', outer: '#F9A825' }  // &#x4e16;&#x754c;&#x7b2c;&#x4e00;&#x675f;&#x5149;
         ];
         
         // &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x984f;&#x8272;
         const perfectColors = [
         { center: '#80CBC4', middle: '#4DB6AC', outer: '#E8F5E9' }, // &#x5982;&#x6c90;&#x6625;&#x98a8;
         { center: '#F06292', middle: '#EC407A', outer: '#AD1457' }, // &#x5b8c;&#x7f8e;&#x4e3b;&#x7fa9;
         { center: '#FFD54F', middle: '#FFB300', outer: '#5D4037' }, // &#x6eff;&#x6708;
         { center: '#B39DDB', middle: '#7E57C2', outer: '#4527A0' }  // &#x81f3;&#x5584;
         ];
         
         // &#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x984f;&#x8272;
         const memoryColors = [
         { center: '#00E5FF', middle: '#00B8D4', outer: '#006064' }, // &#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de;
         { center: '#FFD54F', middle: '#FFB300', outer: '#F57F17' }, // &#x8a18;&#x61b6;&#x9eb5;&#x5305;
         { center: '#5C6BC0', middle: '#3949AB', outer: '#283593' }, // &#x79fb;&#x52d5;&#x5716;&#x66f8;&#x9928;
         { center: '#26C6DA', middle: '#00ACC1', outer: '#00838F' }  // &#x6d41;&#x5982;&#x80cc;&#x5012;
         ];
         
         // &#x7279;&#x6b8a;&#x7d2f;&#x7a4d;&#x6210;&#x5c31;&#x984f;&#x8272;
         const dryEyesColors = { center: '#FFCC80', middle: '#FFA726', outer: '#EF6C00' }; // &#x773c;&#x4e7e;
         const nightOwlKingColors = { center: '#5D4037', middle: '#3E2723', outer: '#1B0000' }; // &#x591c;&#x8c93;&#x738b;
         const focusOnEatingColors = { center: '#FFFFFF', middle: '#FFD0B0', outer: '#FF8A65' }; // &#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;
         
         let contentHTML = `
         &lt;div class="space-y-6"&gt;
         &lt;!-- &#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x5192;&#x96aa;&#x4e4b;&#x8def;&#xff08;&#x53ea;&#x8a08;&#x7b97;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff09;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const adventureLevels = ['&#x521d;&#x5fc3;&#x8005;', '&#x52c7;&#x8005;', '&#x5927;&#x5e2b;', '&#x504f;&#x57f7;&#x72c2;', '&#x6383;&#x5730;&#x50e7;'];
         const adventureRequirements = [1, 10, 50, 150, 300];
         const adventureBorderColors = ['#90CAF9', '#4CAF50', '#F4511E', '#673AB7', '#FFC107'];
         
         // &#x7576;&#x524d;&#x5192;&#x96aa;&#x7b49;&#x7d1a;
         const currentLevel = globalStats.achievements.adventureLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(adventureColors[levelIndex], adventureBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${adventureLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x5b8c;&#x6210;${adventureRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${adventureLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x7e3d;&#x5b8c;&#x6210;&#x6b21;&#x6578;&#xff1a;${globalStats.totalCompletionCount}&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentLevel &lt; 5) {
             const nextLevelIndex = currentLevel;
             const nextRequirement = adventureRequirements[nextLevelIndex];
             const progress = Math.min(100, (globalStats.totalCompletionCount / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${adventureLevels[nextLevelIndex]}" &#x9084;&#x9700; ${nextRequirement - globalStats.totalCompletionCount} &#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-medal text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x5192;&#x96aa;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x5b8c;&#x6210;&#x81f3;&#x5c11;1&#x6b21;&#x6311;&#x6230;&#x89e3;&#x9396;&#x300c;&#x521d;&#x5fc3;&#x8005;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x632b;&#x6557;&#x4e4b;&#x8def;&#xff08;&#x53ea;&#x8a08;&#x7b97;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff09;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const defeatLevels = ['&#x521d;&#x5617;&#x6557;&#x7e3e;', '&#x5805;&#x6bc5;', '&#x92fc;&#x9435;&#x610f;&#x5fd7;', '&#x5c0f;&#x5f37;&#x662f;&#x6211;', '&#x5fc3;&#x5982;&#x6b62;&#x6c34;'];
         const defeatRequirements = [1, 5, 30, 50, 100];
         const defeatBorderColors = ['#7E57C2', '#42A5F5', '#00796B', '#F57C00', '#D32F2F'];
         
         // &#x7576;&#x524d;&#x632b;&#x6557;&#x7b49;&#x7d1a;
         const currentDefeatLevel = globalStats.achievements.defeatLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentDefeatLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentDefeatLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(defeatColors[levelIndex], defeatBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${defeatLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x5931;&#x6557;${defeatRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${defeatLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x904a;&#x6232;&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;&#xff1a;${globalStats.failAfterHalfwayCount}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentDefeatLevel &lt; 5) {
             const nextLevelIndex = currentDefeatLevel;
             const nextRequirement = defeatRequirements[nextLevelIndex];
             const progress = Math.min(100, (globalStats.failAfterHalfwayCount / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${defeatLevels[nextLevelIndex]}" &#x9084;&#x9700; ${nextRequirement - globalStats.failAfterHalfwayCount} &#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-bolt-lightning text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x632b;&#x6557;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x5728;&#x904a;&#x6232;&#x904e;&#x534a;&#x5f8c;&#x5931;&#x6557;&#x81f3;&#x5c11;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x521d;&#x5617;&#x6557;&#x7e3e;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x6975;&#x901f;&#x4e4b;&#x8def;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const speedLevels = ['&#x654f;&#x6377;', '&#x808c;&#x8089;&#x8a18;&#x61b6;', '&#x7121;&#x5f71;&#x624b;', '&#x4e16;&#x754c;&#x7b2c;&#x4e00;&#x675f;&#x5149;'];
         const speedRequirements = [1, 10, 50, 100];
         const speedBorderColors = ['#311B92', '#283593', '#1565C0', '#0277BD'];
         
         // &#x7576;&#x524d;&#x6975;&#x901f;&#x7b49;&#x7d1a;
         const currentSpeedLevel = globalStats.achievements.speedRouteLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentSpeedLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentSpeedLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(speedColors[levelIndex], speedBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${speedLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x7372;&#x5f97;${speedRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${speedLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x9583;&#x96fb;&#x4fe0;&#x6210;&#x5c31;&#x7372;&#x5f97;&#x6b21;&#x6578;&#xff1a;${globalStats.lightningAchievementCount}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentSpeedLevel &lt; 4) {
             const nextLevelIndex = currentSpeedLevel;
             const nextRequirement = speedRequirements[nextLevelIndex];
             const progress = Math.min(100, (globalStats.lightningAchievementCount / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${speedLevels[nextLevelIndex]}" &#x9084;&#x9700; ${nextRequirement - globalStats.lightningAchievementCount} &#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-bolt text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x6975;&#x901f;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x7372;&#x5f97;&#x300c;&#x9583;&#x96fb;&#x4fe0;&#x300d;&#x6210;&#x5c31;&#x81f3;&#x5c11;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x654f;&#x6377;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const perfectLevels = ['&#x5982;&#x6c90;&#x6625;&#x98a8;', '&#x5b8c;&#x7f8e;&#x4e3b;&#x7fa9;', '&#x6eff;&#x6708;', '&#x81f3;&#x5584;'];
         const perfectRequirements = [1, 10, 50, 100];
         const perfectBorderColors = ['#AD1457', '#6A1B9A', '#4527A0', '#283593'];
         
         // &#x7576;&#x524d;&#x5b8c;&#x7f8e;&#x7b49;&#x7d1a;
         const currentPerfectLevel = globalStats.achievements.perfectRouteLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentPerfectLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentPerfectLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(perfectColors[levelIndex], perfectBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${perfectLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x7372;&#x5f97;${perfectRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${perfectLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&#x6210;&#x5c31;&#x7372;&#x5f97;&#x6b21;&#x6578;&#xff1a;${globalStats.perfectAchievementCount}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentPerfectLevel &lt; 4) {
             const nextLevelIndex = currentPerfectLevel;
             const nextRequirement = perfectRequirements[nextLevelIndex];
             const progress = Math.min(100, (globalStats.perfectAchievementCount / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${perfectLevels[nextLevelIndex]}" &#x9084;&#x9700; ${nextRequirement - globalStats.perfectAchievementCount} &#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-gem text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x5b8c;&#x7f8e;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x7372;&#x5f97;&#x300c;&#x5b8c;&#x7f8e;&#x7121;&#x7455;&#x300d;&#x6210;&#x5c31;&#x81f3;&#x5c11;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x5982;&#x6c90;&#x6625;&#x98a8;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x8a18;&#x61b6;&#x4e4b;&#x8def;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const memoryLevels = ['&#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de;', '&#x8a18;&#x61b6;&#x9eb5;&#x5305;', '&#x79fb;&#x52d5;&#x5716;&#x66f8;&#x9928;', '&#x6d41;&#x5982;&#x80cc;&#x5012;'];
         const memoryRequirements = [1, 10, 30, 50];
         const memoryBorderColors = ['#004D40', '#00838F', '#2E7D32', '#558B2F'];
         
         // &#x7576;&#x524d;&#x8a18;&#x61b6;&#x7b49;&#x7d1a;
         const currentMemoryLevel = globalStats.achievements.memoryRouteLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentMemoryLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentMemoryLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(memoryColors[levelIndex], memoryBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${memoryLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x7372;&#x5f97;${memoryRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${memoryLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&#x6210;&#x5c31;&#x7372;&#x5f97;&#x6b21;&#x6578;&#xff1a;${globalStats.memoryAchievementCount}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentMemoryLevel &lt; 4) {
             const nextLevelIndex = currentMemoryLevel;
             const nextRequirement = memoryRequirements[nextLevelIndex];
             const progress = Math.min(100, (globalStats.memoryAchievementCount / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${memoryLevels[nextLevelIndex]}" &#x9084;&#x9700; ${nextRequirement - globalStats.memoryAchievementCount} &#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-brain text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x8a18;&#x61b6;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x7372;&#x5f97;&#x300c;&#x8a18;&#x61b6;&#x5927;&#x5e2b;&#x300d;&#x6210;&#x5c31;&#x81f3;&#x5c11;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#xff08;&#x53ea;&#x8a08;&#x7b97;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff09;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const specifiedTextLevels = ['&#x65b0;&#x5175;&#x4e0a;&#x9663;', '&#x552f;&#x624b;&#x719f;&#x723e;', '&#x529f;&#x5728;&#x4e0d;&#x820d;', '&#x56db;&#x671b;&#x5982;&#x4e00;'];
         const specifiedTextRequirements = [1, 3, 10, 20];
         const specifiedTextBorderColors = ['#8D6E63', '#6D4C41', '#5D4037', '#4E342E'];
         const specifiedTextColors = [
         { center: '#A1887F', middle: '#8D6E63', outer: '#795548' }, // &#x65b0;&#x5175;&#x4e0a;&#x9663;
         { center: '#8D6E63', middle: '#795548', outer: '#6D4C41' }, // &#x552f;&#x624b;&#x719f;&#x723e;
         { center: '#795548', middle: '#6D4C41', outer: '#5D4037' }, // &#x529f;&#x5728;&#x4e0d;&#x820d;
         { center: '#6D4C41', middle: '#5D4037', outer: '#4E342E' }  // &#x56db;&#x671b;&#x5982;&#x4e00;
         ];
         
         // &#x7372;&#x53d6;&#x6240;&#x6709;&#x300c;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x300d;&#x5206;&#x985e;&#x7684;&#x7bc7;&#x7ae0;
         const specifiedTextPassages = Object.keys(passages).filter(key =&gt; 
         passages[key].category === '&#x6307;&#x5b9a;&#x6587;&#x8a00;'
         );
         
         // &#x5f9e;&#x7528;&#x6236;&#x8a18;&#x9304;&#x4e2d;&#x8b80;&#x53d6;&#x6bcf;&#x7bc7;&#x7bc7;&#x7ae0;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         const completionCounts = specifiedTextPassages.map(key =&gt; 
         userRecordsMemory[key]?.completionCount || 0
         );
         
         // &#x627e;&#x51fa;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         const minCompletions = completionCounts.length &gt; 0 ? Math.min(...completionCounts) : 0;
         
         // &#x78ba;&#x5b9a;&#x6210;&#x5c31;&#x7b49;&#x7d1a; - &#x57fa;&#x65bc;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x7684;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         let calculatedLevel = 0;
         for (let i = 0; i &lt; specifiedTextRequirements.length; i++) {
         if (minCompletions &gt;= specifiedTextRequirements[i]) {
             calculatedLevel = i + 1;
         } else {
             break;
         }
         }
         
         // &#x66f4;&#x65b0;&#x5168;&#x5c40;&#x7d71;&#x8a08;&#x4e2d;&#x7684;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#xff08;&#x5982;&#x679c;&#x8a08;&#x7b97;&#x51fa;&#x7684;&#x7b49;&#x7d1a;&#x66f4;&#x9ad8;&#xff09;
         if (calculatedLevel &gt; globalStats.achievements.specifiedTextRouteLevel) {
         globalStats.achievements.specifiedTextRouteLevel = calculatedLevel;
         // &#x4fdd;&#x5b58;&#x66f4;&#x65b0;&#x7684;&#x7d71;&#x8a08;
         saveStats();
         }
         
         // &#x4f7f;&#x7528;&#x66f4;&#x65b0;&#x5f8c;&#x7684;&#x7b49;&#x7d1a;
         const currentSpecifiedTextLevel = globalStats.achievements.specifiedTextRouteLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentSpecifiedTextLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentSpecifiedTextLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(specifiedTextColors[levelIndex], specifiedTextBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${specifiedTextLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x5b8c;&#x6210;&#x5404;${specifiedTextRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-4 flex-1"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${specifiedTextLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x6700;&#x5c11;&#x5b8c;&#x6210;&#xff1a;${minCompletions}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentSpecifiedTextLevel &lt; 4) {
             const nextLevelIndex = currentSpecifiedTextLevel;
             const nextRequirement = specifiedTextRequirements[nextLevelIndex];
             const progress = Math.min(100, (minCompletions / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${specifiedTextLevels[nextLevelIndex]}" &#x9084;&#x9700;&#x5b8c;&#x6210;&#x6240;&#x6709;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x81f3;&#x5c11;${nextRequirement - minCompletions}&#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-book-open text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x5927;&#x5e2b;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x5b8c;&#x6210;&#x6240;&#x6709;&#x300c;&#x6307;&#x5b9a;&#x6587;&#x8a00;&#x7bc7;&#x7ae0;&#x300d;&#x5404;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x65b0;&#x5175;&#x4e0a;&#x9663;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#xff08;&#x53ea;&#x8a08;&#x7b97;&#x5b8c;&#x6574;&#x7bc7;&#x7ae0;&#xff09;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
         `;
         
         // &#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x4e4b;&#x8def;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#x540d;&#x7a31;
         const literatureLevels = ['&#x9752;&#x9752;&#x5b50;&#x887f;', '&#x60a0;&#x60a0;&#x6211;&#x5fc3;', '&#x4f46;&#x70ba;&#x541b;&#x6545;', '&#x6c89;&#x541f;&#x81f3;&#x4eca;'];
         const literatureRequirements = [1, 3, 10, 20];
         const literatureBorderColors = ['#9CCC65', '#8BC34A', '#7CB342', '#689F38'];
         const literatureColors = [
         { center: '#C5E1A5', middle: '#AED581', outer: '#9CCC65' }, // &#x9752;&#x9752;&#x5b50;&#x887f;
         { center: '#AED581', middle: '#9CCC65', outer: '#8BC34A' }, // &#x60a0;&#x60a0;&#x6211;&#x5fc3;
         { center: '#9CCC65', middle: '#8BC34A', outer: '#7CB342' }, // &#x4f46;&#x70ba;&#x541b;&#x6545;
         { center: '#8BC34A', middle: '#7CB342', outer: '#689F38' }  // &#x6c89;&#x541f;&#x81f3;&#x4eca;
         ];
         
         // &#x7372;&#x53d6;&#x6240;&#x6709;&#x300c;&#x6587;&#x5b78;&#x300d;&#x5206;&#x985e;&#x7684;&#x7bc7;&#x7ae0;
         const literaturePassages = Object.keys(passages).filter(key =&gt; 
         passages[key].category === '&#x6587;&#x5b78;'
         );
         
         // &#x5f9e;&#x7528;&#x6236;&#x8a18;&#x9304;&#x4e2d;&#x8b80;&#x53d6;&#x6bcf;&#x7bc7;&#x7bc7;&#x7ae0;&#x7684;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         const literatureCompletionCounts = literaturePassages.map(key =&gt; 
         userRecordsMemory[key]?.completionCount || 0
         );
         
         // &#x627e;&#x51fa;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         const literatureMinCompletions = literatureCompletionCounts.length &gt; 0 ? Math.min(...literatureCompletionCounts) : 0;
         
         // &#x78ba;&#x5b9a;&#x6210;&#x5c31;&#x7b49;&#x7d1a; - &#x57fa;&#x65bc;&#x6240;&#x6709;&#x7bc7;&#x7ae0;&#x7684;&#x6700;&#x5c0f;&#x5b8c;&#x6210;&#x6b21;&#x6578;
         let calculatedLiteratureLevel = 0;
         for (let i = 0; i &lt; literatureRequirements.length; i++) {
         if (literatureMinCompletions &gt;= literatureRequirements[i]) {
             calculatedLiteratureLevel = i + 1;
         } else {
             break;
         }
         }
         
         // &#x66f4;&#x65b0;&#x5168;&#x5c40;&#x7d71;&#x8a08;&#x4e2d;&#x7684;&#x6210;&#x5c31;&#x7b49;&#x7d1a;&#xff08;&#x5982;&#x679c;&#x8a08;&#x7b97;&#x51fa;&#x7684;&#x7b49;&#x7d1a;&#x66f4;&#x9ad8;&#xff09;
         if (calculatedLiteratureLevel &gt; globalStats.achievements.literatureRouteLevel) {
         globalStats.achievements.literatureRouteLevel = calculatedLiteratureLevel;
         // &#x4fdd;&#x5b58;&#x66f4;&#x65b0;&#x7684;&#x7d71;&#x8a08;
         saveStats();
         }
         
         // &#x4f7f;&#x7528;&#x66f4;&#x65b0;&#x5f8c;&#x7684;&#x7b49;&#x7d1a;
         const currentLiteratureLevel = globalStats.achievements.literatureRouteLevel;
         
         // &#x5982;&#x679c;&#x5df2;&#x7d93;&#x9054;&#x6210;&#x4efb;&#x4f55;&#x7b49;&#x7d1a;
         if (currentLiteratureLevel &gt; 0) {
         // &#x986f;&#x793a;&#x7576;&#x524d;&#x7b49;&#x7d1a;&#x6210;&#x5c31;
         const levelIndex = currentLiteratureLevel - 1;
         contentHTML += `
             &lt;div class="flex items-center mb-6"&gt;
                 &lt;div class="achievement-seal" style="width: 110px; height: 110px;"&gt;
                     ${createAchievementSVG(literatureColors[levelIndex], literatureBorderColors[levelIndex])}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title text-lg"&gt;${literatureLevels[levelIndex]}&lt;/span&gt;
                         &lt;span class="seal-desc"&gt;&#x5b8c;&#x6210;&#x5404;${literatureRequirements[levelIndex]}&#x6b21;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-5"&gt;
                     &lt;p class="text-lg font-bold text-gray-800 dark:text-gray-200"&gt;&#x76ee;&#x524d;&#x7b49;&#x7d1a;&#xff1a;${literatureLevels[levelIndex]}&lt;/p&gt;
                     &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x6587;&#x5b78;&#x7bc7;&#x7ae0;&#x6700;&#x5c11;&#x5b8c;&#x6210;&#xff1a;${literatureMinCompletions}&#x6b21;&lt;/p&gt;
         `;
         
         // &#x5982;&#x679c;&#x9084;&#x6709;&#x4e0b;&#x4e00;&#x7b49;&#x7d1a;&#xff0c;&#x986f;&#x793a;&#x9032;&#x5ea6;
         if (currentLiteratureLevel &lt; 4) {
             const nextLevelIndex = currentLiteratureLevel;
             const nextRequirement = literatureRequirements[nextLevelIndex];
             const progress = Math.min(100, (literatureMinCompletions / nextRequirement) * 100);
             
             contentHTML += `
                     &lt;div class="mt-3"&gt;
                         &lt;p class="text-sm text-gray-700 dark:text-gray-300 mb-1"&gt;&#x8ddd;&#x96e2; "${literatureLevels[nextLevelIndex]}" &#x9084;&#x9700;&#x5b8c;&#x6210;&#x6240;&#x6709;&#x6587;&#x5b78;&#x7bc7;&#x7ae0;&#x81f3;&#x5c11;${nextRequirement - literatureMinCompletions}&#x6b21;&lt;/p&gt;
                         &lt;div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"&gt;
                             &lt;div class="h-full bg-primary rounded-full transition-all duration-300" style="width: ${progress}%"&gt;&lt;/div&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
             `;
         } else {
             contentHTML += `
                     &lt;p class="mt-3 text-sm text-green-500 dark:text-green-400"&gt;&lt;i class="fas fa-crown mr-1"&gt;&lt;/i&gt; &#x5df2;&#x9054;&#x6210;&#x6700;&#x9ad8;&#x7b49;&#x7d1a;&#xff01;&lt;/p&gt;
             `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         // &#x986f;&#x793a;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#x7684;&#x63d0;&#x793a;
         contentHTML += `
             &lt;div class="text-center py-8"&gt;
                 &lt;i class="fas fa-feather-alt text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x5c1a;&#x672a;&#x7372;&#x5f97;&#x6587;&#x5b78;&#x5192;&#x96aa;&#x8005;&#x6210;&#x5c31;&lt;/p&gt;
                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x5b8c;&#x6210;&#x6240;&#x6709;&#x300c;&#x6587;&#x5b78;&#x300d;&#x7bc7;&#x7ae0;&#x5404;1&#x6b21;&#x89e3;&#x9396;&#x300c;&#x9752;&#x9752;&#x5b50;&#x887f;&#x300d;&#x6210;&#x5c31;&lt;/p&gt;
             &lt;/div&gt;
         `;
         }
         
         // &#x7279;&#x6b8a;&#x6210;&#x5c31;
         contentHTML += `
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;!-- &#x7279;&#x6b8a;&#x6210;&#x5c31; --&gt;
         &lt;div&gt;
             &lt;h4 class="text-xl font-bold text-amber-700 dark:text-amber-400 mb-4"&gt;&#x7279;&#x6b8a;&#x6210;&#x5c31;&lt;/h4&gt;
             &lt;div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-5"&gt;
                 &lt;div class="space-y-4"&gt;
         `;
         
         // &#x773c;&#x4e7e;&#x6210;&#x5c31; (&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;30&#x6b21;)
         if (globalStats.achievements.dryEyes) {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg"&gt;
                 &lt;div class="achievement-seal" style="width: 80px; height: 80px; margin: 0 10px 0 0;"&gt;
                     ${createAchievementSVG(dryEyesColors, '#0277BD')}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title"&gt;&#x773c;&#x4e7e;&lt;/span&gt;
                         &lt;span class="seal-desc text-[8px]"&gt;&#x4e0d;&#x66ab;&#x505c;&#x6210;&#x766e;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-3"&gt;
                     &lt;p class="font-medium text-gray-800 dark:text-gray-200"&gt;&#x773c;&#x4e7e;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-600 dark:text-gray-400"&gt;&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;30&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-green-500 dark:text-green-400 mt-1"&gt;&lt;i class="fas fa-check-circle mr-1"&gt;&lt;/i&gt; &#x5df2;&#x7372;&#x5f97;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-gray-100 dark:bg-gray-700/40 rounded-lg"&gt;
                 &lt;div class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center mr-3"&gt;
                     &lt;i class="fas fa-eye text-gray-400 dark:text-gray-500"&gt;&lt;/i&gt;
                 &lt;/div&gt;
                 &lt;div&gt;
                     &lt;p class="font-medium text-gray-500 dark:text-gray-400"&gt;&#x773c;&#x4e7e;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-500 dark:text-gray-500"&gt;&#x7372;&#x5f97;&#x300c;&#x4e0d;&#x77e5;&#x75b2;&#x5026;&#x300d;30&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-gray-400 dark:text-gray-500 mt-1"&gt;&lt;i class="fas fa-lock mr-1"&gt;&lt;/i&gt; &#x672a;&#x89e3;&#x9396;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         }
         
         // &#x591c;&#x8c93;&#x738b;&#x6210;&#x5c31; (&#x7372;&#x5f97;&#x591c;&#x8c93;20&#x6b21;)
         if (globalStats.achievements.nightOwlKing) {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg"&gt;
                 &lt;div class="achievement-seal" style="width: 80px; height: 80px; margin: 0 10px 0 0;"&gt;
                     ${createAchievementSVG(nightOwlKingColors, '#5D4037')}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title"&gt;&#x591c;&#x8c93;&#x738b;&lt;/span&gt;
                         &lt;span class="seal-desc text-[8px]"&gt;&#x6df1;&#x591c;&#x6210;&#x766e;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-3"&gt;
                     &lt;p class="font-medium text-gray-800 dark:text-gray-200"&gt;&#x591c;&#x8c93;&#x738b;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-600 dark:text-gray-400"&gt;&#x7372;&#x5f97;&#x300c;&#x591c;&#x8c93;&#x300d;20&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-green-500 dark:text-green-400 mt-1"&gt;&lt;i class="fas fa-check-circle mr-1"&gt;&lt;/i&gt; &#x5df2;&#x7372;&#x5f97;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-gray-100 dark:bg-gray-700/40 rounded-lg"&gt;
                 &lt;div class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center mr-3"&gt;
                     &lt;i class="fas fa-moon text-gray-400 dark:text-gray-500"&gt;&lt;/i&gt;
                 &lt;/div&gt;
                 &lt;div&gt;
                     &lt;p class="font-medium text-gray-500 dark:text-gray-400"&gt;&#x591c;&#x8c93;&#x738b;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-500 dark:text-gray-500"&gt;&#x7372;&#x5f97;&#x300c;&#x591c;&#x8c93;&#x300d;20&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-gray-400 dark:text-gray-500 mt-1"&gt;&lt;i class="fas fa-lock mr-1"&gt;&lt;/i&gt; &#x672a;&#x89e3;&#x9396;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         }
         
         // &#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&#x6210;&#x5c31; (&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;20&#x6b21;)
         if (globalStats.achievements.focusOnEating) {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg"&gt;
                 &lt;div class="achievement-seal" style="width: 80px; height: 80px; margin: 0 10px 0 0;"&gt;
                     ${createAchievementSVG(focusOnEatingColors, '#E65100')}
                     &lt;div class="seal-text"&gt;
                         &lt;span class="seal-title"&gt;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&lt;/span&gt;
                         &lt;span class="seal-desc text-[8px]"&gt;&#x5348;&#x9910;&#x6642;&#x80cc;&#x8aa6;&lt;/span&gt;
                     &lt;/div&gt;
                 &lt;/div&gt;
                 &lt;div class="ml-3"&gt;
                     &lt;p class="font-medium text-gray-800 dark:text-gray-200"&gt;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-600 dark:text-gray-400"&gt;&#x7372;&#x5f97;&#x300c;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x300d;20&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-green-500 dark:text-green-400 mt-1"&gt;&lt;i class="fas fa-check-circle mr-1"&gt;&lt;/i&gt; &#x5df2;&#x7372;&#x5f97;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         } else {
         contentHTML += `
             &lt;div class="flex items-center p-4 bg-gray-100 dark:bg-gray-700/40 rounded-lg"&gt;
                 &lt;div class="w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center mr-3"&gt;
                     &lt;i class="fas fa-utensils text-gray-400 dark:text-gray-500"&gt;&lt;/i&gt;
                 &lt;/div&gt;
                 &lt;div&gt;
                     &lt;p class="font-medium text-gray-500 dark:text-gray-400"&gt;&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;&lt;/p&gt;
                     &lt;p class="text-sm text-gray-500 dark:text-gray-500"&gt;&#x7372;&#x5f97;&#x300c;&#x8178;&#x80c3;&#x4e0d;&#x597d;&#x300d;20&#x6b21;&lt;/p&gt;
                     &lt;p class="text-xs text-gray-400 dark:text-gray-500 mt-1"&gt;&lt;i class="fas fa-lock mr-1"&gt;&lt;/i&gt; &#x672a;&#x89e3;&#x9396;&lt;/p&gt;
                 &lt;/div&gt;
             &lt;/div&gt;
         `;
         }
         
         contentHTML += `
                 &lt;/div&gt;
             &lt;/div&gt;
         &lt;/div&gt;
         
         &lt;div class="text-center text-sm text-gray-500 dark:text-gray-400 mt-8"&gt;
             &#x6301;&#x7e8c;&#x6311;&#x6230;&#xff0c;&#x89e3;&#x9396;&#x66f4;&#x591a;&#x6210;&#x5c31;&#xff01;
         &lt;/div&gt;
         &lt;/div&gt;
         `;
         
         infoModalContent.innerHTML = contentHTML;
         }            
             // &#x521d;&#x59cb;&#x5316;&#x7528;&#x6236;&#x540d;&#x7de8;&#x8f2f;&#x529f;&#x80fd;
             initializeNameEditor();
             
             // &#x521d;&#x59cb;&#x5316;&#x6210;&#x5c31;&#x5c55;&#x793a;&#x529f;&#x80fd;
             initializeAchievementsDisplay();
             
             // &#x521d;&#x59cb;&#x5316;&#x982d;&#x50cf;&#x9078;&#x64c7;&#x529f;&#x80fd;
             initializeAvatarSelector();
             
             // &#x982d;&#x50cf;&#x9078;&#x64c7;&#x529f;&#x80fd;
             function initializeAvatarSelector() {
                 // &#x7372;&#x53d6;DOM&#x5143;&#x7d20;
                 const changeAvatarBtn = document.getElementById('change-avatar-btn');
                 const avatarSelectorModal = document.getElementById('avatar-selector-modal');
                 const closeAvatarSelector = document.getElementById('close-avatar-selector');
                 const avatarGrid = document.getElementById('avatar-grid');
                 const userAvatar = document.getElementById('user-avatar');
                 
                 // &#x6aa2;&#x67e5;&#x5143;&#x7d20;&#x662f;&#x5426;&#x5b58;&#x5728;
                 if (!changeAvatarBtn || !avatarSelectorModal || !closeAvatarSelector || !avatarGrid || !userAvatar) {
                     console.error("&#x982d;&#x50cf;&#x9078;&#x64c7;&#x5668;&#x521d;&#x59cb;&#x5316;&#x5931;&#x6557;&#xff1a;&#x7f3a;&#x5c11;&#x5fc5;&#x8981;&#x5143;&#x7d20;");
                     return;
                 }
                 
                 // &#x8f09;&#x5165;&#x4e4b;&#x524d;&#x9078;&#x64c7;&#x7684;&#x982d;&#x50cf;
                 try {
                     const savedAvatar = localStorage.getItem('MemoryMaster_userAvatar');
                     if (savedAvatar) {
                         userSelectedAvatar = savedAvatar;
                         renderUserAvatar(userAvatar, savedAvatar);
                     }
                 } catch (e) {
                     console.error("&#x52a0;&#x8f09;&#x7528;&#x6236;&#x982d;&#x50cf;&#x51fa;&#x932f;:", e);
                 }
                 
                 // &#x751f;&#x6210;&#x982d;&#x50cf;&#x9078;&#x9805;
                 generateAvatarOptions(avatarGrid);
                 
                 // &#x6253;&#x958b;&#x982d;&#x50cf;&#x9078;&#x64c7;&#x5668;
                 changeAvatarBtn.addEventListener('click', function() {
                     avatarSelectorModal.classList.remove('hidden');
                     
                     // &#x6a19;&#x8a18;&#x7576;&#x524d;&#x9078;&#x4e2d;&#x7684;&#x982d;&#x50cf;
                     highlightSelectedAvatar();
                     
                     // &#x7981;&#x7528;&#x8a2d;&#x7f6e;&#x9f52;&#x8f2a;&#x6309;&#x9215;
                     window.disableSettingsButton();
                 });
                 
                 // &#x95dc;&#x9589;&#x982d;&#x50cf;&#x9078;&#x64c7;&#x5668;&#x4e26;&#x91cd;&#x65b0;&#x555f;&#x7528;&#x8a2d;&#x7f6e;&#x6309;&#x9215;
                 function closeAvatarSelectorModal() {
                     avatarSelectorModal.classList.add('hidden');
                     window.enableSettingsButton();
                 }
                 
                 // &#x95dc;&#x9589;&#x982d;&#x50cf;&#x9078;&#x64c7;&#x5668;
                 closeAvatarSelector.addEventListener('click', function() {
                     closeAvatarSelectorModal();
                 });
                 
                 // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;
                 avatarSelectorModal.addEventListener('click', function(e) {
                     if (e.target === avatarSelectorModal) {
                         closeAvatarSelectorModal();
                     }
                 });
                 
                 // &#x5c07;&#x95dc;&#x9589;&#x6a21;&#x614b;&#x6846;&#x51fd;&#x6578;&#x8a2d;&#x70ba;&#x5168;&#x5c40;&#xff0c;&#x4ee5;&#x4fbf;&#x5728;&#x9078;&#x64c7;&#x982d;&#x50cf;&#x5f8c;&#x4f7f;&#x7528;
                 window.closeAvatarSelectorModal = closeAvatarSelectorModal;
             }
             
             // &#x6aa2;&#x67e5;&#x982d;&#x50cf;&#x662f;&#x5426;&#x5df2;&#x89e3;&#x9396;
             function isAvatarUnlocked(avatarKey) {
                 // &#x9ed8;&#x8a8d;&#x982d;&#x50cf;&#x6c38;&#x9060;&#x89e3;&#x9396;
                 if (avatarKey === 'default') return true;
                 
                 // &#x6aa2;&#x67e5;&#x7528;&#x6236;&#x7b49;&#x7d1a;&#x662f;&#x5426;&#x9054;&#x5230;&#x89e3;&#x9396;&#x8981;&#x6c42;
                 const requiredLevel = window.avatarUnlockLevels[avatarKey] || 1;
                 return userProfile.level &gt;= requiredLevel;
             }
             
             // &#x751f;&#x6210;&#x982d;&#x50cf;&#x9078;&#x9805;
             function generateAvatarOptions(container) {
                 if (!container) return;
                 
                 // &#x6e05;&#x7a7a;&#x5bb9;&#x5668;
                 container.innerHTML = '';
                 
                 // &#x6dfb;&#x52a0;&#x9ed8;&#x8a8d;&#x982d;&#x50cf;&#x9078;&#x9805;
                 const defaultOption = document.createElement('div');
                 defaultOption.className = 'avatar-option ' + (userSelectedAvatar === null ? 'selected' : '');
                 defaultOption.dataset.avatar = 'default';
                 defaultOption.innerHTML = `
                     &lt;div class="pixel-avatar flex items-center justify-center"&gt;
                         &lt;i class="fas fa-user text-2xl text-gray-800 dark:text-gray-100"&gt;&lt;/i&gt;
                     &lt;/div&gt;
                 `;
                 container.appendChild(defaultOption);
                 
                 // &#x70ba;&#x9ed8;&#x8a8d;&#x982d;&#x50cf;&#x6dfb;&#x52a0;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 defaultOption.addEventListener('click', function() {
                     selectAvatar('default');
                 });
                 
                 // &#x6dfb;&#x52a0;&#x6bcf;&#x500b;8-bit&#x50cf;&#x7d20;&#x982d;&#x50cf;&#x9078;&#x9805;
                 Object.keys(avatarPixelData).forEach(key =&gt; {
                     const avatarData = avatarPixelData[key];
                     const isUnlocked = isAvatarUnlocked(key);
                     const requiredLevel = avatarUnlockLevels[key] || 1;
                     
                     const option = document.createElement('div');
                     option.className = 'avatar-option ' + (userSelectedAvatar === key ? 'selected' : '');
                     option.dataset.avatar = key;
                     option.dataset.level = requiredLevel;
                     option.title = isUnlocked ? avatarData.name : `${avatarData.name} (&#x9700;&#x8981;&#x7b49;&#x7d1a; ${requiredLevel})`;
                     
                     // &#x5982;&#x679c;&#x982d;&#x50cf;&#x672a;&#x89e3;&#x9396;&#xff0c;&#x6dfb;&#x52a0;&#x7981;&#x7528;&#x6a23;&#x5f0f;&#x985e;
                     if (!isUnlocked) {
                         option.classList.add('locked');
                     }
                     
                     // &#x6dfb;&#x52a0;&#x5230;&#x5bb9;&#x5668;
                     container.appendChild(option);
                     
                     // &#x6dfb;&#x52a0;&#x982d;&#x50cf;&#x9707;&#x52d5;&#x6a23;&#x5f0f;
                     const avatarShakeStyle = document.createElement('style');
                     avatarShakeStyle.textContent = `
                         @keyframes avatar-shake {
                             0%, 100% { transform: translateX(0); }
                             25% { transform: translateX(-5px); }
                             50% { transform: translateX(5px); }
                             75% { transform: translateX(-5px); }
                         }
                         
                         .avatar-shake {
                             animation: avatar-shake 0.4s ease-in-out;
                         }
                     `;
                     document.head.appendChild(avatarShakeStyle);
                     
                     // &#x6dfb;&#x52a0;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                     option.addEventListener('click', function() {
                         // &#x6aa2;&#x67e5;&#x982d;&#x50cf;&#x662f;&#x5426;&#x5df2;&#x89e3;&#x9396;
                         if (isUnlocked) {
                             selectAvatar(key);
                         } else {
                             // &#x672a;&#x89e3;&#x9396;&#x6642;&#x8f15;&#x5fae;&#x9707;&#x52d5;&#x800c;&#x4e0d;&#x662f;&#x986f;&#x793a;&#x63d0;&#x9192;&#x6587;&#x5b57;
                             this.classList.add('avatar-shake');
                             
                             // &#x9707;&#x52d5;&#x7d50;&#x675f;&#x5f8c;&#x79fb;&#x9664;&#x985e;
                             setTimeout(() =&gt; {
                                 this.classList.remove('avatar-shake');
                             }, 400); // &#x8207;&#x52d5;&#x756b;&#x6301;&#x7e8c;&#x6642;&#x9593;&#x76f8;&#x540c;
                         }
                     });
                     
                     // &#x6e32;&#x67d3;&#x50cf;&#x7d20;&#x982d;&#x50cf;
                     renderPixelAvatar(option, key, !isUnlocked);
                     
                     // &#x5982;&#x679c;&#x982d;&#x50cf;&#x672a;&#x89e3;&#x9396;&#xff0c;&#x6dfb;&#x52a0;&#x7b49;&#x7d1a;&#x6307;&#x793a;&#x5668;
                     if (!isUnlocked) {
                         const levelIndicator = document.createElement('div');
                         levelIndicator.className = 'absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg';
                         levelIndicator.innerHTML = `&lt;span class="text-white font-bold text-sm"&gt;Lv.${requiredLevel}&lt;/span&gt;`;
                         option.appendChild(levelIndicator);
                     }
                 });
             }
             
             // &#x9078;&#x64c7;&#x982d;&#x50cf;
             function selectAvatar(avatarKey) {
                 // &#x53d6;&#x6d88;&#x6240;&#x6709;&#x9078;&#x4e2d;&#x72c0;&#x614b;
                 document.querySelectorAll('.avatar-option').forEach(option =&gt; {
                     option.classList.remove('selected');
                 });
                 
                 // &#x8a2d;&#x7f6e;&#x65b0;&#x9078;&#x4e2d;&#x72c0;&#x614b;
                 const selectedOption = document.querySelector(`.avatar-option[data-avatar="${avatarKey}"]`);
                 if (selectedOption) {
                     selectedOption.classList.add('selected');
                 }
                 
                 // &#x4fdd;&#x5b58;&#x9078;&#x64c7;
                 userSelectedAvatar = avatarKey === 'default' ? null : avatarKey;
                 
                 try {
                     if (userSelectedAvatar === null) {
                         localStorage.removeItem('MemoryMaster_userAvatar');
                     } else {
                         localStorage.setItem('MemoryMaster_userAvatar', userSelectedAvatar);
                     }
                 } catch (e) {
                     console.error("&#x4fdd;&#x5b58;&#x7528;&#x6236;&#x982d;&#x50cf;&#x51fa;&#x932f;:", e);
                 }
                 
                 // &#x66f4;&#x65b0;&#x7528;&#x6236;&#x982d;&#x50cf;&#x986f;&#x793a;
                 const userAvatar = document.getElementById('user-avatar');
                 if (userAvatar) {
                     renderUserAvatar(userAvatar, userSelectedAvatar);
                 }
                 
                 // &#x986f;&#x793a;&#x6210;&#x529f;&#x63d0;&#x793a;
                 const notification = document.createElement('div');
                 notification.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 py-2 px-4 rounded-lg shadow-lg z-50';
                 notification.innerHTML = '&lt;i class="fas fa-check-circle mr-2"&gt;&lt;/i&gt;&#x982d;&#x50cf;&#x5df2;&#x66f4;&#x65b0;';
                 document.body.appendChild(notification);
                 
                 // 3&#x79d2;&#x5f8c;&#x79fb;&#x9664;&#x63d0;&#x793a;
                 setTimeout(() =&gt; {
                     notification.remove();
                 }, 3000);
                 
                 // &#x9078;&#x64c7;&#x982d;&#x50cf;&#x5f8c;&#x81ea;&#x52d5;&#x95dc;&#x9589;&#x9078;&#x64c7;&#x5668;
                 if (window.closeAvatarSelectorModal) {
                     window.closeAvatarSelectorModal();
                 }
             }
             
             // &#x6a19;&#x8a18;&#x7576;&#x524d;&#x9078;&#x4e2d;&#x7684;&#x982d;&#x50cf;
             function highlightSelectedAvatar() {
                 document.querySelectorAll('.avatar-option').forEach(option =&gt; {
                     option.classList.remove('selected');
                     
                     if ((userSelectedAvatar === null &amp;&amp; option.dataset.avatar === 'default') || 
                         option.dataset.avatar === userSelectedAvatar) {
                         option.classList.add('selected');
                     }
                 });
             }
            
             
             // &#x5e6b;&#x52a9;&#x51fd;&#x6578; - &#x5275;&#x5efa;&#x4e00;&#x500b;&#x57fa;&#x65bc;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x54c8;&#x5e0c;&#x503c;
             function hashString(str) {
                 let hash = 0;
                 if (str.length === 0) return hash;
                 for (let i = 0; i &lt; str.length; i++) {
                     const char = str.charCodeAt(i);
                     hash = ((hash &lt;&lt; 5) - hash) + char;
                     hash = hash &amp; hash; // &#x8f49;&#x63db;&#x70ba;32&#x4f4d;&#x6574;&#x6578;
                 }
                 return hash &gt;&gt;&gt; 0; // &#x8f49;&#x63db;&#x70ba;&#x7121;&#x7b26;&#x865f;&#x6574;&#x6578;
             }
             
             // &#x5e6b;&#x52a9;&#x51fd;&#x6578; - &#x57fa;&#x65bc;&#x7a2e;&#x5b50;&#x7684;&#x96a8;&#x6a5f;&#x6578;&#x751f;&#x6210;&#x5668;
             function mulberry32(seed) {
                 return function() {
                     let t = seed += 0x6D2B79F5;
                     t = Math.imul(t ^ t &gt;&gt;&gt; 15, t | 1);
                     t ^= t + Math.imul(t ^ t &gt;&gt;&gt; 7, t | 61);
                     return ((t ^ t &gt;&gt;&gt; 14) &gt;&gt;&gt; 0) / 4294967296;
                 };
             }
             
             // &#x6210;&#x5c31;&#x5c55;&#x793a;&#x529f;&#x80fd;
             function initializeAchievementsDisplay() {
                 // &#x5617;&#x8a66;&#x5f9e;localStorage&#x52a0;&#x8f09;&#x5df2;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;
                 let selectedAchievements = [];
                 try {
                     const saved = localStorage.getItem('MemoryMaster_selectedAchievements');
                     if (saved) {
                         selectedAchievements = JSON.parse(saved);
                     }
                 } catch (e) {
                     console.error("&#x52a0;&#x8f09;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;&#x51fa;&#x932f;:", e);
                 }
                 
                 // &#x66f4;&#x65b0;&#x6210;&#x5c31;&#x5c55;&#x793a;
                 updateAchievementsDisplay(selectedAchievements);
                 
                 // &#x7ba1;&#x7406;&#x6210;&#x5c31;&#x6309;&#x9215;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                 const manageAchievementsBtn = document.getElementById('manage-achievements-btn');
                 if (manageAchievementsBtn) {
                     manageAchievementsBtn.addEventListener('click', function() {
                         showAchievementSelector(selectedAchievements);
                     });
                 }
             }
             
             // &#x66f4;&#x65b0;&#x6210;&#x5c31;&#x5c55;&#x793a;
             function updateAchievementsDisplay(selectedAchievements) {
                 const achievementsDisplay = document.getElementById('achievements-display');
                 if (!achievementsDisplay) return;
                 
                 // &#x5982;&#x679c;&#x6c92;&#x6709;&#x9078;&#x64c7;&#x4efb;&#x4f55;&#x6210;&#x5c31;&#xff0c;&#x986f;&#x793a;&#x63d0;&#x793a;&#x4fe1;&#x606f;
                 if (!selectedAchievements || selectedAchievements.length === 0) {
                     achievementsDisplay.innerHTML = `
                         &lt;p class="text-sm text-gray-500 dark:text-gray-400 italic"&gt;&#x5f9e;&#x8a2d;&#x7f6e;&#x83dc;&#x55ae;&#x7684;&#x300c;&#x6b77;&#x53f2;&#x6210;&#x5c31;&#x300d;&#x4e2d;&#x9078;&#x64c7;&#x5c55;&#x793a;&lt;/p&gt;
                     `;
                     return;
                 }
                 
                 // &#x6e05;&#x7a7a;&#x73fe;&#x6709;&#x5167;&#x5bb9;
                 achievementsDisplay.innerHTML = '';
                 
                 // &#x5275;&#x5efa;SVG&#x5fbd;&#x7ae0;
                 const createAchievementSVG = (colors, borderColor) =&gt; {
                     const uniqueId = 'seal_' + Math.random().toString(36).substr(2, 9);
                     return `
                     &lt;svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"&gt;
                         &lt;defs&gt;
                             &lt;radialGradient id="${uniqueId}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"&gt;
                                 &lt;stop offset="0%" style="stop-color:${colors.center}" /&gt;
                                 &lt;stop offset="70%" style="stop-color:${colors.middle}" /&gt;
                                 &lt;stop offset="100%" style="stop-color:${colors.outer}" /&gt;
                             &lt;/radialGradient&gt;
                         &lt;/defs&gt;
                         &lt;circle cx="50" cy="50" r="45" fill="url(#${uniqueId})" /&gt;
                         &lt;circle cx="50" cy="50" r="42" fill="none" stroke="${borderColor}" stroke-width="1" stroke-dasharray="2,1" /&gt;
                         &lt;circle cx="50" cy="50" r="38" fill="none" stroke="${borderColor}" stroke-width="0.5" /&gt;
                     &lt;/svg&gt;
                     `;
                 };
                 
                 // &#x5b9a;&#x7fa9;&#x5404;&#x6210;&#x5c31;&#x8272;&#x5f69;
                 const achievementColors = {
                     'complete': { colors: { center: '#8B0000', middle: '#5C0000', outer: '#400000' }, border: '#FFD700' },
                     'lightning': { colors: { center: '#4B0082', middle: '#2A004D', outer: '#1C0033' }, border: '#00FFFF' },
                     'master': { colors: { center: '#006400', middle: '#004D00', outer: '#003300' }, border: '#7CFC00' },
                     'snail': { colors: { center: '#8B4513', middle: '#6B3100', outer: '#4A2100' }, border: '#DAA520' },
                     'tireless': { colors: { center: '#1E3A8A', middle: '#1E40AF', outer: '#1D4ED8' }, border: '#38BDF8' },
                     'nightOwl': { colors: { center: '#3E2723', middle: '#33211B', outer: '#2E1B15' }, border: '#4E342E' },
                     'badDigestion': { colors: { center: '#E65100', middle: '#D84315', outer: '#BF360C' }, border: '#BF360C' },
                     'dryEyes': { colors: { center: '#FFCC80', middle: '#FFA726', outer: '#EF6C00' }, border: '#0277BD' },
                     'nightOwlKing': { colors: { center: '#5D4037', middle: '#3E2723', outer: '#1B0000' }, border: '#5D4037' },
                     'focusOnEating': { colors: { center: '#FFFFFF', middle: '#FFD0B0', outer: '#FF8A65' }, border: '#E65100' },
                     
                     // &#x5192;&#x96aa;&#x4e4b;&#x8def;
                     'adventure1': { colors: { center: '#B3E5FC', middle: '#4FC3F7', outer: '#0288D1' }, border: '#90CAF9' },
                     'adventure2': { colors: { center: '#EF5350', middle: '#E53935', outer: '#C62828' }, border: '#4CAF50' },
                     'adventure3': { colors: { center: '#FFD54F', middle: '#FFC107', outer: '#FFA000' }, border: '#F4511E' },
                     'adventure4': { colors: { center: '#BA68C8', middle: '#AB47BC', outer: '#8E24AA' }, border: '#673AB7' },
                     'adventure5': { colors: { center: '#A5D6A7', middle: '#81C784', outer: '#4CAF50' }, border: '#FFC107' },
                     
                     // &#x632b;&#x6557;&#x4e4b;&#x8def;
                     'defeat1': { colors: { center: '#D7CCC8', middle: '#8D6E63', outer: '#4E342E' }, border: '#7E57C2' },
                     'defeat2': { colors: { center: '#E3F2FD', middle: '#90CAF9', outer: '#1565C0' }, border: '#42A5F5' },
                     'defeat3': { colors: { center: '#80DEEA', middle: '#26A69A', outer: '#004D40' }, border: '#00796B' },
                     'defeat4': { colors: { center: '#FFE0B2', middle: '#FFB74D', outer: '#E65100' }, border: '#F57C00' },
                     'defeat5': { colors: { center: '#E0F7FA', middle: '#80DEEA', outer: '#00838F' }, border: '#D32F2F' },
                     
                     // &#x6975;&#x901f;&#x4e4b;&#x8def;
                     'speed1': { colors: { center: '#FF5252', middle: '#D50000', outer: '#B71C1C' }, border: '#311B92' },
                     'speed2': { colors: { center: '#FF9800', middle: '#F57C00', outer: '#E65100' }, border: '#283593' },
                     'speed3': { colors: { center: '#00B4D8', middle: '#0096C7', outer: '#023E8A' }, border: '#1565C0' },
                     'speed4': { colors: { center: '#FFEE58', middle: '#FFD600', outer: '#F9A825' }, border: '#0277BD' },
                     
                     // &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;
                     'perfect1': { colors: { center: '#80CBC4', middle: '#4DB6AC', outer: '#E8F5E9' }, border: '#AD1457' },
                     'perfect2': { colors: { center: '#F06292', middle: '#EC407A', outer: '#AD1457' }, border: '#6A1B9A' },
                     'perfect3': { colors: { center: '#FFD54F', middle: '#FFB300', outer: '#5D4037' }, border: '#4527A0' },
                     'perfect4': { colors: { center: '#B39DDB', middle: '#7E57C2', outer: '#4527A0' }, border: '#283593' },
                     
                     // &#x8a18;&#x61b6;&#x4e4b;&#x8def;
                     'memory1': { colors: { center: '#00E5FF', middle: '#00B8D4', outer: '#006064' }, border: '#004D40' },
                     'memory2': { colors: { center: '#FFD54F', middle: '#FFB300', outer: '#F57F17' }, border: '#00838F' },
                     'memory3': { colors: { center: '#5C6BC0', middle: '#3949AB', outer: '#283593' }, border: '#2E7D32' },
                     'memory4': { colors: { center: '#26C6DA', middle: '#00ACC1', outer: '#00838F' }, border: '#558B2F' }
                 };
                 
                 // &#x986f;&#x793a;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;
                 selectedAchievements.forEach(achievement =&gt; {
                     const colorInfo = achievementColors[achievement.id];
                     if (!colorInfo) return;
                     
                     const achievementElement = document.createElement('div');
                     achievementElement.className = 'achievement-seal';
                     achievementElement.style.width = '70px';
                     achievementElement.style.height = '70px';
                     achievementElement.style.margin = '0 5px';
                     achievementElement.style.transform = 'rotate(-5deg)';
                     
                     achievementElement.innerHTML = `
                         &lt;div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"&gt;
                             ${createAchievementSVG(colorInfo.colors, colorInfo.border)}
                         &lt;/div&gt;
                         &lt;div class=\"seal-text\"&gt;
                         &lt;span class=\"seal-title\"&gt;${achievement.title}
                         &lt;/span&gt;
                         &lt;span class=\"seal-desc\" style=\"font-size: 10px; opacity: 0.9;\"&gt;&#x6210;&#x5c31;&lt;/span&gt;
                         &lt;/div&gt;
                     `;
                     
                     achievementsDisplay.appendChild(achievementElement);
                 });
             }
             
             // &#x986f;&#x793a;&#x6210;&#x5c31;&#x9078;&#x64c7;&#x5668;
             function showAchievementSelector(currentSelected) {
                 // &#x78ba;&#x4fdd;globalStats&#x5df2;&#x521d;&#x59cb;&#x5316;
                 if (typeof globalStats !== 'object' || globalStats === null) {
                     initializeDefaultStats();
                 }
                 
                 // &#x5275;&#x5efa;&#x6a21;&#x614b;&#x6846;
                 const modal = document.createElement('div');
                 modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[100]';
                 modal.id = 'achievement-selector-modal';
                 
                 // &#x7372;&#x53d6;&#x53ef;&#x4f9b;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;
                 const availableAchievements = getAvailableAchievements();
                 
                 // &#x5275;&#x5efa;&#x6a21;&#x614b;&#x6846;&#x5167;&#x5bb9;
                 modal.innerHTML = `
                     &lt;div class="bg-white dark:bg-gray-800 rounded-lg p-5 max-w-xl w-full mx-4 max-h-[80vh] overflow-y-auto"&gt;
                         &lt;div class="flex justify-between items-center mb-4"&gt;
                             &lt;h3 class="text-xl font-bold text-gray-800 dark:text-gray-100"&gt;&#x5c55;&#x793a;&#x6b77;&#x53f2;&#x6210;&#x5c31;&lt;/h3&gt;
                             &lt;button id="close-achievement-selector" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100"&gt;
                                 &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                             &lt;/button&gt;
                         &lt;/div&gt;
                         
                         &lt;p class="text-gray-600 dark:text-gray-400 mb-4"&gt;&#x53ef;&#x9078;&#x64c7;&#x6700;&#x591a;&#x4e09;&#x500b;&#x6b77;&#x53f2;&#x6210;&#x5c31;&lt;/p&gt;
                         
                         &lt;div id="achievement-list" class="space-y-4"&gt;
                             &lt;!-- &#x6210;&#x5c31;&#x5217;&#x8868;&#x5c07;&#x5728;&#x9019;&#x88e1;&#x751f;&#x6210; --&gt;
                         &lt;/div&gt;
                         
                         &lt;div class="flex justify-end mt-6"&gt;
                             &lt;button id="save-achievements-btn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90"&gt;&#x4fdd;&#x5b58;&#x9078;&#x64c7;&lt;/button&gt;
                         &lt;/div&gt;
                     &lt;/div&gt;
                 `;
                 
                 document.body.appendChild(modal);
                 
                 // &#x586b;&#x5145;&#x6210;&#x5c31;&#x5217;&#x8868;
                 const achievementList = document.getElementById('achievement-list');
                 if (achievementList) {
                     // &#x7d44;&#x7e54;&#x6210;&#x5c31;&#x70ba;&#x985e;&#x5225;
                     const categories = [
                         {
                             name: '&#x904a;&#x6232;&#x6210;&#x5c31;',
                             achievements: availableAchievements.filter(a =&gt; ['complete', 'lightning', 'master', 'snail', 'tireless', 'nightOwl', 'badDigestion'].includes(a.id))
                         },
                         {
                             name: '&#x5192;&#x96aa;&#x4e4b;&#x8def;',
                             achievements: availableAchievements.filter(a =&gt; a.id.startsWith('adventure'))
                         },
                         {
                             name: '&#x632b;&#x6557;&#x4e4b;&#x8def;',
                             achievements: availableAchievements.filter(a =&gt; a.id.startsWith('defeat'))
                         },
                         {
                             name: '&#x6975;&#x901f;&#x4e4b;&#x8def;',
                             achievements: availableAchievements.filter(a =&gt; a.id.startsWith('speed'))
                         },
                         {
                             name: '&#x5b8c;&#x7f8e;&#x4e4b;&#x8def;',
                             achievements: availableAchievements.filter(a =&gt; a.id.startsWith('perfect'))
                         },
                         {
                             name: '&#x8a18;&#x61b6;&#x4e4b;&#x8def;',
                             achievements: availableAchievements.filter(a =&gt; a.id.startsWith('memory'))
                         },
                         {
                             name: '&#x7279;&#x6b8a;&#x6210;&#x5c31;',
                             achievements: availableAchievements.filter(a =&gt; ['dryEyes', 'nightOwlKing', 'focusOnEating'].includes(a.id))
                         }
                     ];
                     
                     // &#x53ea;&#x986f;&#x793a;&#x6709;&#x6210;&#x5c31;&#x7684;&#x985e;&#x5225;
                     categories.forEach(category =&gt; {
                         if (category.achievements.length &gt; 0) {
                             const categoryElement = document.createElement('div');
                             categoryElement.className = 'mb-6';
                             categoryElement.innerHTML = `
                                 &lt;h4 class="text-lg font-medium text-amber-700 dark:text-amber-400 mb-3"&gt;${category.name}&lt;/h4&gt;
                                 &lt;div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 grid grid-cols-1 md:grid-cols-2 gap-3 category-achievements"&gt;
                                     &lt;!-- &#x6210;&#x5c31;&#x5c07;&#x5728;&#x9019;&#x88e1;&#x6dfb;&#x52a0; --&gt;
                                 &lt;/div&gt;
                             `;
                             
                             const achievementsContainer = categoryElement.querySelector('.category-achievements');
                             
                             category.achievements.forEach(achievement =&gt; {
                                 const isSelected = currentSelected.some(a =&gt; a.id === achievement.id);
                                 
                                 const achievementItem = document.createElement('div');
                                 achievementItem.className = `p-3 border ${isSelected ? 'border-primary' : 'border-gray-200 dark:border-gray-600'} rounded-lg flex items-center achievement-item ${isSelected ? 'selected' : ''}`;
                                 achievementItem.dataset.id = achievement.id;
                                 achievementItem.dataset.title = achievement.title;
                                 
                                 achievementItem.innerHTML = `
                                     &lt;div class="w-12 h-12 flex-shrink-0 flex items-center justify-center"&gt;
                                         &lt;i class="${achievement.icon} text-2xl ${isSelected ? 'text-primary' : 'text-gray-500 dark:text-gray-400'}"&gt;&lt;/i&gt;
                                     &lt;/div&gt;
                                     &lt;div class="ml-3 flex-1"&gt;
                                         &lt;p class="font-medium text-gray-800 dark:text-gray-200"&gt;${achievement.title}&lt;/p&gt;
                                         &lt;p class="text-sm text-gray-500 dark:text-gray-400"&gt;${achievement.description}&lt;/p&gt;
                                     &lt;/div&gt;
                                 `;
                                 
                                 achievementsContainer.appendChild(achievementItem);
                                 
                                 // &#x6dfb;&#x52a0;&#x9ede;&#x64ca;&#x4e8b;&#x4ef6;
                                     achievementItem.addEventListener('click', function() {
                                     const isCurrentlySelected = this.classList.contains('selected');
                                     const isNowSelected = !isCurrentlySelected;
                                     
                                     // &#x7372;&#x53d6;&#x7576;&#x524d;&#x9078;&#x4e2d;&#x7684;&#x6210;&#x5c31;&#x6578;&#x91cf;
                                     const selectedCount = document.querySelectorAll('.achievement-item.selected').length;
                                     
                                     // &#x5982;&#x679c;&#x9078;&#x4e2d;&#x6578;&#x91cf;&#x5df2;&#x7d93;&#x9054;&#x5230;3&#x500b;&#x4e14;&#x7576;&#x524d;&#x64cd;&#x4f5c;&#x662f;&#x9078;&#x4e2d;&#xff0c;&#x5247;&#x4e0d;&#x9032;&#x884c;&#x64cd;&#x4f5c;
                                     if (selectedCount &gt;= 3 &amp;&amp; isNowSelected &amp;&amp; !isCurrentlySelected) {
                                         alert('&#x6700;&#x591a;&#x53ea;&#x80fd;&#x9078;&#x64c7;3&#x500b;&#x6210;&#x5c31;');
                                         return;
                                     }
                                     
                                 // &#x66f4;&#x65b0;&#x9078;&#x4e2d;&#x72c0;&#x614b;
                                     if (isNowSelected) {
                                         this.classList.add('selected');
                                         this.classList.remove('border-gray-200', 'dark:border-gray-600');
                                         this.classList.add('border-primary');
                                         this.querySelector('i').classList.remove('text-gray-500', 'dark:text-gray-400');
                                         this.querySelector('i').classList.add('text-primary');
                                     } else {
                                         this.classList.remove('selected');
                                         this.classList.add('border-gray-200', 'dark:border-gray-600');
                                         this.classList.remove('border-primary');
                                         this.querySelector('i').classList.add('text-gray-500', 'dark:text-gray-400');
                                         this.querySelector('i').classList.remove('text-primary');
                                     }
                                 });
                             });
                             
                             achievementList.appendChild(categoryElement);
         
                         }
                     });
                     
                     // &#x5982;&#x679c;&#x6c92;&#x6709;&#x53ef;&#x7528;&#x6210;&#x5c31;
                     if (availableAchievements.length === 0) {
                         achievementList.innerHTML = `
                             &lt;div class="text-center p-6"&gt;
                                 &lt;i class="fas fa-medal text-gray-300 dark:text-gray-600 text-4xl mb-3"&gt;&lt;/i&gt;
                                 &lt;p class="text-gray-600 dark:text-gray-400"&gt;&#x60a8;&#x9084;&#x6c92;&#x6709;&#x7372;&#x5f97;&#x4efb;&#x4f55;&#x6210;&#x5c31;&lt;/p&gt;
                                 &lt;p class="text-sm text-gray-500 dark:text-gray-500 mt-2"&gt;&#x5b8c;&#x6210;&#x66f4;&#x591a;&#x6311;&#x6230;&#x4f86;&#x7372;&#x5f97;&#x6210;&#x5c31;&#xff01;&lt;/p&gt;
                             &lt;/div&gt;
                         `;
                     }
                 }
                 
                 // &#x95dc;&#x9589;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                 const closeBtn = document.getElementById('close-achievement-selector');
                 if (closeBtn) {
                     closeBtn.addEventListener('click', function() {
                         document.body.removeChild(modal);
                     });
                 }
                 
                 // &#x9ede;&#x64ca;&#x80cc;&#x666f;&#x95dc;&#x9589;
                 modal.addEventListener('click', function(e) {
                     if (e.target === modal) {
                         document.body.removeChild(modal);
                     }
                 });
                 
                 // &#x4fdd;&#x5b58;&#x6309;&#x9215;&#x4e8b;&#x4ef6;
                 const saveBtn = document.getElementById('save-achievements-btn');
                 if (saveBtn) {
                     saveBtn.addEventListener('click', function() {
                         // &#x7372;&#x53d6;&#x9078;&#x4e2d;&#x7684;&#x6210;&#x5c31;
                         const selectedItems = document.querySelectorAll('.achievement-item.selected');
                         const selected = [];
                         
                         selectedItems.forEach(item =&gt; {
                             selected.push({
                                 id: item.dataset.id,
                                 title: item.dataset.title
                             });
                         });
                         
                         // &#x4fdd;&#x5b58;&#x5230;localStorage
                         try {
                             localStorage.setItem('MemoryMaster_selectedAchievements', JSON.stringify(selected));
                         } catch (e) {
                             console.error("&#x4fdd;&#x5b58;&#x9078;&#x64c7;&#x7684;&#x6210;&#x5c31;&#x51fa;&#x932f;:", e);
                         }
                         
                         // &#x66f4;&#x65b0;&#x986f;&#x793a;
                         updateAchievementsDisplay(selected);
                         
                         // &#x95dc;&#x9589;&#x6a21;&#x614b;&#x6846;
                         document.body.removeChild(modal);
                     });
                 }
             }
             
             // &#x7372;&#x53d6;&#x53ef;&#x7528;&#x6210;&#x5c31;
             function getAvailableAchievements() {
                 const achievements = [];
                 
                 // &#x7279;&#x6b8a;&#x7d2f;&#x7a4d;&#x6210;&#x5c31;
                 if (globalStats.achievements.dryEyes) {
                     achievements.push({ id: 'dryEyes', title: '&#x773c;&#x4e7e;', description: '&#x7372;&#x5f97;&#x4e0d;&#x77e5;&#x75b2;&#x5026;30&#x6b21;', icon: 'fas fa-eye' });
                 }
                 
                 if (globalStats.achievements.nightOwlKing) {
                     achievements.push({ id: 'nightOwlKing', title: '&#x591c;&#x8c93;&#x738b;', description: '&#x7372;&#x5f97;&#x591c;&#x8c93;20&#x6b21;', icon: 'fas fa-crown' });
                 }
                 
                 if (globalStats.achievements.focusOnEating) {
                     achievements.push({ id: 'focusOnEating', title: '&#x8acb;&#x5c08;&#x5fc3;&#x5403;&#x98ef;', description: '&#x7372;&#x5f97;&#x8178;&#x80c3;&#x4e0d;&#x597d;20&#x6b21;', icon: 'fas fa-drumstick-bite' });
                 }
                 
                 // &#x5192;&#x96aa;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 const adventureLevels = ['&#x521d;&#x5fc3;&#x8005;', '&#x52c7;&#x8005;', '&#x5927;&#x5e2b;', '&#x504f;&#x57f7;&#x72c2;', '&#x6383;&#x5730;&#x50e7;'];
                 const adventureRequirements = [1, 10, 50, 150, 300];
                 const adventureIcons = ['fas fa-hiking', 'fas fa-running', 'fas fa-dragon', 'fas fa-atom', 'fas fa-broom'];
                 
                 for (let i = 0; i &lt; globalStats.achievements.adventureLevel; i++) {
                     achievements.push({
                         id: `adventure${i+1}`,
                         title: adventureLevels[i],
                         description: `&#x5b8c;&#x6210;${adventureRequirements[i]}&#x6b21;&#x6311;&#x6230;`,
                         icon: adventureIcons[i]
                     });
                 }
                 
                 // &#x632b;&#x6557;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 const defeatLevels = ['&#x521d;&#x5617;&#x6557;&#x7e3e;', '&#x5805;&#x6bc5;', '&#x92fc;&#x9435;&#x610f;&#x5fd7;', '&#x5c0f;&#x5f37;&#x662f;&#x6211;', '&#x5fc3;&#x5982;&#x6b62;&#x6c34;'];
                 const defeatRequirements = [1, 5, 30, 50, 100];
                 const defeatIcons = ['fas fa-dizzy', 'fas fa-fist-raised', 'fas fa-shield-alt', 'fas fa-bug', 'fas fa-water'];
                 
                 for (let i = 0; i &lt; globalStats.achievements.defeatLevel; i++) {
                     achievements.push({
                         id: `defeat${i+1}`,
                         title: defeatLevels[i],
                         description: `&#x5931;&#x6557;${defeatRequirements[i]}&#x6b21;`,
                         icon: defeatIcons[i]
                     });
                 }
                 
                 // &#x6975;&#x901f;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 const speedLevels = ['&#x654f;&#x6377;', '&#x808c;&#x8089;&#x8a18;&#x61b6;', '&#x7121;&#x5f71;&#x624b;', '&#x4e16;&#x754c;&#x7b2c;&#x4e00;&#x675f;&#x5149;'];
                 const speedRequirements = [1, 10, 50, 100];
                 const speedIcons = ['fas fa-tachometer-alt', 'fas fa-dumbbell', 'fas fa-hand-paper', 'fas fa-lightbulb'];
                 
                 for (let i = 0; i &lt; globalStats.achievements.speedRouteLevel; i++) {
                     achievements.push({
                         id: `speed${i+1}`,
                         title: speedLevels[i],
                         description: `&#x7372;&#x5f97;&#x9583;&#x96fb;&#x4fe0;${speedRequirements[i]}&#x6b21;`,
                         icon: speedIcons[i]
                     });
                 }
                 
                 // &#x5b8c;&#x7f8e;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 const perfectLevels = ['&#x5982;&#x6c90;&#x6625;&#x98a8;', '&#x5b8c;&#x7f8e;&#x4e3b;&#x7fa9;', '&#x6eff;&#x6708;', '&#x81f3;&#x5584;'];
                 const perfectRequirements = [1, 10, 50, 100];
                 const perfectIcons = ['fas fa-wind', 'fas fa-ruler', 'fas fa-circle', 'fas fa-dove'];
                 
                 for (let i = 0; i &lt; globalStats.achievements.perfectRouteLevel; i++) {
                     achievements.push({
                         id: `perfect${i+1}`,
                         title: perfectLevels[i],
                         description: `&#x7372;&#x5f97;&#x5b8c;&#x7f8e;&#x7121;&#x7455;${perfectRequirements[i]}&#x6b21;`,
                         icon: perfectIcons[i]
                     });
                 }
                 
                 // &#x8a18;&#x61b6;&#x4e4b;&#x8def;&#x6210;&#x5c31;
                 const memoryLevels = ['&#x6fc0;&#x6d3b;&#x8166;&#x7d30;&#x80de;', '&#x8a18;&#x61b6;&#x9eb5;&#x5305;', '&#x79fb;&#x52d5;&#x5716;&#x66f8;&#x9928;', '&#x6d41;&#x5982;&#x80cc;&#x5012;'];
                 const memoryRequirements = [1, 10, 30, 50];
                 const memoryIcons = ['fas fa-brain', 'fas fa-bread-slice', 'fas fa-book', 'fas fa-stream'];
                 
                 for (let i = 0; i &lt; globalStats.achievements.memoryRouteLevel; i++) {
                     achievements.push({
                         id: `memory${i+1}`,
                         title: memoryLevels[i],
                         description: `&#x7372;&#x5f97;&#x8a18;&#x61b6;&#x5927;&#x5e2b;${memoryRequirements[i]}&#x6b21;`,
                         icon: memoryIcons[i]
                     });
                 }
                 
                 return achievements;
             }
             
             console.log("&#x521d;&#x59cb;&#x5316;&#x5b8c;&#x6210;");
         });
      &lt;/script&gt;
      &lt;script&gt;
         // &#x5168;&#x5c4f;&#x63a7;&#x5236;&#x903b;&#x8f91;
         function toggleFullscreen() {
           if (!document.fullscreenElement) {
             document.documentElement.requestFullscreen();
           } else {
             document.exitFullscreen();
           }
         }
         
         // &#x76d1;&#x542c;&#x5168;&#x5c4f;&#x53d8;&#x5316;
         document.addEventListener('fullscreenchange', () =&gt; {
           if (!document.fullscreenElement) {
             // &#x9000;&#x51fa;&#x5168;&#x5c4f;&#x540e;&#x7684;&#x5904;&#x7406;
             console.log('&#x5df2;&#x9000;&#x51fa;&#x5168;&#x5c4f;&#x6a21;&#x5f0f;');
           }
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
